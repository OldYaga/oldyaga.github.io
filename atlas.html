<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script id="versionArea" type="text/javascript">
//<![CDATA[
var version = {title: "TiddlyWiki", major: 2, minor: 8, revision: 1, date: new Date("June 23, 2013"), extensions: {}};
//]]>
</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' />
<title> Atlas - с вами с 3774 года </title>
<style id="styleArea" type="text/css">
#saveTest {display:none;}
#messageArea {display:none;}
#copyright {display:none;}
#storeArea {display:none;}
#storeArea div {padding:0.5em; margin:1em 0em 0em 0em; border-color:#fff #666 #444 #ddd; border-style:solid; border-width:2px; overflow:auto;}
#shadowArea {display:none;}
#javascriptWarning {width:100%; text-align:center; font-weight:bold; background-color:#dd1100; color:#fff; padding:1em 0em;}
</style>
<!--POST-HEAD-START-->

<!--POST-HEAD-END-->
<script src="core.281.js" type="text/javascript"></script>
<script type="text/javascript">
if (typeof config == "undefined") { window.main = function() { message = 'No CORE file <font color="navy">(usually core.270.js)</font> found!'; message_div = document.getElementById('copyright'); message_div.style.color = 'red'; message_div.style.display = 'block'; message_div.innerHTML = message; } }
</script>

</head>
<body onload="main();" onunload="if(window.unload) unload();">
<!--PRE-BODY-START-->

<!--PRE-BODY-END-->
<div id="copyright">
Welcome to TiddlyWiki created by Jeremy Ruston; Copyright &copy; 2004-2007 Jeremy Ruston, Copyright &copy; 2007-2011 UnaMesa Association
</div>
<noscript>
<div id="javascriptWarning">
This page requires JavaScript to function properly.<br /><br />If you are using Microsoft Internet Explorer you may need to click on the yellow bar above and select 'Allow Blocked Content'. You must then click 'Yes' on the following security warning.
</div>
</noscript>
<div id="saveTest"></div>
<div id="backstageCloak"></div>
<div id="backstageButton"></div>
<div id="backstageArea"><div id="backstageToolbar"></div></div>
<div id="backstage">
	<div id="backstagePanel"></div>
</div>
<div id="contentWrapper"></div>
<div id="contentStash"></div>
<div id="shadowArea">
<div title="ColorPalette">
<pre>Background: #fff
Foreground: #000
PrimaryPale: #8cf
PrimaryLight: #18f
PrimaryMid: #04b
PrimaryDark: #014
SecondaryPale: #ffc
SecondaryLight: #fe8
SecondaryMid: #db4
SecondaryDark: #841
TertiaryPale: #eee
TertiaryLight: #ccc
TertiaryMid: #999
TertiaryDark: #666
Error: #f88
</pre>
</div>
<div title="EditTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="GettingStarted">
<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:
* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)
* [[MainMenu]]: The menu (usually on the left)
* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened
You'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;
</pre>
</div>
<div title="ImportTiddlers">
<pre>&lt;&lt;importTiddlers&gt;&gt;
</pre>
</div>
<div title="MarkupPreHead">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="OptionsPanel">
<pre>These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser

Your username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])

&lt;&lt;option txtUserName&gt;&gt;
&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]
&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]
&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]
&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]
&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]

----
Also see [[AdvancedOptions]]
</pre>
</div>
<div title="PageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' role='banner' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' role='navigation' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' role='navigation' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' role='complementary' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea' role='main'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="StyleSheetColors">
<pre>/*{{{*/
body {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}

a {color:[[ColorPalette::PrimaryMid]];}
a:hover {background-color:[[ColorPalette::PrimaryMid]]; color:[[ColorPalette::Background]];}
a img {border:0;}

h1,h2,h3,h4,h5,h6 {color:[[ColorPalette::SecondaryDark]]; background:transparent;}
h1 {border-bottom:2px solid [[ColorPalette::TertiaryLight]];}
h2,h3 {border-bottom:1px solid [[ColorPalette::TertiaryLight]];}

.button {color:[[ColorPalette::PrimaryDark]]; border:1px solid [[ColorPalette::Background]];}
.button:hover {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::SecondaryLight]]; border-color:[[ColorPalette::SecondaryMid]];}
.button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::SecondaryDark]];}

.header {background:[[ColorPalette::PrimaryMid]];}
.headerShadow {color:[[ColorPalette::Foreground]];}
.headerShadow a {font-weight:normal; color:[[ColorPalette::Foreground]];}
.headerForeground {color:[[ColorPalette::Background]];}
.headerForeground a {font-weight:normal; color:[[ColorPalette::PrimaryPale]];}

.tabSelected {color:[[ColorPalette::PrimaryDark]];
	background:[[ColorPalette::TertiaryPale]];
	border-left:1px solid [[ColorPalette::TertiaryLight]];
	border-top:1px solid [[ColorPalette::TertiaryLight]];
	border-right:1px solid [[ColorPalette::TertiaryLight]];
}
.tabUnselected {color:[[ColorPalette::Background]]; background:[[ColorPalette::TertiaryMid]];}
.tabContents {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::TertiaryPale]]; border:1px solid [[ColorPalette::TertiaryLight]];}
.tabContents .button {border:0;}

#sidebar {}
#sidebarOptions input {border:1px solid [[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel {background:[[ColorPalette::PrimaryPale]];}
#sidebarOptions .sliderPanel a {border:none;color:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:hover {color:[[ColorPalette::Background]]; background:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:active {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::Background]];}

.wizard {background:[[ColorPalette::PrimaryPale]]; border:1px solid [[ColorPalette::PrimaryMid]];}
.wizard h1 {color:[[ColorPalette::PrimaryDark]]; border:none;}
.wizard h2 {color:[[ColorPalette::Foreground]]; border:none;}
.wizardStep {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];
	border:1px solid [[ColorPalette::PrimaryMid]];}
.wizardStep.wizardStepDone {background:[[ColorPalette::TertiaryLight]];}
.wizardFooter {background:[[ColorPalette::PrimaryPale]];}
.wizardFooter .status {background:[[ColorPalette::PrimaryDark]]; color:[[ColorPalette::Background]];}
.wizard .button {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryLight]]; border: 1px solid;
	border-color:[[ColorPalette::SecondaryPale]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryPale]];}
.wizard .button:hover {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Background]];}
.wizard .button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::Foreground]]; border: 1px solid;
	border-color:[[ColorPalette::PrimaryDark]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryDark]];}

.wizard .notChanged {background:transparent;}
.wizard .changedLocally {background:#80ff80;}
.wizard .changedServer {background:#8080ff;}
.wizard .changedBoth {background:#ff8080;}
.wizard .notFound {background:#ffff80;}
.wizard .putToServer {background:#ff80ff;}
.wizard .gotFromServer {background:#80ffff;}

#messageArea {border:1px solid [[ColorPalette::SecondaryMid]]; background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]];}
#messageArea .button {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::SecondaryPale]]; border:none;}

.popupTiddler {background:[[ColorPalette::TertiaryPale]]; border:2px solid [[ColorPalette::TertiaryMid]];}

.popup {background:[[ColorPalette::TertiaryPale]]; color:[[ColorPalette::TertiaryDark]]; border-left:1px solid [[ColorPalette::TertiaryMid]]; border-top:1px solid [[ColorPalette::TertiaryMid]]; border-right:2px solid [[ColorPalette::TertiaryDark]]; border-bottom:2px solid [[ColorPalette::TertiaryDark]];}
.popup hr {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::PrimaryDark]]; border-bottom:1px;}
.popup li.disabled {color:[[ColorPalette::TertiaryMid]];}
.popup li a, .popup li a:visited {color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:active {background:[[ColorPalette::SecondaryPale]]; color:[[ColorPalette::Foreground]]; border: none;}
.popupHighlight {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
.listBreak div {border-bottom:1px solid [[ColorPalette::TertiaryDark]];}

.tiddler .defaultCommand {font-weight:bold;}

.shadow .title {color:[[ColorPalette::TertiaryDark]];}

.title {color:[[ColorPalette::SecondaryDark]];}
.subtitle {color:[[ColorPalette::TertiaryDark]];}

.toolbar {color:[[ColorPalette::PrimaryMid]];}
.toolbar a {color:[[ColorPalette::TertiaryLight]];}
.selected .toolbar a {color:[[ColorPalette::TertiaryMid]];}
.selected .toolbar a:hover {color:[[ColorPalette::Foreground]];}

.tagging, .tagged {border:1px solid [[ColorPalette::TertiaryPale]]; background-color:[[ColorPalette::TertiaryPale]];}
.selected .tagging, .selected .tagged {background-color:[[ColorPalette::TertiaryLight]]; border:1px solid [[ColorPalette::TertiaryMid]];}
.tagging .listTitle, .tagged .listTitle {color:[[ColorPalette::PrimaryDark]];}
.tagging .button, .tagged .button {border:none;}

.footer {color:[[ColorPalette::TertiaryLight]];}
.selected .footer {color:[[ColorPalette::TertiaryMid]];}

.error, .errorButton {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Error]];}
.warning {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryPale]];}
.lowlight {background:[[ColorPalette::TertiaryLight]];}

.zoomer {background:none; color:[[ColorPalette::TertiaryMid]]; border:3px solid [[ColorPalette::TertiaryMid]];}

.imageLink, #displayArea .imageLink {background:transparent;}

.annotation {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border:2px solid [[ColorPalette::SecondaryMid]];}

.viewer .listTitle {list-style-type:none; margin-left:-2em;}
.viewer .button {border:1px solid [[ColorPalette::SecondaryMid]];}
.viewer blockquote {border-left:3px solid [[ColorPalette::TertiaryDark]];}

.viewer table, table.twtable {border:2px solid [[ColorPalette::TertiaryDark]];}
.viewer th, .viewer thead td, .twtable th, .twtable thead td {background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::Background]];}
.viewer td, .viewer tr, .twtable td, .twtable tr {border:1px solid [[ColorPalette::TertiaryDark]];}

.viewer pre {border:1px solid [[ColorPalette::SecondaryLight]]; background:[[ColorPalette::SecondaryPale]];}
.viewer code {color:[[ColorPalette::SecondaryDark]];}
.viewer hr {border:0; border-top:dashed 1px [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::TertiaryDark]];}

.highlight, .marked {background:[[ColorPalette::SecondaryLight]];}

.editor input {border:1px solid [[ColorPalette::PrimaryMid]];}
.editor textarea {border:1px solid [[ColorPalette::PrimaryMid]]; width:100%;}
.editorFooter {color:[[ColorPalette::TertiaryMid]];}
.readOnly {background:[[ColorPalette::TertiaryPale]];}

#backstageArea {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::TertiaryMid]];}
#backstageArea a {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstageArea a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }
#backstageArea a.backstageSelTab {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
#backstageButton a {background:none; color:[[ColorPalette::Background]]; border:none;}
#backstageButton a:hover {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstagePanel {background:[[ColorPalette::Background]]; border-color: [[ColorPalette::Background]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]];}
.backstagePanelFooter .button {border:none; color:[[ColorPalette::Background]];}
.backstagePanelFooter .button:hover {color:[[ColorPalette::Foreground]];}
#backstageCloak {background:[[ColorPalette::Foreground]]; opacity:0.6; filter:alpha(opacity=60);}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLayout">
<pre>/*{{{*/
* html .tiddler {height:1%;}

body {font-size:.75em; font-family:arial,helvetica; margin:0; padding:0;}

h1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;}
h1,h2,h3 {padding-bottom:1px; margin-top:1.2em;margin-bottom:0.3em;}
h4,h5,h6 {margin-top:1em;}
h1 {font-size:1.35em;}
h2 {font-size:1.25em;}
h3 {font-size:1.1em;}
h4 {font-size:1em;}
h5 {font-size:.9em;}

hr {height:1px;}

a {text-decoration:none;}

dt {font-weight:bold;}

ol {list-style-type:decimal;}
ol ol {list-style-type:lower-alpha;}
ol ol ol {list-style-type:lower-roman;}
ol ol ol ol {list-style-type:decimal;}
ol ol ol ol ol {list-style-type:lower-alpha;}
ol ol ol ol ol ol {list-style-type:lower-roman;}
ol ol ol ol ol ol ol {list-style-type:decimal;}

.txtOptionInput {width:11em;}

#contentWrapper .chkOptionInput {border:0;}

.externalLink {text-decoration:underline;}

.indent {margin-left:3em;}
.outdent {margin-left:3em; text-indent:-3em;}
code.escaped {white-space:nowrap;}

.tiddlyLinkExisting {font-weight:bold;}
.tiddlyLinkNonExisting {font-style:italic;}

/* the 'a' is required for IE, otherwise it renders the whole tiddler in bold */
a.tiddlyLinkNonExisting.shadow {font-weight:bold;}

#mainMenu .tiddlyLinkExisting,
	#mainMenu .tiddlyLinkNonExisting,
	#sidebarTabs .tiddlyLinkNonExisting {font-weight:normal; font-style:normal;}
#sidebarTabs .tiddlyLinkExisting {font-weight:bold; font-style:normal;}

.header {position:relative;}
.header a:hover {background:transparent;}
.headerShadow {position:relative; padding:4.5em 0 1em 1em; left:-1px; top:-1px;}
.headerForeground {position:absolute; padding:4.5em 0 1em 1em; left:0; top:0;}

.siteTitle {font-size:3em;}
.siteSubtitle {font-size:1.2em;}

#mainMenu {position:absolute; left:0; width:10em; text-align:right; line-height:1.6em; padding:1.5em 0.5em 0.5em 0.5em; font-size:1.1em;}

#sidebar {position:absolute; right:3px; width:16em; font-size:.9em;}
#sidebarOptions {padding-top:0.3em;}
#sidebarOptions a {margin:0 0.2em; padding:0.2em 0.3em; display:block;}
#sidebarOptions input {margin:0.4em 0.5em;}
#sidebarOptions .sliderPanel {margin-left:1em; padding:0.5em; font-size:.85em;}
#sidebarOptions .sliderPanel a {font-weight:bold; display:inline; padding:0;}
#sidebarOptions .sliderPanel input {margin:0 0 0.3em 0;}
#sidebarTabs .tabContents {width:15em; overflow:hidden;}

.wizard {padding:0.1em 1em 0 2em;}
.wizard h1 {font-size:2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizard h2 {font-size:1.2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizardStep {padding:1em 1em 1em 1em;}
.wizard .button {margin:0.5em 0 0; font-size:1.2em;}
.wizardFooter {padding:0.8em 0.4em 0.8em 0;}
.wizardFooter .status {padding:0 0.4em; margin-left:1em;}
.wizard .button {padding:0.1em 0.2em;}

#messageArea {position:fixed; top:2em; right:0; margin:0.5em; padding:0.5em; z-index:2000; _position:absolute;}
.messageToolbar {display:block; text-align:right; padding:0.2em;}
#messageArea a {text-decoration:underline;}

.tiddlerPopupButton {padding:0.2em;}
.popupTiddler {position: absolute; z-index:300; padding:1em; margin:0;}

.popup {position:absolute; z-index:300; font-size:.9em; padding:0; list-style:none; margin:0;}
.popup .popupMessage {padding:0.4em;}
.popup hr {display:block; height:1px; width:auto; padding:0; margin:0.2em 0;}
.popup li.disabled {padding:0.4em;}
.popup li a {display:block; padding:0.4em; font-weight:normal; cursor:pointer;}
.listBreak {font-size:1px; line-height:1px;}
.listBreak div {margin:2px 0;}

.tabset {padding:1em 0 0 0.5em;}
.tab {margin:0 0 0 0.25em; padding:2px;}
.tabContents {padding:0.5em;}
.tabContents ul, .tabContents ol {margin:0; padding:0;}
.txtMainTab .tabContents li {list-style:none;}
.tabContents li.listLink { margin-left:.75em;}

#contentWrapper {display:block;}
#splashScreen {display:none;}

#displayArea {margin:1em 17em 0 14em;}

.toolbar {text-align:right; font-size:.9em;}

.tiddler {padding:1em 1em 0;}

.missing .viewer,.missing .title {font-style:italic;}

.title {font-size:1.6em; font-weight:bold;}

.missing .subtitle {display:none;}
.subtitle {font-size:1.1em;}

.tiddler .button {padding:0.2em 0.4em;}

.tagging {margin:0.5em 0.5em 0.5em 0; float:left; display:none;}
.isTag .tagging {display:block;}
.tagged {margin:0.5em; float:right;}
.tagging, .tagged {font-size:0.9em; padding:0.25em;}
.tagging ul, .tagged ul {list-style:none; margin:0.25em; padding:0;}
.tagClear {clear:both;}

.footer {font-size:.9em;}
.footer li {display:inline;}

.annotation {padding:0.5em; margin:0.5em;}

* html .viewer pre {width:99%; padding:0 0 1em 0;}
.viewer {line-height:1.4em; padding-top:0.5em;}
.viewer .button {margin:0 0.25em; padding:0 0.25em;}
.viewer blockquote {line-height:1.5em; padding-left:0.8em;margin-left:2.5em;}
.viewer ul, .viewer ol {margin-left:0.5em; padding-left:1.5em;}

.viewer table, table.twtable {border-collapse:collapse; margin:0.8em 1.0em;}
.viewer th, .viewer td, .viewer tr,.viewer caption,.twtable th, .twtable td, .twtable tr,.twtable caption {padding:3px;}
table.listView {font-size:0.85em; margin:0.8em 1.0em;}
table.listView th, table.listView td, table.listView tr {padding:0 3px 0 3px;}

.viewer pre {padding:0.5em; margin-left:0.5em; font-size:1.2em; line-height:1.4em; overflow:auto;}
.viewer code {font-size:1.2em; line-height:1.4em;}

.editor {font-size:1.1em;}
.editor input, .editor textarea {display:block; width:100%; font:inherit;}
.editorFooter {padding:0.25em 0; font-size:.9em;}
.editorFooter .button {padding-top:0; padding-bottom:0;}

.fieldsetFix {border:0; padding:0; margin:1px 0px;}

.zoomer {font-size:1.1em; position:absolute; overflow:hidden;}
.zoomer div {padding:1em;}

* html #backstage {width:99%;}
* html #backstageArea {width:99%;}
#backstageArea {display:none; position:relative; overflow: hidden; z-index:150; padding:0.3em 0.5em;}
#backstageToolbar {position:relative;}
#backstageArea a {font-weight:bold; margin-left:0.5em; padding:0.3em 0.5em;}
#backstageButton {display:none; position:absolute; z-index:175; top:0; right:0;}
#backstageButton a {padding:0.1em 0.4em; margin:0.1em;}
#backstage {position:relative; width:100%; z-index:50;}
#backstagePanel {display:none; z-index:100; position:absolute; width:90%; margin-left:3em; padding:1em;}
.backstagePanelFooter {padding-top:0.2em; float:right;}
.backstagePanelFooter a {padding:0.2em 0.4em;}
#backstageCloak {display:none; z-index:20; position:absolute; width:100%; height:100px;}

.whenBackstage {display:none;}
.backstageVisible .whenBackstage {display:block;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLocale">
<pre>/***
StyleSheet for use when a translation requires any css style changes.
This StyleSheet can be used directly by languages such as Chinese, Japanese and Korean which need larger font sizes.
***/
/*{{{*/
body {font-size:0.8em;}
#sidebarOptions {font-size:1.05em;}
#sidebarOptions a {font-style:normal;}
#sidebarOptions .sliderPanel {font-size:0.95em;}
.subtitle {font-size:0.8em;}
.viewer table.listView {font-size:0.95em;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetPrint">
<pre>/*{{{*/
@media print {
#mainMenu, #sidebar, #messageArea, .toolbar, #backstageButton, #backstageArea {display: none !important;}
#displayArea {margin: 1em 1em 0em;}
noscript {display:none;} /* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */
}
/*}}}*/
</pre>
</div>
<div title="ViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' role='navigation' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div></div>
<!--POST-SHADOWAREA-->
<div id="storeArea">
<div title="CR, CL" creator="OldYaga" modifier="OldYaga" created="201702251110" modified="201702251116" tags="Правила" changecount="3">
<pre>CR0 – Анархия. Нет ни законов, ни контроля, ни налогов.
CR1 – Очень свободное. Налоги добровольны или очень низки. Преследуется только применение силы или угроз к другим гражданам. Контролируется только распространение снаряжения с КЛ0 (см. Легальность, с.507).
CR2 – Свободное. Существуют некоторые законы; большинство выгодны индивидам. Налоги низкие. Доступ к оборудованию КЛ0 и КЛ1 контролируется.
CR3 – Умеренное. Множество законов, но большинство выгодны гражданам. Налоги умеренные и справедливые. Контролируется доступ к оборудованию КЛ0-2.
CR4 – Контролируемое. Множество законов, большинство – в пользу государства. Контроль за средствами массовой информации; частные газеты и передачи могут быть запрещены. Налоги серьёзные и зачастую завышены. Контролируется доступ к снаряжению от КЛ0 до КЛ3.
CR5 – Репрессивное. Существует множество законов и предписаний, строго охраняемых. Налоги велики и чаще всего несправедливы. Строгий контроль над информационными технологиями: компьютерами, фотокопированием, печатными станками, передатчиками и т.д. Контролируется распространение почти всех товаров; вы не сможете купить почти ничего без подходящего разрешения или бумажной волокиты.
CR6 – Тотальный контроль. Множество сложных законов. Люди живут, чтобы служить государству. Большинство преступлений наказывается смертью, а суды – если вообще существуют – лишь видимость. На огромные налоги уходит большая часть дохода граждан. Распространена цензура, частное владение любыми видами информационных технологий запрещено. Контроль над распространением любых товаров, и правительство может ограничить доступ даже к предметам первой необходимости.

CL0 – Запрещенное. Оружие массового уничтожения; межконтинентальные ракеты; орбитальные оружейные платформы, стратегические бомбардировщики.
CL1 – Военное. Тяжелое оружие; радары ПВО, средства РЭБ (sensor jammers), бронетехника, мины.
CL2 – Ограниченное. Легкое штурмовое оружие; глушители; средства наблюдения (прослушивание телефонов и т.д.); взрывчатка, опасные медикаменты.
CL3 – Лицензируемое. Пистолеты, охотничье оружие, радиопередатчики; большинство невооруженного транспорта; обычные лекарства и медицинское снаряжение.
CL4 – Свободное. Несмертельное оружие (станнеры), домашние компьютеры, радио- и телевизионные приемники, камеры, большинство инструментов, наборы первой помощи.

CL = CR + 1 и больше: любой гражданин может обладать этим предметом.
CL = CR: объекты разрешены всем, кроме осужденных и приравненным к ним. Может требоваться регистрация, но разрешения обычно не нужно.
CL = CR - 1: для владения и ношения предмета необходима лицензия. Для получения ее необходимо продемонстрировать надежность и законопослушность. Обычно лицензия стоит 1к × 10% стоимости самого предмета.
CL = CR - 2: Запрещено, кроме полиции, армии и разведки.
CL = CR - 3 и менее: разрешено только армейским подразделениям или секретным службам.</pre>
</div>
<div title="CloseUnsavedOnCancel" creator="RainSkylark" modifier="RainSkylark" created="201301171156" modified="201202150301" tags="systemConfig excludeLists" changecount="3">
<pre>/***
|''Name:''|CloseUnsavedOnCancel|
|''Version:''|2.0.8 (16-Apr-2006)|
|''Author:''|SimonBaird|
|''Adapted By:''|[[Jack]]|
|''Type:''|Plugin|
!Description
When you click new tiddler then click cancel I think the new tiddler should close automatically. This plugin implements that behaviour.

!Revision History
* 1.0.1 (11-Oct-2005) by SimonBaird
* 2.0.8 Made 2.0.x compatible by Jack on 16-Apr-2006

!Code
***/
//{{{

config.commands.cancelTiddler.handler = function(event,src,title) {
 if(story.hasChanges(title) &amp;&amp; !readOnly)
 if(!confirm(this.warning.format([title])))
 return false;
 story.setDirty(title,false);
 if (!store.tiddlerExists(title) || store.fetchTiddler(title).modifier==config.views.wikified.defaultModifier) {
 story.closeTiddler(title,false);
 store.removeTiddler(title)
 } else {
 story.displayTiddler(null,title);
 }
 return false;
}

//}}}</pre>
</div>
<div title="ColorPalette" creator="KarelWintersky" modifier="KarelWintersky" created="201506280615" changecount="1">
<pre>Background: #fff
Foreground: #000
PrimaryPale: #aef
PrimaryLight: #8ad
PrimaryMid: #38c
PrimaryDark: #026
SecondaryPale: #ffc
SecondaryLight: #fe8
SecondaryMid: #db4
SecondaryDark: #841
TertiaryPale: #eee
TertiaryLight: #ccc
TertiaryMid: #999
TertiaryDark: #666
QuaternaryPale: #cf8
QuaternaryLight: #8f1
QuaternaryMid: #4b0
QuaternaryDark: #140
Error: #f88
</pre>
</div>
<div title="Configuration" creator="RainSkylark" modifier="KarelWintersky" created="201302150310" modified="201312132107" tags="excludeLists" changecount="24">
<pre>PageTemplate | ViewTemplate | EditTemplate |

|&gt;|&gt;|SiteTitle - SiteSubtitle|
|MainMenu|DefaultTiddlers&lt;&lt;br&gt;&gt;ViewTemplate&lt;&lt;br&gt;&gt;EditTemplate|SideBarOptions|
|~|~|OptionsPanel|
|~|~|AdvancedOptions|
|~|~|&lt;&lt;tiddler Configuration.SideBarTabs&gt;&gt;|

''StyleSheet:'' StyleSheetColors - StyleSheetLayout - StyleSheetPrint
SiteUrl

[[Configuration.SideBarTabs]]
[[DefaultTiddlers]]

[[ToolbarCommands]]
</pre>
</div>
<div title="Configuration.SideBarTabs" creator="RainSkylark" modifier="RainSkylark" created="201302150312" modified="201202150329" tags="excludeLists" changecount="3">
<pre>SideBarTabs
|[[Timeline|TabTimeline]]|[[Все|TabAll]]|[[Tags|TabTags]]|&gt;|&gt;|[[More|TabMore]] |
|&gt;|&gt;||[[Missing|TabMoreMissing]]|[[Orphans|TabMoreOrphans]]|[[Shadowed|TabMoreShadowed]]|</pre>
</div>
<div title="DefaultTiddlers" creator="RainSkylark" modifier="OldYaga" created="201312030601" modified="201702222033" tags="excludeLists" changecount="12">
<pre></pre>
</div>
<div title="DeliciousTagging" creator="RainSkylark" modifier="RainSkylark" created="201301171158" modified="201202150258" tags="systemConfig excludeLists" changecount="4">
<pre>/***
|''Name:''|DeliciousTaggingPlugin|
|''Version:''|0.1|
|''Source''|http://jackparke.googlepages.com/jtw.html#DeliciousTaggingPlugin ([[del.icio.us|http://del.icio.us/post?url=http://jackparke.googlepages.com/jtw.html%DeliciousTaggingPlugin]])|
|''Author:''|[[Jack]]|
!Description
Allows easy 'del.icio.us'-like tagging in the EditTemplate by showing all tags as a list of link-buttons.
!Usage
Replace your the editorFooter div in your [[EditTemplate]] with the following:
{{{
&lt;div class='editorFooter' macro='deliciousTagging'&gt;&lt;/div&gt;
}}}
Старый код: 
{{{
&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser'&gt;&lt;/span&gt;&lt;/div&gt;
}}}
!Code
***/
//{{{
version.extensions.deliciousTagging = {major: 0, minor: 1, revision: 0, date: new Date(&quot;June 11, 2007&quot;)};

config.macros.deliciousTagging= {};

config.macros.deliciousTagging.onTagClick = function(e)
{
 if (!e) var e = window.event;
 var tag = this.getAttribute(&quot;tag&quot;);
 var title = this.getAttribute(&quot;tiddler&quot;);
 if (!readOnly)
  story.setTiddlerTag(title, tag, 0);
 return false;
};

config.macros.deliciousTagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
 if (tiddler instanceof Tiddler) {
  var title = tiddler.title;
  if (!e) var e = window.event;
  var tags = store.getTags();
  var lingo = config.views.editor.tagChooser;
  for(var t=0; t &lt; tags.length; t++) {
   var theTag = createTiddlyButton( place, tags[t][0], lingo.tagTooltip.format([tags[t][0]]), config.macros.deliciousTagging.onTagClick);
   theTag.setAttribute(&quot;tag&quot;, tags[t][0]);
   theTag.setAttribute(&quot;tiddler&quot;, tiddler.title);
   place.appendChild(document.createTextNode(&quot; &quot;));
  }
 }
};
//}}}</pre>
</div>
<div title="EditTemplate" creator="RainSkylark" modifier="RainSkylark" created="201301171205" modified="201202150302" tags="excludeLists" changecount="5">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]] wikibar richText'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div class='toolbar wikibar' macro='wikibar'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;
&lt;div class='editorFooter' macro='deliciousTagging'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="FullScreenPlugin" creator="RainSkylark" modifier="RainSkylark" created="201301171228" modified="201202150257" tags="systemConfig excludeLists" changecount="4">
<pre>/***
|Name|FullScreenPlugin|
|Created by|SaqImtiaz|
|Location|http://tw.lewcid.org/#FullScreenPlugin|
|Version|1.1|
|Requires|~TW2.x|
!Description:
Toggle between viewing tiddlers fullscreen and normally. Very handy for when you need more viewing space.

!Demo:
Click the ↕ button in the toolbar for this tiddler. Click it again to turn off fullscreen.

!Installation:
Copy the contents of this tiddler to your TW, tag with systemConfig, save and reload your TW.
Edit the ViewTemplate to add the fullscreen command to the toolbar.
{{{ |~ViewToolbar|closeTiddler closeOthers +editTiddler &gt; fields permalink references jump fullscreen| }}}

!History:
*25-07-06: ver 1.1
*20-07-06: ver 1.0

!Code
***/
//{{{
var lewcidFullScreen = false;

config.commands.fullscreen =
{
            text:&quot; «FullScreen» &quot;,
            tooltip:&quot;Fullscreen mode&quot;
};

config.commands.fullscreen.handler = function (event,src,title)
{
            if (lewcidFullScreen == false)
               {
                lewcidFullScreen = true;
                setStylesheet('#sidebar, .header ,  #mainMenu{display:none;} #displayArea{margin:0em 0 0 0 !important;}',&quot;lewcidFullScreenStyle&quot;);
               }
            else
               {
                lewcidFullScreen = false;
                setStylesheet(' ',&quot;lewcidFullScreenStyle&quot;);
               }
}

config.macros.fullscreen={};
config.macros.fullscreen.handler =  function(place,macroName,params,wikifier,paramString,tiddler)
{
        var label = params[0]||&quot; «Screen» &quot;;
        var tooltip = params[1]||&quot;Fullscreen mode&quot;;
        createTiddlyButton(place,label,tooltip,config.commands.fullscreen.handler);
}

var lewcid_fullscreen_closeTiddler = Story.prototype.closeTiddler;
Story.prototype.closeTiddler =function(title,animate,slowly)
{
           lewcid_fullscreen_closeTiddler.apply(this,arguments);
           if (story.isEmpty() &amp;&amp; lewcidFullScreen == true)
              config.commands.fullscreen.handler();
}


Slider.prototype.lewcidStop = Slider.prototype.stop;
Slider.prototype.stop = function()
{
           this.lewcidStop();
           if (story.isEmpty() &amp;&amp; lewcidFullScreen == true)
              config.commands.fullscreen.handler();
}
//}}}</pre>
</div>
<div title="KarelWintersky" creator="KarelWintersky" modifier="KarelWintersky" created="201312132110" tags="excludeLists systemHint" changecount="9">
<pre>[&gt;img[https://dl.dropboxusercontent.com/u/48644575/Wombat_avatar_large.jpg]]
* [[GMail|karel.wintersky@gmail.com]]
* [[LiveJournal|arris-krain.livejournal.com/]]
* [[Imaginaria|http://imaginaria.ru/profile/Arris/]]
* [[GitHub|https://github.com/KarelWintersky/]]
* ICQ: 207-403-021</pre>
</div>
<div title="MainMenu" creator="RainSkylark" modifier="OldYaga" created="201301171314" modified="201702222035" changecount="30">
<pre>[[Игровой устав]]
[[Основная информация по игре]]
[[Партия]]
[[Расы]]
[[Правила]]

~~[[Справка и настройка]]~~
~~[[GettingStarted]]~~
~~[[DefaultTiddlers]]~~</pre>
</div>
<div title="NestedSlidersPlugin" creator="RainSkylark" modifier="RainSkylark" created="201302040557" modified="201202150212" tags="systemConfig excludeLists" changecount="5">
<pre>/***
|Name|NestedSlidersPlugin|
|Source|http://www.TiddlyTools.com/#NestedSlidersPlugin|
|Documentation|http://www.TiddlyTools.com/#NestedSlidersPluginInfo|
|Version|2.4.9|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|show content in nest-able sliding/floating panels, without creating separate tiddlers for each panel's content|
!!!!!Documentation
&gt;see [[NestedSlidersPluginInfo]]
!!!!!Configuration
&lt;&lt;&lt;
&lt;&lt;option chkFloatingSlidersAnimate&gt;&gt; allow floating sliders to animate when opening/closing
&gt;Note: This setting can cause 'clipping' problems in some versions of InternetExplorer.
&gt;In addition, for floating slider animation to occur you must also allow animation in general (see [[AdvancedOptions]]).
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2008.11.15 - 2.4.9 in adjustNestedSlider(), don't make adjustments if panel is marked as 'undocked' (CSS class).  In onClickNestedSlider(), SHIFT-CLICK docks panel (see [[MoveablePanelPlugin]])
|please see [[NestedSlidersPluginInfo]] for additional revision details|
2005.11.03 - 1.0.0 initial public release.  Thanks to RodneyGomes, GeoffSlocock, and PaulPetterson for suggestions and experiments.
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.NestedSlidersPlugin= {major: 2, minor: 4, revision: 9, date: new Date(2008,11,15)};

// options for deferred rendering of sliders that are not initially displayed
if (config.options.chkFloatingSlidersAnimate===undefined)
	config.options.chkFloatingSlidersAnimate=false; // avoid clipping problems in IE

// default styles for 'floating' class
setStylesheet(&quot;.floatingPanel { position:absolute; z-index:10; padding:0.5em; margin:0em; \
	background-color:#eee; color:#000; border:1px solid #000; text-align:left; }&quot;,&quot;floatingPanelStylesheet&quot;);

// if removeCookie() function is not defined by TW core, define it here.
if (window.removeCookie===undefined) {
	window.removeCookie=function(name) {
		document.cookie = name+'=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;'; 
	}
}

config.formatters.push( {
	name: &quot;nestedSliders&quot;,
	match: &quot;\\n?\\+{3}&quot;,
	terminator: &quot;\\s*\\={3}\\n?&quot;,
	lookahead: &quot;\\n?\\+{3}(\\+)?(\\([^\\)]*\\))?(\\!*)?(\\^(?:[^\\^\\*\\@\\[\\&gt;]*\\^)?)?(\\*)?(\\@)?(?:\\{\\{([\\w]+[\\s\\w]*)\\{)?(\\[[^\\]]*\\])?(\\[[^\\]]*\\])?(?:\\}{3})?(\\#[^:]*\\:)?(\\&gt;)?(\\.\\.\\.)?\\s*&quot;,
	handler: function(w)
		{
			lookaheadRegExp = new RegExp(this.lookahead,&quot;mg&quot;);
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source)
			if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart)
			{
				var defopen=lookaheadMatch[1];
				var cookiename=lookaheadMatch[2];
				var header=lookaheadMatch[3];
				var panelwidth=lookaheadMatch[4];
				var transient=lookaheadMatch[5];
				var hover=lookaheadMatch[6];
				var buttonClass=lookaheadMatch[7];
				var label=lookaheadMatch[8];
				var openlabel=lookaheadMatch[9];
				var panelID=lookaheadMatch[10];
				var blockquote=lookaheadMatch[11];
				var deferred=lookaheadMatch[12];

				// location for rendering button and panel
				var place=w.output;

				// default to closed, no cookie, no accesskey, no alternate text/tip
				var show=&quot;none&quot;; var cookie=&quot;&quot;; var key=&quot;&quot;;
				var closedtext=&quot;&gt;&quot;; var closedtip=&quot;&quot;;
				var openedtext=&quot;&lt;&quot;; var openedtip=&quot;&quot;;

				// extra &quot;+&quot;, default to open
				if (defopen) show=&quot;block&quot;;

				// cookie, use saved open/closed state
				if (cookiename) {
					cookie=cookiename.trim().slice(1,-1);
					cookie=&quot;chkSlider&quot;+cookie;
					if (config.options[cookie]==undefined)
						{ config.options[cookie] = (show==&quot;block&quot;) }
					show=config.options[cookie]?&quot;block&quot;:&quot;none&quot;;
				}

				// parse label/tooltip/accesskey: [label=X|tooltip]
				if (label) {
					var parts=label.trim().slice(1,-1).split(&quot;|&quot;);
					closedtext=parts.shift();
					if (closedtext.substr(closedtext.length-2,1)==&quot;=&quot;)	
						{ key=closedtext.substr(closedtext.length-1,1); closedtext=closedtext.slice(0,-2); }
					openedtext=closedtext;
					if (parts.length) closedtip=openedtip=parts.join(&quot;|&quot;);
					else { closedtip=&quot;show &quot;+closedtext; openedtip=&quot;hide &quot;+closedtext; }
				}

				// parse alternate label/tooltip: [label|tooltip]
				if (openlabel) {
					var parts=openlabel.trim().slice(1,-1).split(&quot;|&quot;);
					openedtext=parts.shift();
					if (parts.length) openedtip=parts.join(&quot;|&quot;);
					else openedtip=&quot;hide &quot;+openedtext;
				}

				var title=show=='block'?openedtext:closedtext;
				var tooltip=show=='block'?openedtip:closedtip;

				// create the button
				if (header) { // use &quot;Hn&quot; header format instead of button/link
					var lvl=(header.length&gt;5)?5:header.length;
					var btn = createTiddlyElement(createTiddlyElement(place,&quot;h&quot;+lvl,null,null,null),&quot;a&quot;,null,buttonClass,title);
					btn.onclick=onClickNestedSlider;
					btn.setAttribute(&quot;href&quot;,&quot;javascript:;&quot;);
					btn.setAttribute(&quot;title&quot;,tooltip);
				}
				else
					var btn = createTiddlyButton(place,title,tooltip,onClickNestedSlider,buttonClass);
				btn.innerHTML=title; // enables use of HTML entities in label

				// set extra button attributes
				btn.setAttribute(&quot;closedtext&quot;,closedtext);
				btn.setAttribute(&quot;closedtip&quot;,closedtip);
				btn.setAttribute(&quot;openedtext&quot;,openedtext);
				btn.setAttribute(&quot;openedtip&quot;,openedtip);
				btn.sliderCookie = cookie; // save the cookiename (if any) in the button object
				btn.defOpen=defopen!=null; // save default open/closed state (boolean)
				btn.keyparam=key; // save the access key letter (&quot;&quot; if none)
				if (key.length) {
					btn.setAttribute(&quot;accessKey&quot;,key); // init access key
					btn.onfocus=function(){this.setAttribute(&quot;accessKey&quot;,this.keyparam);}; // **reclaim** access key on focus
				}
				btn.setAttribute(&quot;hover&quot;,hover?&quot;true&quot;:&quot;false&quot;);
				btn.onmouseover=function(ev) {
					// optional 'open on hover' handling
					if (this.getAttribute(&quot;hover&quot;)==&quot;true&quot; &amp;&amp; this.sliderPanel.style.display=='none') {
						document.onclick.call(document,ev); // close transients
						onClickNestedSlider(ev); // open this slider
					}
					// mouseover on button aligns floater position with button
					if (window.adjustSliderPos) window.adjustSliderPos(this.parentNode,this,this.sliderPanel);
				}

				// create slider panel
				var panelClass=panelwidth?&quot;floatingPanel&quot;:&quot;sliderPanel&quot;;
				if (panelID) panelID=panelID.slice(1,-1); // trim off delimiters
				var panel=createTiddlyElement(place,&quot;div&quot;,panelID,panelClass,null);
				panel.button = btn; // so the slider panel know which button it belongs to
				btn.sliderPanel=panel; // so the button knows which slider panel it belongs to
				panel.defaultPanelWidth=(panelwidth &amp;&amp; panelwidth.length&gt;2)?panelwidth.slice(1,-1):&quot;&quot;;
				panel.setAttribute(&quot;transient&quot;,transient==&quot;*&quot;?&quot;true&quot;:&quot;false&quot;);
				panel.style.display = show;
				panel.style.width=panel.defaultPanelWidth;
				panel.onmouseover=function(event) // mouseover on panel aligns floater position with button
					{ if (window.adjustSliderPos) window.adjustSliderPos(this.parentNode,this.button,this); }

				// render slider (or defer until shown) 
				w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
				if ((show==&quot;block&quot;)||!deferred) {
					// render now if panel is supposed to be shown or NOT deferred rendering
					w.subWikify(blockquote?createTiddlyElement(panel,&quot;blockquote&quot;):panel,this.terminator);
					// align floater position with button
					if (window.adjustSliderPos) window.adjustSliderPos(place,btn,panel);
				}
				else {
					var src = w.source.substr(w.nextMatch);
					var endpos=findMatchingDelimiter(src,&quot;+++&quot;,&quot;===&quot;);
					panel.setAttribute(&quot;raw&quot;,src.substr(0,endpos));
					panel.setAttribute(&quot;blockquote&quot;,blockquote?&quot;true&quot;:&quot;false&quot;);
					panel.setAttribute(&quot;rendered&quot;,&quot;false&quot;);
					w.nextMatch += endpos+3;
					if (w.source.substr(w.nextMatch,1)==&quot;\n&quot;) w.nextMatch++;
				}
			}
		}
	}
)

function findMatchingDelimiter(src,starttext,endtext) {
	var startpos = 0;
	var endpos = src.indexOf(endtext);
	// check for nested delimiters
	while (src.substring(startpos,endpos-1).indexOf(starttext)!=-1) {
		// count number of nested 'starts'
		var startcount=0;
		var temp = src.substring(startpos,endpos-1);
		var pos=temp.indexOf(starttext);
		while (pos!=-1)  { startcount++; pos=temp.indexOf(starttext,pos+starttext.length); }
		// set up to check for additional 'starts' after adjusting endpos
		startpos=endpos+endtext.length;
		// find endpos for corresponding number of matching 'ends'
		while (startcount &amp;&amp; endpos!=-1) {
			endpos = src.indexOf(endtext,endpos+endtext.length);
			startcount--;
		}
	}
	return (endpos==-1)?src.length:endpos;
}
//}}}
//{{{
window.onClickNestedSlider=function(e)
{
	if (!e) var e = window.event;
	var theTarget = resolveTarget(e);
	while (theTarget &amp;&amp; theTarget.sliderPanel==undefined) theTarget=theTarget.parentNode;
	if (!theTarget) return false;
	var theSlider = theTarget.sliderPanel;
	var isOpen = theSlider.style.display!=&quot;none&quot;;

	// if SHIFT-CLICK, dock panel first (see [[MoveablePanelPlugin]])
	if (e.shiftKey &amp;&amp; config.macros.moveablePanel) config.macros.moveablePanel.dock(theSlider,e);

	// toggle label
	theTarget.innerHTML=isOpen?theTarget.getAttribute(&quot;closedText&quot;):theTarget.getAttribute(&quot;openedText&quot;);
	// toggle tooltip
	theTarget.setAttribute(&quot;title&quot;,isOpen?theTarget.getAttribute(&quot;closedTip&quot;):theTarget.getAttribute(&quot;openedTip&quot;));

	// deferred rendering (if needed)
	if (theSlider.getAttribute(&quot;rendered&quot;)==&quot;false&quot;) {
		var place=theSlider;
		if (theSlider.getAttribute(&quot;blockquote&quot;)==&quot;true&quot;)
			place=createTiddlyElement(place,&quot;blockquote&quot;);
		wikify(theSlider.getAttribute(&quot;raw&quot;),place);
		theSlider.setAttribute(&quot;rendered&quot;,&quot;true&quot;);
	}

	// show/hide the slider
	if(config.options.chkAnimate &amp;&amp; (!hasClass(theSlider,'floatingPanel') || config.options.chkFloatingSlidersAnimate))
		anim.startAnimating(new Slider(theSlider,!isOpen,e.shiftKey || e.altKey,&quot;none&quot;));
	else
		theSlider.style.display = isOpen ? &quot;none&quot; : &quot;block&quot;;

	// reset to default width (might have been changed via plugin code)
	theSlider.style.width=theSlider.defaultPanelWidth;

	// align floater panel position with target button
	if (!isOpen &amp;&amp; window.adjustSliderPos) window.adjustSliderPos(theSlider.parentNode,theTarget,theSlider);

	// if showing panel, set focus to first 'focus-able' element in panel
	if (theSlider.style.display!=&quot;none&quot;) {
		var ctrls=theSlider.getElementsByTagName(&quot;*&quot;);
		for (var c=0; c&lt;ctrls.length; c++) {
			var t=ctrls[c].tagName.toLowerCase();
			if ((t==&quot;input&quot; &amp;&amp; ctrls[c].type!=&quot;hidden&quot;) || t==&quot;textarea&quot; || t==&quot;select&quot;)
				{ try{ ctrls[c].focus(); } catch(err){;} break; }
		}
	}
	var cookie=theTarget.sliderCookie;
	if (cookie &amp;&amp; cookie.length) {
		config.options[cookie]=!isOpen;
		if (config.options[cookie]!=theTarget.defOpen) window.saveOptionCookie(cookie);
		else window.removeCookie(cookie); // remove cookie if slider is in default display state
	}

	// prevent SHIFT-CLICK from being processed by browser (opens blank window... yuck!)
	// prevent clicks *within* a slider button from being processed by browser
	// but allow plain click to bubble up to page background (to close transients, if any)
	if (e.shiftKey || theTarget!=resolveTarget(e))
		{ e.cancelBubble=true; if (e.stopPropagation) e.stopPropagation(); }
	Popup.remove(); // close open popup (if any)
	return false;
}
//}}}
//{{{
// click in document background closes transient panels 
document.nestedSliders_savedOnClick=document.onclick;
document.onclick=function(ev) { if (!ev) var ev=window.event; var target=resolveTarget(ev);

	if (document.nestedSliders_savedOnClick)
		var retval=document.nestedSliders_savedOnClick.apply(this,arguments);
	// if click was inside a popup... leave transient panels alone
	var p=target; while (p) if (hasClass(p,&quot;popup&quot;)) break; else p=p.parentNode;
	if (p) return retval;
	// if click was inside transient panel (or something contained by a transient panel), leave it alone
	var p=target; while (p) {
		if ((hasClass(p,&quot;floatingPanel&quot;)||hasClass(p,&quot;sliderPanel&quot;))&amp;&amp;p.getAttribute(&quot;transient&quot;)==&quot;true&quot;) break;
		p=p.parentNode;
	}
	if (p) return retval;
	// otherwise, find and close all transient panels...
	var all=document.all?document.all:document.getElementsByTagName(&quot;DIV&quot;);
	for (var i=0; i&lt;all.length; i++) {
		 // if it is not a transient panel, or the click was on the button that opened this panel, don't close it.
		if (all[i].getAttribute(&quot;transient&quot;)!=&quot;true&quot; || all[i].button==target) continue;
		// otherwise, if the panel is currently visible, close it by clicking it's button
		if (all[i].style.display!=&quot;none&quot;) window.onClickNestedSlider({target:all[i].button})
		if (!hasClass(all[i],&quot;floatingPanel&quot;)&amp;&amp;!hasClass(all[i],&quot;sliderPanel&quot;)) all[i].style.display=&quot;none&quot;;
	}
	return retval;
};
//}}}
//{{{
// adjust floating panel position based on button position
if (window.adjustSliderPos==undefined) window.adjustSliderPos=function(place,btn,panel) {
	if (hasClass(panel,&quot;floatingPanel&quot;) &amp;&amp; !hasClass(panel,&quot;undocked&quot;)) {
		// see [[MoveablePanelPlugin]] for use of 'undocked'
		var rightEdge=document.body.offsetWidth-1;
		var panelWidth=panel.offsetWidth;
		var left=0;
		var top=btn.offsetHeight; 
		if (place.style.position==&quot;relative&quot; &amp;&amp; findPosX(btn)+panelWidth&gt;rightEdge) {
			left-=findPosX(btn)+panelWidth-rightEdge; // shift panel relative to button
			if (findPosX(btn)+left&lt;0) left=-findPosX(btn); // stay within left edge
		}
		if (place.style.position!=&quot;relative&quot;) {
			var left=findPosX(btn);
			var top=findPosY(btn)+btn.offsetHeight;
			var p=place; while (p &amp;&amp; !hasClass(p,'floatingPanel')) p=p.parentNode;
			if (p) { left-=findPosX(p); top-=findPosY(p); }
			if (left+panelWidth&gt;rightEdge) left=rightEdge-panelWidth;
			if (left&lt;0) left=0;
		}
		panel.style.left=left+&quot;px&quot;; panel.style.top=top+&quot;px&quot;;
	}
}
//}}}
//{{{
// TW2.1 and earlier:
// hijack Slider stop handler so overflow is visible after animation has completed
Slider.prototype.coreStop = Slider.prototype.stop;
Slider.prototype.stop = function()
	{ this.coreStop.apply(this,arguments); this.element.style.overflow = &quot;visible&quot;; }

// TW2.2+
// hijack Morpher stop handler so sliderPanel/floatingPanel overflow is visible after animation has completed
if (version.major+.1*version.minor+.01*version.revision&gt;=2.2) {
	Morpher.prototype.coreStop = Morpher.prototype.stop;
	Morpher.prototype.stop = function() {
		this.coreStop.apply(this,arguments);
		var e=this.element;
		if (hasClass(e,&quot;sliderPanel&quot;)||hasClass(e,&quot;floatingPanel&quot;)) {
			// adjust panel overflow and position after animation
			e.style.overflow = &quot;visible&quot;;
			if (window.adjustSliderPos) window.adjustSliderPos(e.parentNode,e.button,e);
		}
	};
}
//}}}</pre>
</div>
<div title="NestedSlidersPluginInfo" creator="RainSkylark" modifier="RainSkylark" created="201302040557" modified="201202150212" tags="excludeLists systemHint" changecount="5">
<pre>/***
|Name|NestedSlidersPluginInfo|
|Source|http://www.TiddlyTools.com/#NestedSlidersPlugin|
|Documentation|http://www.TiddlyTools.com/#NestedSlidersPluginInfo|
|Version|2.4.9|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|documentation|
|Description|documentation for NestedSlidersPlugin|
This plugin adds new wiki syntax for embedding 'slider' panels directly into tiddler content.
!!!!!Usage
&lt;&lt;&lt;
//{{{
++++(cookiename)!!!!!^width^*@{{class{[label=key|tooltip][altlabel|alttooltip]}}}#panelID:&gt;...
content goes here
===
//}}}
* ''&quot;&quot;&quot;+++&quot;&quot;&quot; (or &quot;&quot;&quot;++++&quot;&quot;&quot;) and &quot;&quot;&quot;===&quot;&quot;&quot;''&lt;br&gt;marks the start and end of the slider definition, respectively.  When the extra {{{+}}} is used, the slider will be open when initially displayed.
* ''&quot;&quot;&quot;(cookiename)&quot;&quot;&quot;''&lt;br&gt;saves the slider opened/closed state, and restores this state whenever the slider is re-rendered.
* ''&quot;&quot;&quot;! through !!!!!&quot;&quot;&quot;''&lt;br&gt;displays the slider label using a formatted headline (Hn) style instead of a button/link style
* ''&quot;&quot;&quot;^width^ (or just ^)&quot;&quot;&quot;''&lt;br&gt;makes the slider 'float' on top of other content rather than shifting that content downward.  'width' must be a valid CSS value (e.g., &quot;30em&quot;, &quot;180px&quot;, &quot;50%&quot;, etc.).  If omitted, the default width is &quot;auto&quot; (i.e., fit to content)
* ''&quot;&quot;&quot;*&quot;&quot;&quot;''&lt;br&gt;denotes &quot;transient display&quot;: when a click occurs elsewhere in the document, the slider/floating panel will be automatically closed.  This is useful for creating 'pulldown menus' that automatically go away after they are used.  //Note: using SHIFT-click on a slider label will open/close that slider without triggering the automatic closing of any transient slider panels that are currently displayed, permitting ''temporary'' display of several transient panels at once.//
* ''&quot;&quot;&quot;@&quot;&quot;&quot;''&lt;br&gt;denotes &quot;open on hover&quot;: the slider/floating panel will be automatically opened as soon as the mouse moves over the slider label, without requiring a click.
* ''&quot;&quot;&quot;{{class{[label=key|tooltip][altlabel|alttooltip]}}}&quot;&quot;&quot;''&lt;br&gt;uses label/tooltip/accesskey.  &quot;&quot;&quot;{{class{...}}}&quot;&quot;&quot;, &quot;&quot;&quot;=key&quot;&quot;&quot;, &quot;&quot;&quot;|tooltip&quot;&quot;&quot; and &quot;&quot;&quot;[altlabel|alttooltip]&quot;&quot;&quot; are optional.  'class' is any valid CSS class name, used to style the slider label text.  'key' must be a ''single letter only''.  altlabel/alttooltip specify alternative label/tooltip for use when slider/floating panel is displayed.  //Note: you can use HTML syntax within the label text to include HTML entities (e.g., {{{&amp;raquo;}}} (&amp;raquo;) or {{{&amp;#x25ba;}}} (&amp;#x25ba;), or even embedded images (e.g., {{{&lt;img src=&quot;images/eric3.gif&quot;&gt;}}}).//
* ''&quot;&quot;&quot;#panelID:&quot;&quot;&quot;''&lt;br&gt;defines a unique DOM element ID that is assigned to the panel element used to display the slider content.  This ID can then be used later to reposition the panel using the {{{&lt;&lt;DOM move id&gt;&gt;}}} macro (see [[DOMTweaksPlugin]]), or to access/modify the panel element through use of {{{document.getElementById(...)}}}) javascript code in a plugin or inline script.
* ''&quot;&quot;&quot;&gt;&quot;&quot;&quot;''&lt;br&gt;automatically adds blockquote formatting to slider content
* ''&quot;&quot;&quot;...&quot;&quot;&quot;''&lt;br&gt;defers rendering of closed sliders until the first time they are opened.
Notes:
*You can 'nest' sliders as deep as you like (see complex nesting example below), so that expandable 'tree-like' hierarchical displays can be created.
*Deferred rendering (...) can be used to offset processing overhead until actually needed. However, this may produce unexpected results in some cases.  Use with care.
* To make slider definitions easier to read and recognize when editing a tiddler, newlines immediately following the 'start slider' or preceding the 'end slider' sequences are automatically supressed so that excess whitespace is eliminated from the output.
&lt;&lt;&lt;
!!!!!Examples
&lt;&lt;&lt;
simple in-line slider: 
{{{
+++content===
}}}
+++content===
----
use a custom label and tooltip: 
{{{
+++[label|tooltip]content===
}}}
+++[label|tooltip]content===
----
content automatically blockquoted: 
{{{
+++&gt;content===
}}}
+++&gt;content===
----
all options (except cookie) //(default open, heading, sized floater, transient, open on hover, class, label/tooltip/key, blockquoted, deferred)//
{{{
++++!!!^30em^*@{{big{[label=Z|click or press Alt-Z to open]}}}&gt;...
   content
===
}}}
++++!!!^30em^*@{{big{[label=Z|click or press Alt-Z to open]}}}&gt;...
   content
===
----
complex nesting example:
{{{
+++[get info...=I|click for information or press Alt-I]
	put some general information here,
	plus a floating panel with more specific info:
	+++^10em^[view details...|click for details]
		put some detail here, which could in turn contain a transient panel,
		perhaps with a +++^25em^*[glossary definition]explaining technical terms===
	===
===
}}}
+++[get info...=I|click for information or press Alt-I]
	put some general information here,
	plus a floating panel with more specific info:
	+++^10em^[view details...|click for details]
		put some detail here, which could in turn contain a transient panel,
		perhaps with a +++^25em^*[glossary definition]explaining technical terms===
	===
===
----
embedded image as slider button
{{{
+++[&lt;img src=images/eric3.gif&gt;|click me!]&gt;
	{{big{OUCH!}}}
===
}}}
+++[&lt;img src=images/eric3.gif&gt;|click me!]&gt;
	{{big{OUCH!}}}
===
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2008.11.15 2.4.9 in adjustNestedSlider(), don't make adjustments if panel is marked as 'undocked' (CSS class).  In onClickNestedSlider(), SHIFT-CLICK docks panel (see [[MoveablePanelPlugin]])
2008.11.13 2.4.8 in document.onclick(), if transient panel is not a sliderPanel or floatingPanel, hide it via CSS
2008.10.05 2.4.7 in onClickNestedSlider(), added try/catch around focus() call to prevent IE error if input field being focused on is currently not visible.
2008.09.07 2.4.6 added removeCookie() function for compatibility with [[CookieManagerPlugin]]
2008.06.07 2.4.5 in 'onmouseover' handler for 'open on hover' slider buttons, use call() method when invoking document.onclick function (avoids error in IE)
2008.06.07 2.4.4 changed default for chkFloatingSlidersAnimate to FALSE to avoid clipping problem on some browsers (IE).  Updated Morpher hijack (again) to adjust regular sliderPanel styles as well as floatingPanel styles.
2008.05.07 2.4.3 updated Morpher hijack to adjust floatingPanel styles after animation without affecting other animated elements (i.e. popups).  Also, updated adjustSliderPos() to account for scrollwidth and use core findWindowWidth().
2008.04.02 2.4.2 in onClickNestedSlider, handle clicks on elements contained //within// slider buttons (e.g., when using HTML to display an image as a slider button).
2008.04.01 2.4.1 open on hover also triggers document.onclick to close other transient sliders
2008.04.01 2.4.0 re-introduced 'open on hover' feature using &quot;@&quot; symbol
2008.03.26 2.3.5 in document.onclick(), if click is in popup, don't dismiss transient panel (if any)
2008.01.08 [*.*.*] plugin size reduction: documentation moved to ...Info tiddler
2007.12.28 2.3.4 added hijack for Animator.prototype.startAnimating().  Previously, the plugin code simply set the overflow to &quot;visible&quot; after animation.  This code tweak corrects handling of elements that were styled with overflow=hidden/auto/scroll before animation by saving the overflow style and then restoring it after animation has completed.
2007.12.17 2.3.3 use hasClass() instead of direct comparison to test for &quot;floatingPanel&quot; class.  Allows floating panels to have additional classes assigned to them (i.e., by AnimationEffectsPlugin).
2007.11.14 2.3.2 in onClickNestedSlider(), prevent SHIFT-click events from opening a new, empty browser window by setting &quot;cancelBubble=true&quot; and calling &quot;stopPropagation()&quot;.  Note: SHIFT-click is still processed as a normal click (i.e., it toggles the slider panel display).  Also, using SHIFT-click will prevent 'transient' sliders from being automatically closed when another slider is opened, allowing you to *temporarily* display several transient sliders at once.
2007.07.26 2.3.1 in document.onclick(), propagate return value from hijacked core click handler to consume OR bubble up click as needed.  Fixes &quot;IE click disease&quot;, whereby nearly every mouse click causes a page transition.
2007.07.20 2.3.0 added syntax for setting panel ID (#panelID:).  This allows individual slider panels to be repositioned within tiddler content simply by giving them a unique ID and then moving them to the desired location using the {{{&lt;&lt;DOM move id&gt;&gt;}}} macro.
2007.07.19 2.2.0 added syntax for alttext and alttip (button label and tooltip to be displayed when panel is open)
2007.07.14 2.1.2 corrected use of 'transient' attribute in IE to prevent (non-recursive) infinite loop
2007.07.12 2.1.0 replaced use of &quot;*&quot; for 'open/close on rollover' (which didn't work too well).  &quot;*&quot; now indicates 'transient' panels that are automatically closed if a click occurs somewhere else in the document.  This permits use of nested sliders to create nested &quot;pulldown menus&quot; that automatically disappear after interaction with them has been completed.  Also, in onClickNestedSlider(), use &quot;theTarget.sliderCookie&quot;, instead of &quot;this.sliderCookie&quot; to correct cookie state tracking when automatically dismissing transient panels.
2007.06.10 2.0.5 add check to ensure that window.adjustSliderPanel() is defined before calling it (prevents error on shutdown when mouse event handlers are still defined)
2007.05.31 2.0.4 add handling to invoke adjustSliderPanel() for onmouseover events on slider button and panel.  This allows the panel position to be re-synced when the button position shifts due to changes in unrelated content above it on the page.  (thanks to Harsha for bug report)
2007.03.30 2.0.3 added chkFloatingSlidersAnimate (default to FALSE), so that slider animation can be disabled independent of the overall document animation setting (avoids strange rendering and focus problems in floating panels)
2007.03.01 2.0.2 for TW2.2+, hijack Morpher.prototype.stop so that &quot;overflow:hidden&quot; can be reset to &quot;overflow:visible&quot; after animation ends
2007.03.01 2.0.1 in hijack for Slider.prototype.stop, use apply() to pass params to core function
2006.07.28 2.0.0 added custom class syntax around label/tip/key syntax: {{{{{classname{[label=key|tip]}}}}}}
2006.07.25 1.9.3 when parsing slider, save default open/closed state in button element, then in onClickNestedSlider(), if slider state matches saved default, instead of saving cookie, delete it.  Significantly reduces the 'cookie overhead' when default slider states are used.
2006.06.29 1.9.2 in onClickNestedSlider(), when setting focus to first control, skip over type=&quot;hidden&quot;
2006.06.22 1.9.1 added panel.defaultPanelWidth to save requested panel width, even after resizing has changed the style value
2006.05.11 1.9.0 added optional '^width^' syntax for floating sliders and '=key' syntax for setting an access key on a slider label
2006.05.09 1.8.0 in onClickNestedSlider(), when showing panel, set focus to first child input/textarea/select element
2006.04.24 1.7.8 in adjustSliderPos(), if floating panel is contained inside another floating panel, subtract offset of containing panel to find correct position
2006.02.16 1.7.7 corrected deferred rendering to account for use-case where show/hide state is tracked in a cookie
2006.02.15 1.7.6 in adjustSliderPos(), ensure that floating panel is positioned completely within the browser window (i.e., does not go beyond the right edge of the browser window)
2006.02.04 1.7.5 add 'var' to unintended global variable declarations to avoid FireFox 1.5.0.1 crash bug when assigning to globals
2006.01.18 1.7.4 only define adjustSliderPos() function if it has not already been provided by another plugin.  This lets other plugins 'hijack' the function even when they are loaded first.
2006.01.16 1.7.3 added adjustSliderPos(place,btn,panel,panelClass) function to permit specialized logic for placement of floating panels.  While it provides improved placement for many uses of floating panels, it exhibits a relative offset positioning error when used within *nested* floating panels.  Short-term workaround is to only adjust the position for 'top-level' floaters.
2006.01.16 1.7.2 added button property to slider panel elements so that slider panel can tell which button it belongs to.  Also, re-activated and corrected animation handling so that nested sliders aren't clipped by hijacking Slider.prototype.stop so that &quot;overflow:hidden&quot; can be reset to &quot;overflow:visible&quot; after animation ends
2006.01.14 1.7.1 added optional &quot;^&quot; syntax for floating panels.  Defines new CSS class, &quot;.floatingPanel&quot;, as an alternative for standard in-line &quot;.sliderPanel&quot; styles.
2006.01.14 1.7.0 added optional &quot;*&quot; syntax for rollover handling to show/hide slider without requiring a click (Based on a suggestion by tw4efl)
2006.01.03 1.6.2 When using optional &quot;!&quot; heading style, instead of creating a clickable &quot;Hn&quot; element, create an &quot;A&quot; element inside the &quot;Hn&quot; element.  (allows click-through in SlideShowPlugin, which captures nearly all click events, except for hyperlinks)
2005.12.15 1.6.1 added optional &quot;...&quot; syntax to invoke deferred ('lazy') rendering for initially hidden sliders
removed checkbox option for 'global' application of lazy sliders
2005.11.25 1.6.0 added optional handling for 'lazy sliders' (deferred rendering for initially hidden sliders)
2005.11.21 1.5.1 revised regular expressions: if present, a single newline //preceding// and/or //following// a slider definition will be suppressed so start/end syntax can be place on separate lines in the tiddler 'source' for improved readability.  Similarly, any whitespace (newlines, tabs, spaces, etc.) trailing the 'start slider' syntax or preceding the 'end slider' syntax is also suppressed.
2005.11.20 1.5.0 added (cookiename) syntax for optional tracking and restoring of slider open/close state
2005.11.11 1.4.0 added !!!!! syntax to render slider label as a header (Hn) style instead of a button/link style
2005.11.07 1.3.0 removed alternative syntax {{{(((}}} and {{{)))}}} (so they can be used by other formatting extensions) and simplified/improved regular expressions to trim multiple excess newlines
2005.11.05 1.2.1 changed name to NestedSlidersPlugin
2005.11.04 1.2.0 added alternative character-mode syntax {{{(((}}} and {{{)))}}}
tweaked &quot;eat newlines&quot; logic for line-mode {{{+++}}} and {{{===}}} syntax
2005.11.03 1.1.1 fixed toggling of default tooltips (&quot;more...&quot; and &quot;less...&quot;) when a non-default button label is used.  code cleanup, added documentation
2005.11.03 1.1.0 changed delimiter syntax from {{{(((}}} and {{{)))}}} to {{{+++}}} and {{{===}}}.  changed name to EasySlidersPlugin
2005.11.03 1.0.0 initial public release
&lt;&lt;&lt;</pre>
</div>
<div title="New Tiddler (1)" creator="OldYaga" modifier="OldYaga" created="201702222043" changecount="1">
<pre>Type the text for 'New Tiddler (1)'</pre>
</div>
<div title="NewMeansNewPlugin" creator="RainSkylark" modifier="RainSkylark" created="201301251155" modified="201202150231" tags="systemConfig excludeLists" changecount="3">
<pre>/***
|Name:|NewMeansNewPlugin|
|Description:|If 'New Tiddler' already exists then create 'New Tiddler (1)' and so on|
|Version:|1.1.1a|
|Date:|27-Jun-2011|
|Source:|http://mptw.tiddlyspot.com/empty.html#NewMeansNewPlugin|
|Author:|Simon Baird &lt;simon.baird@gmail.com&gt;|
|License|http://mptw.tiddlyspot.com/#TheBSDLicense|
!!Note: I think this should be in the core
***/
//{{{

// change this or set config.newMeansNewForJournalsToo it in MptwUuserConfigPlugin
if (config.newMeansNewForJournalsToo == undefined) config.newMeansNewForJournalsToo = true;

String.prototype.getNextFreeName = function() {
  numberRegExp = / \(([0-9]+)\)$/;
  var match = numberRegExp.exec(this);
  if (match) {
  var num = parseInt(match[1]) + 1;
    return this.replace(numberRegExp,&quot; (&quot;+num+&quot;)&quot;);
  }
  else {
    return this + &quot; (1)&quot;;
  }
}

config.macros.newTiddler.checkForUnsaved = function(newName) {
  var r = false;
  story.forEachTiddler(function(title,element) {
    if (title == newName)
      r = true;
  });
  return r;
}

config.macros.newTiddler.getName = function(newName) {
  while (store.getTiddler(newName) || config.macros.newTiddler.checkForUnsaved(newName))
    newName = newName.getNextFreeName();
  return newName;
}


config.macros.newTiddler.onClickNewTiddler = function()
{
  var title = this.getAttribute(&quot;newTitle&quot;);
  if(this.getAttribute(&quot;isJournal&quot;) == &quot;true&quot;) {
    title = new Date().formatString(title.trim());
  }

  // ---- these three lines should be the only difference between this and the core onClickNewTiddler
  if (config.newMeansNewForJournalsToo || this.getAttribute(&quot;isJournal&quot;) != &quot;true&quot;)
    title = config.macros.newTiddler.getName(title);

  var params = this.getAttribute(&quot;params&quot;);
  var tags = params ? params.split(&quot;|&quot;) : [];
  var focus = this.getAttribute(&quot;newFocus&quot;);
  var template = this.getAttribute(&quot;newTemplate&quot;);
  var customFields = this.getAttribute(&quot;customFields&quot;);
  if(!customFields &amp;&amp; !store.isShadowTiddler(title))
    customFields = String.encodeHashMap(config.defaultCustomFields);
  story.displayTiddler(null,title,template,false,null,null);
  var tiddlerElem = story.getTiddler(title);
  if(customFields)
    story.addCustomFields(tiddlerElem,customFields);
  var text = this.getAttribute(&quot;newText&quot;);
  if(typeof text == &quot;string&quot;)
    story.getTiddlerField(title,&quot;text&quot;).value = text.format([title]);
  for(var t=0;t&lt;tags.length;t++)
    story.setTiddlerTag(title,tags[t],+1);
  story.focusTiddler(title,focus);
  return false;
};

//}}}
</pre>
</div>
<div title="POWER CELLS" creator="OldYaga" modifier="OldYaga" created="201702251133" tags="Правила" changecount="1">
<pre>AA cell: These tiny cells operate devices with minimal power requirements, like very small robots or brain implants. $1, 0.0005 lbs. (2,000 AA cells weigh 1 lb.)

A cell: These small cells are often used in clothing or consumer goods that require low power outputs. They’re about the size of a watch battery, or postage stamp-sized for flexible cells (see below). $2, 0.005 lbs. (200 A cells weigh 1 lb.)

B cell: These power wearable computers, tiny radios, small tools, and other devices with modest power requirements, including some low-powered weapons. A typical B cell is the same size as a pistol cartridge or an AA battery. $3, 0.05 lbs.

C cell: These are the most common energy source for personal beam weapons, tools and high-power electronics. Equipment designed for larger or smaller cells often has an adapter for C-cell operation. An ultra-tech battlefield may be littered with expended C cells. Each cell is about the same size as a pistol magazine. $10, 0.5 lbs.

D cell: These power military beam weapons and heavy equipment. They are often worn as a separate power pack. They’re about the size of a thick paperback book. $100, 5 lbs. LC4.

E cell: These power small vehicles, battlesuits, support weapons and other power-intensive systems. They’re about the size of a backpack. $2,000, 20 lbs. LC4.

F cell: These power medium or large vehicles and cannon-sized beam weapons. They’re about the size of a compact car engine. $20,000, 200 lbs. LC4.</pre>
</div>
<div title="PageTemplate" creator="OldYaga" modifier="OldYaga" created="201702211606" modified="201702211607" changecount="2">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' role='banner' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' role='navigation' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' role='navigation' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' role='complementary' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea' role='main'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlersBar' refresh='content' ondblclick='config.macros.tiddlersBar.onTiddlersBarAction(event)'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="PeriodicTable" creator="KarelWintersky" modifier="KarelWintersky" created="201506280607" tags="systemHint excludeLists" changecount="1">
<pre>|Standard Periodic Table (ref. Wikipedia)|c
|| !1 | !2 |!| !3 | !4 | !5 | !6 | !7 | !8 | !9 | !10 | !11 | !12 | !13 | !14 | !15 | !16 | !17 | !18 |
|!1|bgcolor(#a0ffa0): @@color(red):H@@ |&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;||bgcolor(#c0ffff): @@color(red):He@@ |
|!2|bgcolor(#ff6666): Li |bgcolor(#ffdead): Be |&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;||bgcolor(#cccc99): B |bgcolor(#a0ffa0): C |bgcolor(#a0ffa0): @@color(red):N@@ |bgcolor(#a0ffa0): @@color(red):O@@ |bgcolor(#ffff99): @@color(red):F@@ |bgcolor(#c0ffff): @@color(red):Ne@@ |
|!3|bgcolor(#ff6666): Na |bgcolor(#ffdead): Mg |&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;||bgcolor(#cccccc): Al |bgcolor(#cccc99): Si |bgcolor(#a0ffa0): P |bgcolor(#a0ffa0): S |bgcolor(#ffff99): @@color(red):Cl@@ |bgcolor(#c0ffff): @@color(red):Ar@@ |
|!4|bgcolor(#ff6666): K |bgcolor(#ffdead): Ca ||bgcolor(#ffc0c0): Sc |bgcolor(#ffc0c0): Ti |bgcolor(#ffc0c0): V |bgcolor(#ffc0c0): Cr |bgcolor(#ffc0c0): Mn |bgcolor(#ffc0c0): Fe |bgcolor(#ffc0c0): Co |bgcolor(#ffc0c0): Ni |bgcolor(#ffc0c0): Cu |bgcolor(#ffc0c0): Zn |bgcolor(#cccccc): Ga |bgcolor(#cccc99): Ge |bgcolor(#cccc99): As |bgcolor(#a0ffa0): Se |bgcolor(#ffff99): @@color(green):Br@@ |bgcolor(#c0ffff): @@color(red):Kr@@ |
|!5|bgcolor(#ff6666): Rb |bgcolor(#ffdead): Sr ||bgcolor(#ffc0c0): Y |bgcolor(#ffc0c0): Zr |bgcolor(#ffc0c0): Nb |bgcolor(#ffc0c0): Mo |bgcolor(#ffc0c0): Tc |bgcolor(#ffc0c0): Ru |bgcolor(#ffc0c0): Rh |bgcolor(#ffc0c0): Pd |bgcolor(#ffc0c0): Ag |bgcolor(#ffc0c0): Cd |bgcolor(#cccccc): In |bgcolor(#cccccc): Sn |bgcolor(#cccc99): Sb |bgcolor(#cccc99): Te |bgcolor(#ffff99): I |bgcolor(#c0ffff): @@color(red):Xe@@ |
|!6|bgcolor(#ff6666): Cs |bgcolor(#ffdead): Ba |bgcolor(#ffbfff):^^*1^^|bgcolor(#ffc0c0): Lu |bgcolor(#ffc0c0): Hf |bgcolor(#ffc0c0): Ta |bgcolor(#ffc0c0): W |bgcolor(#ffc0c0): Re |bgcolor(#ffc0c0): Os |bgcolor(#ffc0c0): Ir |bgcolor(#ffc0c0): Pt |bgcolor(#ffc0c0): Au |bgcolor(#ffc0c0): @@color(green):Hg@@ |bgcolor(#cccccc): Tl |bgcolor(#cccccc): Pb |bgcolor(#cccccc): Bi |bgcolor(#cccc99): Po |bgcolor(#ffff99): At |bgcolor(#c0ffff): @@color(red):Rn@@ |
|!7|bgcolor(#ff6666): Fr |bgcolor(#ffdead): Ra |bgcolor(#ff99cc):^^*2^^|bgcolor(#ffc0c0): Lr |bgcolor(#ffc0c0): Rf |bgcolor(#ffc0c0): Db |bgcolor(#ffc0c0): Sq |bgcolor(#ffc0c0): Bh |bgcolor(#ffc0c0): Hs |bgcolor(#ffc0c0): Mt |bgcolor(#ffc0c0): Ds |bgcolor(#ffc0c0): Rg |bgcolor(#ffc0c0): @@color(green):Uub@@ |bgcolor(#cccccc): Uut |bgcolor(#cccccc): Uuq |bgcolor(#cccccc): Uup |bgcolor(#cccccc): Uuh |bgcolor(#fcfecc): @@color(#cccccc):Uus@@ |bgcolor(#ecfefc): @@color(#cccccc):Uuo@@ |

| !Lanthanides^^*1^^|bgcolor(#ffbfff): La |bgcolor(#ffbfff): Ce |bgcolor(#ffbfff): Pr |bgcolor(#ffbfff): Nd |bgcolor(#ffbfff): Pm |bgcolor(#ffbfff): Sm |bgcolor(#ffbfff): Eu |bgcolor(#ffbfff): Gd |bgcolor(#ffbfff): Tb |bgcolor(#ffbfff): Dy |bgcolor(#ffbfff): Ho |bgcolor(#ffbfff): Er |bgcolor(#ffbfff): Tm |bgcolor(#ffbfff): Yb |
| !Actinides^^*2^^|bgcolor(#ff99cc): Ac |bgcolor(#ff99cc): Th |bgcolor(#ff99cc): Pa |bgcolor(#ff99cc): U |bgcolor(#ff99cc): Np |bgcolor(#ff99cc): Pu |bgcolor(#ff99cc): Am |bgcolor(#ff99cc): Cm |bgcolor(#ff99cc): Bk |bgcolor(#ff99cc): Cf |bgcolor(#ff99cc): Es |bgcolor(#ff99cc): Fm |bgcolor(#ff99cc): Md |bgcolor(#ff99cc): No |

*Chemical Series of the Periodic Table
**@@bgcolor(#ff6666): Alkali metals@@
**@@bgcolor(#ffdead): Alkaline earth metals@@
**@@bgcolor(#ffbfff): Lanthanides@@
**@@bgcolor(#ff99cc): Actinides@@
**@@bgcolor(#ffc0c0): Transition metals@@
**@@bgcolor(#cccccc): Poor metals@@
**@@bgcolor(#cccc99): Metalloids@@
**@@bgcolor(#a0ffa0): Nonmetals@@
**@@bgcolor(#ffff99): Halogens@@
**@@bgcolor(#c0ffff): Noble gases@@

*State at standard temperature and pressure
**those in @@color(red):red@@ are gases
**those in @@color(green):green@@ are liquids
**those in black are solids</pre>
</div>
<div title="RussianTextFormattingPlugin" creator="RainSkylark" modifier="RainSkylark" created="201302150118" modified="201202150212" tags="systemConfig excludeLists" changecount="3">
<pre>/***
|''Name:''|RussianTextFormattingPlugin|
|''Version:''|1.1 (11-Jan-2012)|
|''Author:''|KarelWintersky|
|''Type:''|Patch|
!Description
* Add more useful custom formatter for russian users : {{{ ++ someting ++ }}}   for ++bold++.
* Also, imports formatting from [[LegacyStrikeThroughPlugin|http://www.tiddlywiki.com/#LegacyStrikeThroughPlugin]] - support for legacy (pre 2.1) strike through formatting.
* And so on

!Revision History
1.1 (11-Jan-2013) by KarelWintersky
1.2 (17-Jan-2013) by KarelWintersky - check for installed once
1.3 (15-Feb-2013) by KarelWintersky - more formatting options
@@todo:@@ disable LegacyStrikeThroughPlugin if installed.

!Code
***/
//{{{
// Ensure that the RussianBoldText Plugin is only installed once.
if(!version.extensions.RussianTextFormattingPlugin) 
{
  version.extensions.RussianTextFormattingPlugin = {installed:true};
  config.formatters.push(
    {
	name: &quot;boldByCharRU&quot;,
	match: &quot;\\+\\+&quot;,
	handler: function(w)
	{
	  w.subWikifyTerm(w.output.appendChild(document.createElement(&quot;strong&quot;)),/(\+\+)/mg);
	}
    } );
  // LegacyStrikeThroughPlugin
  config.formatters.push(
    {
        name: &quot;legacyStrikeByChar&quot;,
	match: &quot;==&quot;,
	termRegExp: /(==)/mg,
	element: &quot;strike&quot;,
	handler: config.formatterHelpers.createElementAndWikify
    } );

} //# end of &quot;install only once&quot;

//}}}</pre>
</div>
<div title="SectionMacro" creator="RainSkylark" modifier="RainSkylark" created="201301171158" modified="201202150258" tags="systemConfig excludeLists" changecount="4">
<pre>/***
|''Name:''|~SectionMacro|
|''Version:''|0.9.4 (20-Apr-2007)|
|''Author:''|[[Jack]]|
|''Type:''|Macro|
!Description
Allows you to create collapsable sections just like the slider macro but without needing to create new tiddlers for these sections.
!Usage
{{{&lt;&lt;section Title Tiddler Text goes here...
and can be multi-
line and include {${${monospace text}$}$}.
&gt;&gt;}}}
&lt;&lt;section Title Tiddler Text goes here...
and can be multi-
line and include {${${monospace text}$}$}.
&gt;&gt;
!Revision History
* Original by [[Jack]] 0.9
* Nested sliders and cookie persistence 0.9.1
* Removed crappy cookie persistance 0.9.2
* Bug-fix with quoted 2st parameter (thanks M. Macolio) 0.9.3
* Bug-fix with monospace text (thanks M. Macolio) 0.9.4
!Code
***/
//{{{
version.extensions.section = {major: 0, minor: 9, revision: 4, date: new Date(&quot;Apr 20, 2007&quot;)};

config.macros.section = {count:0,display:'none'};
config.macros.section.handler = function(place,macroName,params,wikifier,paramString,tiddler) {
 this.slider(place,&quot;chkSection&quot; + this.count++,paramString.substr(params[0].length+(paramString.substr(params[0].length+1,1).match(/['&quot;]/)?2:1)).replace(/\$\&gt;/g, '&gt;').replace(/}\$}\$}/, '}}}').replace(/{\${\${/, '{{{'),params[0], &quot;tooltip&quot;);
}

config.macros.section.slider = function(place,cookie,text,title,tooltips) {
 var btn = createTiddlyButton(place,title,tooltips,config.macros.slider.onClickSlider,&quot;tiddlyLink tiddlyLinkExisting&quot;); 
 var panel = createTiddlyElement(place,&quot;div&quot;,null,&quot;timelineSliderPanel&quot;,null);
 panel.setAttribute(&quot;cookie&quot;,cookie);
 panel.style.display = config.options[cookie] ? &quot;block&quot; : &quot;none&quot;;
 panel.style.display=this.display;
 if(text) wikify(text,panel);
};
//}}}</pre>
</div>
<div title="SideBarOptions" creator="OldYaga" modifier="OldYaga" created="201702222042" modified="201702222058" changecount="11">
<pre>&lt;&lt;search&gt;&gt;&lt;&lt;closeAll&gt;&gt;&lt;&lt;permaview&gt;&gt;&lt;&lt;newTiddler&gt;&gt;&lt;&lt;newJournal &quot;DD MMM YYYY&quot; &quot;journal&quot;&gt;&gt;&lt;&lt;saveChanges&gt;&gt;&lt;&lt;slider chkSliderOptionsPanel OptionsPanel &quot;options »&quot; &quot;Change TiddlyWiki advanced options&quot;&gt;&gt;</pre>
</div>
<div title="SinglePageModePlugin" creator="RainSkylark" modifier="RainSkylark" created="201301171158" modified="201202150300" tags="systemConfig excludeLists" changecount="3">
<pre>/***
|''Name:''|SinglePageModePlugin|
|''Description:''| ? |
|''Version:''|2.1.1|
|''Date:''|Feb 21,2006|
|''Source:''|? |
|''Author:''|? |
|''License:''|? |
|''~CoreVersion:''|2.1.0|
***/
//{{{
version.extensions.SinglePageMode= {major: 2, minor: 1, revision: 1, date: new Date(2006,2,4)};

if (config.options.chkSinglePageMode==undefined)
 config.options.chkSinglePageMode=false;

config.shadowTiddlers.AdvancedOptions
 += &quot;\n&lt;&lt;option chkSinglePageMode&gt;&gt; Display one tiddler at a time&quot;;

config.SPMTimer = 0;
config.lastURL = window.location.hash;
function checkLastURL()
{
 if (!config.options.chkSinglePageMode)
 { window.clearInterval(config.SPMTimer); config.SPMTimer=0; return; }
 if (config.lastURL == window.location.hash)
 return;
 var tiddlerName = convertUTF8ToUnicode(decodeURI(window.location.hash.substr(1)));
 tiddlerName=tiddlerName.replace(/\[\[/,&quot;&quot;).replace(/\]\]/,&quot;&quot;); // strip any [[ ]] bracketing
 if (tiddlerName.length) story.displayTiddler(null,tiddlerName,1,null,null);
}

Story.prototype.coreDisplayTiddler=Story.prototype.displayTiddler;
Story.prototype.displayTiddler = function(srcElement,title,template,animate,slowly)
{
 if (config.options.chkSinglePageMode) {
 window.location.hash = encodeURIComponent(String.encodeTiddlyLink(title));
 config.lastURL = window.location.hash;
 document.title = wikifyPlain(&quot;SiteTitle&quot;) + &quot; - &quot; + title;
 story.closeAllTiddlers();
 if (!config.SPMTimer) config.SPMTimer=window.setInterval(function() {checkLastURL();},1000);
 }
 this.coreDisplayTiddler(srcElement,title,template,animate,slowly)
}

Story.prototype.coreDisplayTiddlers=Story.prototype.displayTiddlers;
Story.prototype.displayTiddlers = function(srcElement,titles,template,unused1,unused2,animate,slowly)
{
 // suspend single-page mode when displaying multiple tiddlers
 var save=config.options.chkSinglePageMode;
 config.options.chkSinglePageMode=false;
 this.coreDisplayTiddlers(srcElement,titles,template,unused1,unused2,animate,slowly);
 config.options.chkSinglePageMode=save;
}
//}}}</pre>
</div>
<div title="SiteSubtitle" creator="RainSkylark" modifier="OldYaga" created="201301251454" modified="201702212055" tags="excludeLists" changecount="6">
<pre>с вами с 3774 года</pre>
</div>
<div title="SiteTitle" creator="RainSkylark" modifier="OldYaga" created="201301251454" modified="201702211448" tags="excludeLists" changecount="5">
<pre>Atlas</pre>
</div>
<div title="StyleSheet" creator="RainSkylark" modifier="RainSkylark" created="201301171208" modified="201312030617" tags="excludeLists" changecount="7">
<pre>/*{{{*/
/* border around each tiddler */
.tiddler {
	padding: 1em;
	margin: 1em 0;
	border: 1px solid #ccc;
}
/* make it print a little cleaner */
@media print {
	#topMenu {
		display: none ! important;
	}
        #mainMenu {
                display: none ! important;
        }
        #sidebar {
                display: none ! important;
        }
        #toolbar {
                display: none ! important;
        }
        #messageArea {
                display: none ! important;
        }
        .header {
                display: none ! important;
        }
        .tiddler .subtitle {
                display: none ! important;
        }
        .tiddler .toolbar {
                display: none ! important;
        }
        .tiddler .tagging {
                display: none ! important;
        }
        .tiddler .tagged {
                display: none ! important;
        }

	/* not sure if we need all the importants */
	.tiddler {
		border-style: none ! important;
		margin:0px ! important;
		padding:0px ! important;
		padding-bottom:2em ! important;
	}
	.headerShadow {
		visibility: hidden ! important;
	}
}
/* Monospaced font in editor area */
.editor textarea, .editor input {
	font-family: 'Consolas', monospace;
	background-color:[[ColorPalette::TertiaryPale]];
}
h1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;color: green;}

.wrappingClass {color: #666; background: #bbb;}
.firstletter{ float:left; width:0.75em; font-size:400%; font-family:times,arial; line-height:60%; }
.textleft {text-align:left;}
.textright {text-align:right;}
.textcenter {text-align:center;}
.textjustify {text-align:justify;}
.textindent25 {text-indent:25px;}
/*}}}*/</pre>
</div>
<div title="TableSortingPlugin" creator="RainSkylark" modifier="RainSkylark" created="201301171336" modified="201312030617" tags="excludeLists systemConfig" changecount="6">
<pre>/***
|''Name:''|TableSortingPlugin|
|''Description:''|Dynamically sort tables by clicking on column headers|
|''Author:''|Saq Imtiaz ( lewcid@gmail.com )|
|''Source:''|http://tw.lewcid.org/#TableSortingPlugin|
|''Code Repository:''|http://tw.lewcid.org/svn/plugins|
|''Version:''|2.02|
|''Date:''|25-01-2008|
|''License:''|[[Creative Commons Attribution-ShareAlike 3.0 License|http://creativecommons.org/licenses/by-sa/3.0/]]|
|''~CoreVersion:''|2.2.3|
!!Usage:
* Make sure your table has a header row
** {{{|Name|Phone Number|Address|h}}}&lt;br&gt; Note the /h/ that denote a header row 
* Give the table a class of 'sortable'
** {{{
|sortable|k
|Name|Phone Number|Address|h
}}}&lt;br&gt;Note the /k/ that denotes a class name being assigned to the table.
* To disallow sorting by a column, place {{{&lt;&lt;nosort&gt;&gt;}}} in it's header
* To automatically sort a table by a column, place {{{&lt;&lt;autosort&gt;&gt;}}} in the header for that column
** Or to sort automatically but in reverse order, use {{{&lt;&lt;autosort reverse&gt;&gt;}}}

!!Example:
|sortable|k
|Name |Salary |Extension |Performance |File Size |Start date |h
|ZBloggs, Fred |$12000.00 |1353 |+1.2 |74.2Kb |Aug 19, 2003 21:34:00 |
|ABloggs, Fred |$12000.00 |1353 |1.2 |3350b |09/18/2003 |
|CBloggs, Fred |$12000 |1353 |1.200 |55.2Kb |August 18, 2003 |
|DBloggs, Fred |$12000.00 |1353 |1.2 |2100b |07/18/2003 |
|Bloggs, Fred |$12000.00 |1353 |01.20 |6.156Mb |08/17/2003 05:43 |
|Turvey, Kevin |$191200.00 |2342 |-33 |1b |02/05/1979 |
|Mbogo, Arnold |$32010.12 |2755 |-21.673 |1.2Gb |09/08/1998 |
|Shakespeare, Bill |£122000.00|3211 |6 |33.22Gb |12/11/1961 |
|Shakespeare, Hamlet |£9000 |9005 |-8 |3Gb |01/01/2002 |
|Fitz, Marvin |€3300.30 |5554 |+5 |4Kb |05/22/1995 |

***/
// /%
//!BEGIN-PLUGIN-CODE
config.tableSorting = {
	
	darrow: &quot;\u2193&quot;,
	
	uarrow: &quot;\u2191&quot;,
	
	getText : function (o) {
		var p = o.cells[SORT_INDEX];
		return p.innerText || p.textContent || '';
	},
	
	sortTable : function (o,rev) {
		SORT_INDEX = o.getAttribute(&quot;index&quot;);
		var c = config.tableSorting;
		var T = findRelated(o.parentNode,&quot;TABLE&quot;);
		if(T.tBodies[0].rows.length&lt;=1) 
			return;
		var itm = &quot;&quot;;
		var i = 0;
		while (itm == &quot;&quot; &amp;&amp; i &lt; T.tBodies[0].rows.length) {
			itm = c.getText(T.tBodies[0].rows[i]).trim();
			i++;
		}
		if (itm == &quot;&quot;) 
			return; 	
		var r = [];
		var S = o.getElementsByTagName(&quot;span&quot;)[0];		
		c.fn = c.sortAlpha; 
		if(!isNaN(Date.parse(itm)))
			c.fn = c.sortDate; 
		else if(itm.match(/^[$|£|€|\+|\-]{0,1}\d*\.{0,1}\d+$/)) 
			c.fn = c.sortNumber; 
		else if(itm.match(/^\d*\.{0,1}\d+[K|M|G]{0,1}b$/)) 
			c.fn = c.sortFile; 
		for(i=0; i&lt;T.tBodies[0].rows.length; i++) {
			 r[i]=T.tBodies[0].rows[i]; 
		} 
		r.sort(c.reSort);
		if(S.firstChild.nodeValue==c.darrow || rev) {
			r.reverse();
			S.firstChild.nodeValue=c.uarrow;
		} 
		else 
			S.firstChild.nodeValue=c.darrow;
		var thead = T.getElementsByTagName('thead')[0]; 
		var headers = thead.rows[thead.rows.length-1].cells;
		for(var k=0; k&lt;headers.length; k++) {
			if(!hasClass(headers[k],&quot;nosort&quot;))
				addClass(headers[k].getElementsByTagName(&quot;span&quot;)[0],&quot;hidden&quot;);
		}
		removeClass(S,&quot;hidden&quot;);
		for(i=0; i&lt;r.length; i++) { 
			T.tBodies[0].appendChild(r[i]);
			c.stripe(r[i],i);
			for(var j=0; j&lt;r[i].cells.length;j++){
				removeClass(r[i].cells[j],&quot;sortedCol&quot;);
			}
			addClass(r[i].cells[SORT_INDEX],&quot;sortedCol&quot;);
		}
	},
	
	stripe : function (e,i){
		var cl = [&quot;oddRow&quot;,&quot;evenRow&quot;];
		i&amp;1? cl.reverse() : cl;
		removeClass(e,cl[1]);
		addClass(e,cl[0]);
	},
	
	sortNumber : function(v) {
		var x = parseFloat(this.getText(v).replace(/[^0-9.-]/g,''));
		return isNaN(x)? 0: x;
	},
	
	sortDate : function(v) {
		return Date.parse(this.getText(v));
	},

	sortAlpha : function(v) {
		return this.getText(v).toLowerCase();
	},
	
	sortFile : function(v) { 		
		var j, q = config.messages.sizeTemplates, s = this.getText(v);
		for (var i=0; i&lt;q.length; i++) {
			if ((j = s.toLowerCase().indexOf(q[i].template.replace(&quot;%0\u00a0&quot;,&quot;&quot;).toLowerCase())) != -1)
				return q[i].unit * s.substr(0,j);
		}
		return parseFloat(s);
	},
	
	reSort : function(a,b){
		var c = config.tableSorting;
		var aa = c.fn(a);
		var bb = c.fn(b);
		return ((aa==bb)? 0 : ((aa&lt;bb)? -1:1));
	}
};

Story.prototype.tSort_refreshTiddler = Story.prototype.refreshTiddler;
Story.prototype.refreshTiddler = function(title,template,force,customFields,defaultText){
	var elem = this.tSort_refreshTiddler.apply(this,arguments);
	if(elem){
		var tables = elem.getElementsByTagName(&quot;TABLE&quot;);
		var c = config.tableSorting;
		for(var i=0; i&lt;tables.length; i++){
			if(hasClass(tables[i],&quot;sortable&quot;)){
				var x = null, rev, table = tables[i], thead = table.getElementsByTagName('thead')[0], headers = thead.rows[thead.rows.length-1].cells;
				for (var j=0; j&lt;headers.length; j++){
					var h = headers[j];
					if (hasClass(h,&quot;nosort&quot;))
						continue;
					h.setAttribute(&quot;index&quot;,j);
					h.onclick = function(){c.sortTable(this); return false;};
					h.ondblclick = stopEvent;
					if(h.getElementsByTagName(&quot;span&quot;).length == 0)
						createTiddlyElement(h,&quot;span&quot;,null,&quot;hidden&quot;,c.uarrow); 
					if(!x &amp;&amp; hasClass(h,&quot;autosort&quot;)) {
						x = j;
						rev = hasClass(h,&quot;reverse&quot;);
					}
				}
				if(x)
					c.sortTable(headers[x],rev);		
			}
		}
	}
	return elem; 
};

setStylesheet(&quot;table.sortable span.hidden {visibility:hidden;}\n&quot;+
	&quot;table.sortable thead {cursor:pointer;}\n&quot;+
	&quot;table.sortable .nosort {cursor:default;}\n&quot;+
	&quot;table.sortable td.sortedCol {background:#ffc;}&quot;,&quot;TableSortingPluginStyles&quot;);

function stopEvent(e){
	var ev = e? e : window.event;
	ev.cancelBubble = true;
	if (ev.stopPropagation) ev.stopPropagation();
	return false;	
}	

config.macros.nosort={
	handler : function(place){
		addClass(place,&quot;nosort&quot;);
	}	
};

config.macros.autosort={
	handler : function(place,m,p,w,pS){
		addClass(place,&quot;autosort&quot;+&quot; &quot;+pS);		
	}	
};
//!END-PLUGIN-CODE
// %/</pre>
</div>
<div title="TiddlersBarPlugin" creator="RainSkylark" modifier="RainSkylark" created="201301171159" modified="201202150256" tags="systemConfig excludeLists" changecount="3">
<pre>/***
|''Name:''|TiddlersBarPlugin|
|''Description:''|A bar to switch between tiddlers through tabs (like browser tabs bar).|
|''Version:''|1.2.1|
|''Date:''|Dec 21,2007|
|''Source:''|http://visualtw.ouvaton.org/VisualTW.html|
|''Author:''|Pascal Collin|
|''License:''|[[BSD open source license|License]]|
|''~CoreVersion:''|2.1.0|
|''Browser:''|Firefox 2.0; InternetExplorer 6.0, others|
!Demos
On [[homepage|http://visualtw.ouvaton.org/VisualTW.html]], open several tiddlers to use the tabs bar.
!Installation
#import this tiddler from [[homepage|http://visualtw.ouvaton.org/VisualTW.html]] (tagged as systemConfig)
#save and reload
#''if you're using a custom [[PageTemplate]]'', add {{{&lt;div id='tiddlersBar' refresh='content' ondblclick='config.macros.tiddlersBar.onTiddlersBarAction(event)'&gt;&lt;/div&gt;}}} before {{{&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;}}}
#optionally, adjust StyleSheetTiddlersBar
!Tips
*Doubleclick on the tiddlers bar (where there is no tab) create a new tiddler.
*Tabs include a button to close {{{x}}} or save {{{!}}} their tiddler.
*By default, click on the current tab close all others tiddlers.
!Configuration options 
&lt;&lt;option chkDisableTabsBar&gt;&gt; Disable the tabs bar (to print, by example).
&lt;&lt;option chkHideTabsBarWhenSingleTab &gt;&gt; Automatically hide the tabs bar when only one tiddler is displayed. 
&lt;&lt;option txtSelectedTiddlerTabButton&gt;&gt; ''selected'' tab command button.
!Code
***/
//{{{
config.options.chkDisableTabsBar = config.options.chkDisableTabsBar ? config.options.chkDisableTabsBar : false;
config.options.chkHideTabsBarWhenSingleTab  = config.options.chkHideTabsBarWhenSingleTab  ? config.options.chkHideTabsBarWhenSingleTab  : false;
config.options.txtSelectedTiddlerTabButton = config.options.txtSelectedTiddlerTabButton ? config.options.txtSelectedTiddlerTabButton : &quot;closeOthers&quot;;
config.macros.tiddlersBar = {
	tooltip : &quot;see &quot;,
	tooltipClose : &quot;click here to close this tab&quot;,
	tooltipSave : &quot;click here to save this tab&quot;,
	promptRename : &quot;Enter tiddler new name&quot;,
	currentTiddler : &quot;&quot;,
	previousState : false,
	handler: function(place,macroName,params) {
		if (config.macros.tiddlersBar.isShown())
			story.forEachTiddler(function(title,e){
				if (title==config.macros.tiddlersBar.currentTiddler){
					var d = createTiddlyElement(null,&quot;span&quot;,null,&quot;tab tabSelected&quot;);
					config.macros.tiddlersBar.createActiveTabButton(d,title);
				}
				else {
					var d = createTiddlyElement(place,&quot;span&quot;,null,&quot;tab tabUnselected&quot;);
					var btn = createTiddlyButton(d,title,config.macros.tiddlersBar.tooltip + title,config.macros.tiddlersBar.onSelectTab);
					btn.setAttribute(&quot;tiddler&quot;, title);
				}
				var isDirty =story.isDirty(title);
				var c = createTiddlyButton(d,isDirty ?&quot;!&quot;:&quot;x&quot;,isDirty?config.macros.tiddlersBar.tooltipSave:config.macros.tiddlersBar.tooltipClose, isDirty ? config.macros.tiddlersBar.onTabSave : config.macros.tiddlersBar.onTabClose,&quot;tabButton&quot;);
				c.setAttribute(&quot;tiddler&quot;, title);
				if (place.childNodes) {
					place.insertBefore(document.createTextNode(&quot; &quot;),place.firstChild); // to allow break line here when many tiddlers are open
					place.insertBefore(d,place.firstChild); 
				}
				else place.appendChild(d);
			})
	}, 
	refresh: function(place,params){
		removeChildren(place);
		config.macros.tiddlersBar.handler(place,&quot;tiddlersBar&quot;,params);
		if (config.macros.tiddlersBar.previousState!=config.macros.tiddlersBar.isShown()) {
			story.refreshAllTiddlers();
			if (config.macros.tiddlersBar.previousState) story.forEachTiddler(function(t,e){e.style.display=&quot;&quot;;});
			config.macros.tiddlersBar.previousState = !config.macros.tiddlersBar.previousState;
		}
	},
	isShown : function(){
		if (config.options.chkDisableTabsBar) return false;
		if (!config.options.chkHideTabsBarWhenSingleTab) return true;
		var cpt=0;
		story.forEachTiddler(function(){cpt++});
		return (cpt&gt;1);
	},
	selectNextTab : function(){  //used when the current tab is closed (to select another tab)
		var previous=&quot;&quot;;
		story.forEachTiddler(function(title){
			if (!config.macros.tiddlersBar.currentTiddler) {
				story.displayTiddler(null,title);
				return;
			}
			if (title==config.macros.tiddlersBar.currentTiddler) {
				if (previous) {
					story.displayTiddler(null,previous);
					return;
				}
				else config.macros.tiddlersBar.currentTiddler=&quot;&quot;; 	// so next tab will be selected
			}
			else previous=title;
			});		
	},
	onSelectTab : function(e){
		var t = this.getAttribute(&quot;tiddler&quot;);
		if (t) story.displayTiddler(null,t);
		return false;
	},
	onTabClose : function(e){
		var t = this.getAttribute(&quot;tiddler&quot;);
		if (t) {
			if(story.hasChanges(t) &amp;&amp; !readOnly) {
				if(!confirm(config.commands.cancelTiddler.warning.format([t])))
				return false;
			}
			story.closeTiddler(t);
		}
		return false;
	},
	onTabSave : function(e) {
		var t = this.getAttribute(&quot;tiddler&quot;);
		if (!e) e=window.event;
		if (t) config.commands.saveTiddler.handler(e,null,t);
		return false;
	},
	onSelectedTabButtonClick : function(event,src,title) {
		var t = this.getAttribute(&quot;tiddler&quot;);
		if (!event) event=window.event;
		if (t &amp;&amp; config.options.txtSelectedTiddlerTabButton &amp;&amp; config.commands[config.options.txtSelectedTiddlerTabButton])
			config.commands[config.options.txtSelectedTiddlerTabButton].handler(event, src, t);
		return false;
	},
	onTiddlersBarAction: function(event) {
		var source = event.target ? event.target.id : event.srcElement.id; // FF uses target and IE uses srcElement;
		if (source==&quot;tiddlersBar&quot;) story.displayTiddler(null,'New Tiddler',DEFAULT_EDIT_TEMPLATE,false,null,null);
	},
	createActiveTabButton : function(place,title) {
		if (config.options.txtSelectedTiddlerTabButton &amp;&amp; config.commands[config.options.txtSelectedTiddlerTabButton]) {
			var btn = createTiddlyButton(place, title, config.commands[config.options.txtSelectedTiddlerTabButton].tooltip ,config.macros.tiddlersBar.onSelectedTabButtonClick);
			btn.setAttribute(&quot;tiddler&quot;, title);
		}
		else
			createTiddlyText(place,title);
	}
}

story.coreCloseTiddler = story.coreCloseTiddler? story.coreCloseTiddler : story.closeTiddler;
story.coreDisplayTiddler = story.coreDisplayTiddler ? story.coreDisplayTiddler : story.displayTiddler;

story.closeTiddler = function(title,animate,unused) {
	if (title==config.macros.tiddlersBar.currentTiddler)
		config.macros.tiddlersBar.selectNextTab();
	story.coreCloseTiddler(title,false,unused); //disable animation to get it closed before calling tiddlersBar.refresh
	var e=document.getElementById(&quot;tiddlersBar&quot;);
	if (e) config.macros.tiddlersBar.refresh(e,null);
}

story.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle){
	story.coreDisplayTiddler(srcElement,tiddler,template,animate,unused,customFields,toggle);
	var title = (tiddler instanceof Tiddler)? tiddler.title : tiddler;  
	if (config.macros.tiddlersBar.isShown()) {
		story.forEachTiddler(function(t,e){
			if (t!=title) e.style.display=&quot;none&quot;;
			else e.style.display=&quot;&quot;;
		})
		config.macros.tiddlersBar.currentTiddler=title;
	}
	var e=document.getElementById(&quot;tiddlersBar&quot;);
	if (e) config.macros.tiddlersBar.refresh(e,null);
}

ensureVisible=function (e) {return 0} //disable bottom scrolling (not useful now)

config.shadowTiddlers.StyleSheetTiddlersBar = &quot;/*{{{*/\n&quot;;
config.shadowTiddlers.StyleSheetTiddlersBar += &quot;#tiddlersBar .button {border:0}\n&quot;;
config.shadowTiddlers.StyleSheetTiddlersBar += &quot;#tiddlersBar .tab {white-space:nowrap}\n&quot;;
config.shadowTiddlers.StyleSheetTiddlersBar += &quot;#tiddlersBar {padding : 1em 0.5em 2px 0.5em}\n&quot;;
config.shadowTiddlers.StyleSheetTiddlersBar += &quot;.tabUnselected .tabButton, .tabSelected .tabButton {padding : 0 2px 0 2px; margin: 0 0 0 4px;}\n&quot;;
config.shadowTiddlers.StyleSheetTiddlersBar += &quot;.tiddler, .tabContents {border:1px [[ColorPalette::TertiaryPale]] solid;}\n&quot;;
config.shadowTiddlers.StyleSheetTiddlersBar +=&quot;/*}}}*/&quot;;
store.addNotification(&quot;StyleSheetTiddlersBar&quot;, refreshStyles);

config.shadowTiddlers.PageTemplate=config.shadowTiddlers.PageTemplate.replace(/&lt;div id='tiddlerDisplay'&gt;&lt;\/div&gt;/m,&quot;&lt;div id='tiddlersBar' refresh='content' ondblclick='config.macros.tiddlersBar.onTiddlersBarAction(event)'&gt;&lt;/div&gt;\n&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;&quot;)

//}}}</pre>
</div>
<div title="TiddlyFox" creator="KarelWintersky" modifier="KarelWintersky" created="201506280532" tags="excludeLists systemHint" changecount="1">
<pre>TiddlyFox is an extension for Mozilla Firefox that enables TiddlyWiki documents loaded from a {{{file:///}}} URI to save changes to themselves.

The latest version of TiddlyFox can be installed from:

https://github.com/TiddlyWiki/TiddlyFox/raw/master/tiddlyfox.xpi

You can also install TiddlyFox from Mozilla's official addon library, but note that this version typically lags behind the latest release.

https://addons.mozilla.org/en-US/firefox/addon/tiddlyfox/

</pre>
</div>
<div title="ToolbarCommands" creator="RainSkylark" modifier="RainSkylark" created="201301171233" modified="201202150250" tags="excludeLists" changecount="7">
<pre>|~ViewToolbar|closeTiddler closeOthers +editTiddler &gt; fields permalink references jump fullscreen|
|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|</pre>
</div>
<div title="ViewTemplate" creator="RainSkylark" modifier="RainSkylark" created="201301171232" modified="201312030637" tags="excludeLists" changecount="18">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' role='navigation' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;!-- &lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt; --&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="WikiBar" creator="RainSkylark" modifier="RainSkylark" created="201301171201" modified="201312132039" tags="excludeLists systemConfig" changecount="4">
<pre>/***
|''Name:''|WikiBar+|
|''Version:''|3.0 (based on Wikibar 2.0.0 beta3)|
|''Source:''|[[AiddlyWiki|http://aiddlywiki.sourceforge.net]]|
|''Original:''|[[Arphen Lin|mailto:arphenlin@gmail.com]]|
|''Fixes:''|[[Karel Wintersky|mailto:karel.wintersky@gmail.com]]|
|''Type:''|toolbar macro command extension|
|''Required:''|TiddlyWiki 2.7.0|
!Description
WikiBar is a toolbar that gives access to most of TiddlyWiki's formatting features with a few clicks. It's a handy tool for people who are not familiar with TiddlyWiki syntax.
Besides, with WikiBar-addons, users can extend the power of WikiBar.
!Revision history
*v3.0 (2013/12/14)
** some fixes for latest TiddlyWiki Core 
** REQUIRED {{{ &lt;div class='toolbar wikibar' macro='wikibar'&gt;&lt;/div&gt; }}} in EditTemplate (below {{{&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt; }}}
*v2.0.0 beta3 (2005/12/30)
** remove macros (replaced by TWMacro addon)
** add wikibar command in toolbar automatically
** rename DOIT to HANDLER
** rename TIP to TOOLTIP
*v2.0.0 beta2 (2005/12/21)
** re-design Wikibar addon framework
*v2.0.0 beta1 (2005/12/14)
** Note:
*** WikiBarPlugin is renamed to WikiBar
** New Features:
*** support TiddlyWiki 2.0.0 template mechanism
*** new wikibar data structure
*** new wikibar-addon framework for developers
**** support dynamic popup menu generator
*** support most new macros added in TiddlyWiki 2.0.0
*** multi-level popup menu
*** fix wikibar tab stop
*** remove paletteSelector
** Known Bugs:
*** popup-menu and color-picker can't be closed correctly
*** some macros can't be displayed correctly in previewer
*** text in previewer will be displayed italic
*v1.2.0 (2005/11/21)
**New Features:
***User defined color palettes supported
####Get color palettes from [[ColorZilla Palettes|http://www.iosart.com/firefox/colorzilla/palettes.html]].
####Save the palette file(*.gpl) as a new tiddler and tag it with 'ColorPalettes', then you can use it in WikiBar.
***WikiBar style sheet supported
***Click on document to close current colorPicker, paletteSelector or aboutWikibar
*v1.1.1 (2005/11/03)
**Bugs fixed:
***'Not enough parameters!' message is displayed when the parameter includes '%+number', ex: 'hello%20world!'
*v1.1.0 (2005/11/01)
**Bugs fixed:
***WikiBar overruns (reported by by GeoffS &lt;gslocock@yahoo.co.uk&gt;)
**New features:
***Insert a color code at the cursor. (Thanks to RunningUtes &lt;RunningUtes@gmail.com&gt;)
***Enable gradient macro. (Thanks to RunningUtes &lt;RunningUtes@gmail.com&gt;)
***Insert tiddler comment tags {{{/% ... %/}}}. (new feature supported by TiddlyWiki 1.2.37)
***Insert DateFormatString for {{{&lt;&lt;today&gt;&gt;}}} macro. (new feature supported by TiddlyWiki 1.2.37)
**Enhanced:
***Allow optional parameters in syntax.
**Bugs:
***'Not enough parameters!' message is displayed when the parameter includes '%+number', ex: 'hello%20world!'
*v1.0.0 (2005/10/30)
**Initial release
!Code
***/
//{{{
config.macros.wikibar = {major: 3, minor: 0, revision: 0, date: new Date(2013,12,14)};
config.macros.wikibar.handler = function(place,macroName,params,wikifier,paramString,tiddler){
  if(!(tiddler instanceof Tiddler))  {return;}
	story.setDirty(tiddler.title,true);
  place.id = 'wikibar'+(tiddler.title).replace(/_/g, &quot;__&quot;).replace(/ /g, &quot;_&quot;); // @KW Patch for CORE 2.7.0
  place.className = 'toolbar wikibar';
};
function wikibar_install(){
  config.commands.wikibar = {
  	text: 'wikibar',
  	tooltip: 'wikibar on/off',
  	handler: function(e,src,title) {
      if(!e){ e = window.event; }
      title = title.replace(/_/g, &quot;__&quot;).replace(/ /g, &quot;_&quot;);  // @KW Patch for CORE 2.7.0
      var theButton = resolveTarget(e);
      theButton.id = 'wikibarButton'+title;
      wikibarPopup.remove();
      wikibar_installAddons(theButton, title);
      wikibar_createWikibar(title);
      return(false);
    }
  };
  config.shadowTiddlers['EditTemplate'] = wikibar_addWikibarCommand(config.shadowTiddlers['EditTemplate']);
  var tiddler = store.getTiddler('EditTemplate');
  if(tiddler){
    tiddler.text = wikibar_addWikibarCommand(tiddler.text);
  }
}
function wikibar_installAddons(theButton, title){
 	var tiddlers = store.getTaggedTiddlers('wikibarAddons');
	if(!tiddlers)	  { return; }
	theButton.addons=[];
  for(var i=0; i&lt;tiddlers.length; i++){
    try{
      eval(tiddlers[i].text);
      try{
        wikibar_addonInstall(title);
        wikibar_addonInstall = null;
        theButton.addons.push({ok:true, name:tiddlers[i].title});
      }catch(ex){
        theButton.addons.push({ok:false, name:tiddlers[i].title, error:ex});
      }
    }catch(ex){
      theButton.addons.push({ok:false, name:tiddlers[i].title, error:ex});
    }
  }
}
function wikibar_addWikibarCommand(tiddlerText){
  var div = document.createElement('div');
  div.style.display = 'none';
  div.innerHTML = tiddlerText;
  for(var i=0; i&lt;div.childNodes.length; i++){
    var o=div.childNodes[i];
    if(o.tagName==='DIV'){
      if(o.className=='toolbar'){
        var macroText = o.getAttribute('macro').trim();
        if(macroText.search('wikibar')&lt;=0){
          macroText += ' wikibar';
          o.setAttribute('macro', macroText);
        }
        break;
      }
    }
  }
  return div.innerHTML.replace(/\&quot;/g, &quot;\'&quot;);
}
function wikibar_processSyntaxParams(theSyntax, params){
  try{
    var pcr = 'AplWikibarPcr';
    var rx=null;
    var allParams=null;
    if(params){
      if(typeof(params)=='object'){
        for(var i=0; i&lt;params.length; i++){
          if(params[i]){
            params[i] = params[i].replace(new RegExp('%','g'), pcr).trim();
            rx = '(\\[%'+(i+1)+'\\])' + '|' + '(%'+(i+1)+')';
            theSyntax = theSyntax.replace(new RegExp(rx,'g'), params[i] );
          }
        }
        allParams = params.join(' ').trim();
      }else{
        allParams = params.replace(new RegExp('%','g'), pcr).trim();
        rx = /(\[%1{1}\])|(%1{1})/g;
        theSyntax = theSyntax.replace(rx, allParams);
      }
    }
    if(allParams){
      theSyntax = theSyntax.replace(new RegExp('%N{1}','g'), allParams);
    }
    rx=/\[%(([1-9]{1,}[0-9]{0,})|(N{1}))\]/g;
    theSyntax = theSyntax.replace(rx, '');
    rx=/%(([1-9]{1,}[0-9]{0,})|(N{1}))/g;
    if( theSyntax.match(rx) ){
      throw 'Not enough parameters! ' + theSyntax;
    }
    theSyntax=theSyntax.replace(new RegExp(pcr,'g'), '%');
    return theSyntax;
  } catch(ex){
    return null;
  }
}
function wikibar_resolveEditItem(tiddlerWrapper, itemName){
  if(tiddlerWrapper.hasChildNodes()){
    var c=tiddlerWrapper.childNodes;
    for(var i=0; i&lt;c.length; i++){
      var txt=wikibar_resolveEditItem(c[i], itemName);
      if(!txt){
        continue;
      }else{
        return txt;
      }
    }
  }
  return ((tiddlerWrapper.getAttribute &amp;&amp; tiddlerWrapper.getAttribute('edit')==itemName)? tiddlerWrapper : null);
}
function wikibar_resolveEditItemValue(tiddlerWrapper, itemName){
  var o = wikibar_resolveEditItem(tiddlerWrapper, itemName);
  return (o? o.value.replace(/\r/mg,'') : null);
}
function wikibar_resolveTiddlerEditorWrapper(obj){
  if(obj.id=='tiddlerDisplay'){return null;}
  if((obj.getAttribute &amp;&amp; obj.getAttribute('macro')=='edit text')){return obj;}
  return wikibar_resolveTiddlerEditorWrapper(obj.parentNode);
}
function wikibar_resolveTiddlerEditor(obj){
  if(obj.hasChildNodes()){
    var c = obj.childNodes;
    for(var i=0; i&lt;c.length; i++){
      var o=wikibar_resolveTiddlerEditor(c[i]);
      if(o){ return o;}
    }
  }
  return ((obj.getAttribute &amp;&amp; obj.getAttribute('edit')=='text')? obj : null);
}
function wikibar_resolveTargetButton(obj){
  if(obj.id &amp;&amp; obj.id.substring(0,7)=='wikibar'){ return null; }
  if(obj.tiddlerTitle){
    return obj;
  }else{
    return wikibar_resolveTargetButton(obj.parentNode);
  }
}
function wikibar_isValidMenuItem(tool){
  if(!tool){  return false; }
  if(tool.TYPE=='MENU' || tool.TYPE=='MAIN_MENU'){
    for(var key in tool){
      if(key.substring(0,8)=='DYNAITEM'){ return true; }
      if(wikibar_isValidMenuItem(tool[key])){ return true; }
    }
    return false;
  }else{
    return (tool.HANDLER? true : false);
  }
}
function wikibar_editFormat(param){
  var editor = param.button.editor;
  var params = param.params;
  clearMessage();
  if(!editor){ return; }
  var repText = wikibar_processSyntaxParams(this.syntax, params);
  if(repText===null){ return; }
	var st = editor.scrollTop;
	var ss = editor.selectionStart;
	var se = editor.selectionEnd;
	var frontText= '';
	var endText  = '';
	var fullText = editor.value;
	if(se&gt;ss &amp;&amp; ss&gt;=0){
	  frontText  = fullText.substring(0, ss);
	  endText    = fullText.substring(se, fullText.length);
	}
	else if(ss===0 &amp;&amp; (se===0 || se == fullText.length) ){
    endText    = fullText;
	}
	else if(se==ss &amp;&amp; ss&gt;0){
    frontText  = fullText.substring(0, ss);
    endText    = fullText.substring(se, fullText.length);
	}
	if(repText.indexOf('user_text')&gt;=0 &amp;&amp; this.hint){
		repText = repText.replace('user_text', this.hint);
	}
	editor.value = frontText + repText + endText;
	editor.selectionStart = ss;
	editor.selectionEnd   = ss + repText.length;
	editor.scrollTop      = st;
	editor.focus();
}
function wikibar_editFormatByWord(param){
  var editor = param.button.editor;
  var params = param.params;
  clearMessage();
  if(!editor){return;}
  var repText = wikibar_processSyntaxParams(this.syntax, params);
  if(repText===null){ return; }
	var st = editor.scrollTop;
	var ss = editor.selectionStart;
	var se = editor.selectionEnd;
	var frontText= '';
	var selText  = '';
	var endText  = '';
	var fullText = editor.value;
	if(se&gt;ss &amp;&amp; ss&gt;=0){
	  frontText  = fullText.substring(0, ss);
	  selText	   = fullText.substring(ss,se);
	  endText    = fullText.substring(se, fullText.length);
	}
	else if(ss===0 &amp;&amp; (se===0 || se == fullText.length) ){
    endText    = fullText;
	}
	else if(se==ss &amp;&amp; ss&gt;0){
    frontText  = fullText.substring(0, ss);
    endText    = fullText.substring(se, fullText.length);
	  if(!( fullText.charAt(ss-1).match(/\W/gi) || fullText.charAt(ss).match(/\W/gi) )){
      var m = frontText.match(/\W/gi);
      if(m){
        ss = frontText.lastIndexOf(m[m.length-1])+1;
      }
      else{
        ss = 0;
      }
      m = endText.match(/\W/gi);
      if(m){
        se += endText.indexOf(m[0]);
      }
      else{
        se = fullText.length;
      }
      frontText = fullText.substring(0, ss);
  	  endText   = fullText.substring(se, fullText.length);
  	  selText   = fullText.substring(ss,se);
	  }
	}
	if(selText.length&gt;0){
		repText = repText.replace('user_text', selText);
	}
	if(repText.indexOf('user_text')&gt;=0 &amp;&amp; this.hint){
		repText = repText.replace('user_text', this.hint);
	}
	editor.value = frontText + repText + endText;
	editor.selectionStart = ss;
	editor.selectionEnd   = ss + repText.length;
	editor.scrollTop      = st;
	editor.focus();
}
function wikibar_editFormatByCursor(param){
  var editor = param.button.editor;
  var params = param.params;
  clearMessage();
  if(!editor){ return; }
  var repText = wikibar_processSyntaxParams(this.syntax, params);
  if(repText===null){ return; }
	var st = editor.scrollTop;
	var ss = editor.selectionStart;
	var se = editor.selectionEnd;
	var frontText= '';
	var endText  = '';
	var fullText = editor.value;
	if(se&gt;ss &amp;&amp; ss&gt;=0){
	  frontText  = fullText.substring(0, ss);
	  endText    = fullText.substring(se, fullText.length);
	}
	else if(ss===0 &amp;&amp; (se===0 || se == fullText.length) ){
    endText    = fullText;
	}
	else if(se==ss &amp;&amp; ss&gt;0){
    frontText  = fullText.substring(0, ss);
    endText    = fullText.substring(se, fullText.length);
	}
	if(repText.indexOf('user_text')&gt;=0 &amp;&amp; this.hint){
		repText = repText.replace('user_text', this.hint);
	}
	editor.value = frontText + repText + endText;
	editor.selectionStart = ss;
	editor.selectionEnd   = ss + repText.length;
	editor.scrollTop      = st;
	editor.focus();
}
function wikibar_editFormatByLine(param){
  var editor = param.button.editor;
  var params = param.params;
  clearMessage();
  if(!editor){ return; }
  var repText = wikibar_processSyntaxParams(this.syntax, params);
  if(repText===null){ return; }
	var st = editor.scrollTop;
	var ss = editor.selectionStart;
	var se = editor.selectionEnd;
	var frontText= '';
	var selText  = '';
	var endText  = '';
	var fullText = editor.value;
	if(se&gt;ss &amp;&amp; ss&gt;=0){
		if(this.byBlock){
	    frontText  = fullText.substring(0, ss);
	    selText		 = fullText.substring(ss,se);
	    endText    = fullText.substring(se, fullText.length);
		}
		else{
	  	se = ss;
		}
	}
  if(ss===0 &amp;&amp; (se===0 || se == fullText.length) ){
    var m=fullText.match(/(\n|\r)/g);
    if(m){
      se = fullText.indexOf(m[0]);
    }else{
      se = fullText.length;
    }
    selText    = fullText.substring(0, se);
    endText    = fullText.substring(se, fullText.length);
	}
	else if(se==ss &amp;&amp; ss&gt;0){
    frontText  = fullText.substring(0, ss);
    endText    = fullText.substring(se, fullText.length);
    m = frontText.match(/(\n|\r)/g);
    if(m){
      ss = frontText.lastIndexOf(m[m.length-1])+1;
    }
    else{
      ss = 0;
    }
    m = endText.match(/(\n|\r)/g);
    if(m){
      se += endText.indexOf(m[0]);
    }
    else{
      se = fullText.length;
    }
    frontText = fullText.substring(0, ss);
	  selText   = fullText.substring(ss,se);
	  endText   = fullText.substring(se, fullText.length);
	}
	if(selText.length&gt;0){
		repText = repText.replace('user_text', selText);
	}
	if(repText.indexOf('user_text')&gt;=0 &amp;&amp; this.hint){
		repText = repText.replace('user_text', this.hint);
	}
	if(this.byBlock){
    if( (frontText.charAt(frontText.length-1)!='\n') &amp;&amp; ss&gt;0 ){
    	repText = '\n' + repText;
    }
    if( (endText.charAt(0)!='\n') || se==fullText.length){
    	repText += '\n';
    }
	}
	editor.value = frontText + repText + endText;
	editor.selectionStart = ss;
	editor.selectionEnd   = ss + repText.length;
	editor.scrollTop      = st;
	editor.focus();
}
function wikibar_editFormatByTableCell(param){
  var editor = param.button.editor;
  var params = param.params;
  clearMessage();
  if(!editor){ return; }
  var repText = wikibar_processSyntaxParams(this.syntax, params);
  if(repText===null){ return; }
	var st = editor.scrollTop;
	var ss = editor.selectionStart;
	var se = editor.selectionEnd;
	var frontText= '';
	var selText  = '';
	var endText  = '';
	var fullText = editor.value;
	if(ss===0 || ss==fullText.length){
		throw 'not valid cell!';
	}
	se=ss;
  frontText  = fullText.substring(0, ss);
  endText    = fullText.substring(se, fullText.length);
  i=frontText.lastIndexOf('\n');
  j=frontText.lastIndexOf('|');
  if(i&gt;j || j&lt;0){
  	throw 'not valid cell!';
  }
	ss = j+1;
  i=endText.indexOf('\n');
  j=endText.indexOf('|');
  if(i&lt;j || j&lt;0){
  	throw 'not valid cell!';
  }
  se += j;
  frontText = fullText.substring(0, ss-1);
  selText   = fullText.substring(ss,se);
  endText   = fullText.substring(se+1, fullText.length);
	if(this.key.substring(0,5)=='align'){
		selText = selText.trim();
		if(	selText=='&gt;' || selText=='~' ||	selText.substring(0,8)=='bgcolor(')	{return; }
	}
	if(selText.length&gt;0){
		repText = repText.replace('user_text', selText);
	}
	if(repText.indexOf('user_text')&gt;=0 &amp;&amp; this.hint){
		repText = repText.replace('user_text', this.hint);
	}
	editor.value = frontText + repText + endText;
	editor.selectionStart = ss;
	editor.selectionEnd   = ss + repText.length - 2;
	editor.scrollTop      = st;
	editor.focus();
}
function wikibar_editSelectAll(param){
  var editor = param.button.editor;
	editor.selectionStart = 0;
	editor.selectionEnd   = editor.value.length;
	editor.scrollTop      = 0;
	editor.focus();
}
function wikibar_doPreview(param){
  var theButton = param.button;
  var editor = param.button.editor;
  var wikibar = theButton.parentNode;
  if(!wikibar)  { return; }
  title = theButton.tiddlerTitle;
  var editorWrapper = wikibar_resolveTiddlerEditorWrapper(editor);
  var tiddlerWrapper = editorWrapper.parentNode;
  var previewer = document.getElementById('previewer'+title);
  if(previewer){
    previewer.parentNode.removeChild(previewer);
    editorWrapper.style.display = 'block';
    visible=true;
  }else{
    previewer = document.createElement('div');
    previewer.id = 'previewer'+title;
    previewer.className = 'viewer previewer';
    previewer.style.height = (editor.offsetHeight) + 'px';
    wikify(editor.value, previewer);
    tiddlerWrapper.insertBefore(previewer, editorWrapper);
    editorWrapper.style.display = 'none';
    visible=false;
  }
  var pv=null;
  for(var i=0; i&lt;wikibar.childNodes.length; i++){
    try{
      var btn = wikibar.childNodes[i];
      if(btn.toolItem.key == 'preview'){ pv=btn; }
      if(btn.toolItem.key != 'preview'){
        btn.style.display = visible ? '': 'none';
      }
    }catch(ex){}
  }
  if(!pv) { return; }
  if(visible){
    pv.innerHTML = '&lt;font face=\&quot;verdana\&quot;&gt;&amp;infin;&lt;/font&gt;';
    pv.title = 'preview current tiddler';
  }
  else{
    pv.innerHTML = '&lt;font face=\&quot;verdana\&quot;&gt;&amp;larr;&lt;/font&gt;';
    pv.title = 'back to editor';
  }
}
function wikibar_doListAddons(param){
  clearMessage();
  var title = param.button.tiddlerTitle;
  var wikibarButton = document.getElementById('wikibarButton'+title);
  var ok=0, fail=0;
  for(var i=0; i&lt;wikibarButton.addons.length; i++){
    var addon=wikibarButton.addons[i];
    if(addon.ok){
      displayMessage('[ o ] '+addon.name);
      ok++;
    }
    else{
      displayMessage('[ x ] '+addon.name + ': ' + addon.error);
      fail++;
    }
  }
  displayMessage('---------------------------------');
  displayMessage(ok + ' ok ; ' + fail + ' failed');
}
function wikibar_getColorCode(param){
  var cbOnPickColor = function(colorCode, param){
    param.params = colorCode;
    param.button.toolItem.doMore(param);
  };
  wikibarColorTool.openColorPicker(param.button, cbOnPickColor, param);
}
function wikibar_getLinkUrl(param){
  var url= prompt('Please enter the link target', (this.param? this.param : ''));
  if (url &amp;&amp; url.trim().length&gt;0){
    param.params = url;
    this.doMore(param);
  }
}
function wikibar_getTableRowCol(param){
  var rc= prompt('Please enter (rows x cols) of the table', '2 x 3');
  if (!rc || (rc.trim()).length&lt;=0){ return; }
  var arr = rc.toUpperCase().split('X');
  if(arr.length != 2)   { return; }
  for(var i=0; i&lt;arr.length; i++){
    if(isNaN(arr[i].trim()))  { return; }
  }
  var rows = parseInt(arr[0].trim(), 10);
  var cols = parseInt(arr[1].trim(), 10);
  var txtTable='';
  for(var r=0; r&lt;rows; r++){
    for(var c=0; c&lt;=cols; c++){
      if(c===0){
        txtTable += '|';
      }else{
        txtTable += ' |';
      }
    }
    txtTable += '\n';
  }
  if(txtTable.trim().length&gt;0){
    param.params = txtTable.trim();
    this.doMore(param);
  }
}
function wikibar_getMacroParam(param){
  var p = prompt('Please enter the parameters of macro \&quot;' + this.key + '\&quot;:' +
                 '\nSyntax: ' + this.syntax +
                 '\n\nNote: '+
                 '\n%1,%2,... - parameter needed'+
                 '\n[%1] - optional parameter'+
                 '\n%N   - more than one parameter(1~n)'+
                 '\n[%N] - any number of parameters(0~n)'+
                 '\n\nPS:'+
                 '\n1. Parameters should be seperated with space character'+
                 '\n2. Use \&quot; to wrap the parameter that includes space character, ex: \&quot;hello world\&quot;'+
                 '\n3. Input the word(null) for the optional parameter ignored',
                 (this.param? this.param : '') );
  if(!p)  { return; }
  p=p.readMacroParams();
  for(var i=0; i&lt;p.length; i++){
    var s=p[i].trim();
    if(s.indexOf(' ')&gt;0){ p[i]=&quot;'&quot;+s+&quot;'&quot;; }
    if(s.toLowerCase()=='null'){ p[i]=null; }
  }
  param.params = p;
  this.doMore(param);
}
function wikibar_getMorePalette(unused){
  clearMessage();
  displayMessage('Get more color palettes(*.gpl) from ColorZilla Palettes site', 'http:\/\/www.iosart.com/firefox/colorzilla/palettes.html');
  displayMessage('Save it as a new tiddler with \&quot;ColorPalettes\&quot; tag');
}
function wikibar_createWikibar(title){
  var theWikibar = document.getElementById('wikibar' + title);
  if(theWikibar){
    if(theWikibar.hasChildNodes()){
      theWikibar.style.display = (theWikibar.style.display=='block'? 'none':'block');
      return;
    }
  }
  var tiddlerWrapper = document.getElementById('tiddler'+title);
  var theTextarea = wikibar_resolveTiddlerEditor(tiddlerWrapper);
  if(!theTextarea){
    clearMessage();
    displayMessage('WikiBar only works in tiddler edit mode now');
    return;
  }else{
    if(!theTextarea.id){ theTextarea.id = 'editor'+title; }
    if(!theTextarea.parentNode.id){ theTextarea.parentNode.id='editorWrapper'+title;  }
  }
  if(theWikibar){
    theWikibar = document.getElementById('wikibar'+title);
  }else{
    var editorWrapper = wikibar_resolveTiddlerEditorWrapper(theTextarea);
    theWikibar = createTiddlyElement(tiddlerWrapper, 'div', 'wikibar'+title, 'toolbar');
    addClass(theWikibar, 'wikibar');
    var previewer = document.getElementById('previewer'+title);
    if(previewer){
      tiddlerWrapper.insertBefore(theWikibar, previewer);
    }else{
      tiddlerWrapper.insertBefore(theWikibar, editorWrapper);
    }
  }
  wikibar_createMenu(theWikibar,wikibarStore,title,theTextarea);
  if(config.options['chkWikibarSetEditorHeight'] &amp;&amp; config.options['txtWikibarEditorRows']){
    theTextarea.rows = config.options['txtWikibarEditorRows'];
  }
  setStylesheet(
    '.wikibar{text-align:left;visibility:visible;margin:2px;padding:1px;}.previewer{overflow:auto;display:block;border:1px solid;}#colorPicker{position:absolute;display:none;z-index:10;margin:0px;padding:0px;}#colorPicker table{margin:0px;padding:0px;border:2px solid #000;border-spacing:0px;border-collapse:collapse;}#colorPicker td{margin:0px;padding:0px;border:1px solid;font-size:11px;text-align:center;cursor:auto;}#colorPicker .header{background-color:#fff;}#colorPicker .button{background-color:#fff;cursor:pointer;cursor:hand;}#colorPicker .button:hover{padding-top:3px;padding-bottom:3px;color:#fff;background-color:#136;}#colorPicker .cell{padding:4px;font-size:7px;cursor:crosshair;}#colorPicker .cell:hover{padding:10px;}.wikibarPopup{position:absolute;z-index:10;border:1px solid #014;color:#014;background-color:#cef;}.wikibarPopup table{margin:0;padding:0;border:0;border-spacing:0;border-collapse:collapse;}.wikibarPopup .button:hover{color:#eee;background-color:#014;}.wikibarPopup .disabled{color:#888;}.wikibarPopup .disabled:hover{color:#888;background-color:#cef;}.wikibarPopup tr .seperator hr{margin:0;padding:0;background-color:#cef;width:100%;border:0;border-top:1px dashed #014;}.wikibarPopup tr .icon{font-family:verdana;font-weight:bolder;}.wikibarPopup tr .marker{font-family:verdana;font-weight:bolder;}.wikibarPopup td{font-size:0.9em;padding:2px;}.wikibarPopup input{border:0;border-bottom:1px solid #014;margin:0;padding:0;font-family:arial;font-size:100%;background-color:#fff;}',
  	'WikiBarStyleSheet');
}
function wikibar_createMenu(place,toolset,title,editor){
  if(!wikibar_isValidMenuItem(toolset)){return;}
  if(!(toolset.TYPE=='MAIN_MENU' || toolset.TYPE=='MENU')){ return; }
    for(var key in toolset){
      if(key.substring(0,9)=='SEPERATOR'){
        wikibar_createMenuSeperator(place);
        continue;
      }
      if(key.substring(0,8)=='DYNAITEM'){
        var dynaTools = toolset[key](title,editor);
        if(dynaTools.TYPE &amp;&amp; dynaTools.TYPE=='MENU'){
          wikibar_createMenuItem(place,dynaTools,null,editor,title);
        }else{
          dynaTools.TYPE = 'MENU';
          wikibar_createMenu(place, dynaTools, title, editor);
        }
        continue;
      }
      if((toolset[key].TYPE!='MENU' &amp;&amp; toolset[key].TYPE!='MAIN_MENU') &amp;&amp; !toolset[key].HANDLER){continue;}
      wikibar_createMenuItem(place,toolset,key,editor,title);
    }
}
function wikibar_createMenuItem(place,toolset,key,editor,title){
  if(!key){
    var tool = toolset;
  }else{
    tool = toolset[key];
    tool.key = key;
  }
  if(!wikibar_isValidMenuItem(tool)){return;}
  var toolIsOnMainMenu = (toolset.TYPE=='MAIN_MENU');
  var toolIsMenu = (tool.TYPE=='MENU');
  var theButton;
  if(toolIsOnMainMenu){
    theButton = createTiddlyButton(
                  place,
                  '',
                  (tool.TOOLTIP? tool.TOOLTIP : ''),
                  (toolIsMenu? wikibar_onClickMenuItem : wikibar_onClickItem),
                  'button');
    theButton.innerHTML = (tool.CAPTION? tool.CAPTION : key);
    theButton.isOnMainMenu = true;
    addClass(theButton, (toolIsMenu? 'menu' : 'item'));
  	place.appendChild( document.createTextNode('\n') );
    if(!toolIsMenu){
      if(config.options['chkWikibarPopmenuOnMouseOver']){
        theButton.onmouseover = function(e){ wikibarPopup.remove(); };
      }
    }
  }else{
    theButton=createTiddlyElement(place, 'tr',key,'button');
    theButton.title = (tool.TOOLTIP? tool.TOOLTIP : '');
    theButton.onclick = (toolIsMenu? wikibar_onClickMenuItem : wikibar_onClickItem);
    var tdL = createTiddlyElement(theButton, 'td','','marker');
    var td = createTiddlyElement(theButton, 'td');
    var tdR = createTiddlyElement(theButton, 'td','','marker');
    td.innerHTML = (tool.CAPTION? tool.CAPTION : key);
    if(toolIsMenu){
      tdR.innerHTML='&amp;nbsp;&amp;nbsp;&amp;rsaquo;';
    }
    if(tool.SELECTED){
      tdL.innerHTML = '&amp;radic; ';
      addClass(theButton, 'selected');
    }
    if(tool.DISABLED){
      addClass(theButton, 'disabled');
    }
  }
  theButton.tiddlerTitle = title;
  theButton.toolItem = tool;
  theButton.editor = editor;
  theButton.tabIndex = 999;
  if(toolIsMenu){
    if(config.options['chkWikibarPopmenuOnMouseOver']){
      theButton.onmouseover = wikibar_onClickMenuItem;
    }
  }
}
function wikibar_createMenuSeperator(place){
  if(place.id.substring(0,7)=='wikibar')  { return; }
  var onclickSeperator=function(e){
  	if(!e){ e = window.event; }
  	e.cancelBubble = true;
    if (e.stopPropagation){ e.stopPropagation();  }
  	return(false);
  };
  var theButton=createTiddlyElement(place,'tr','','seperator');
  var td = createTiddlyElement(theButton, 'td','','seperator');
  td.colSpan=3;
  theButton.onclick=onclickSeperator;
	td.innerHTML = '&lt;hr&gt;';
}
function wikibar_genWikibarAbout(){
  var toolset={};
  toolset.version = {
    CAPTION: '&lt;center&gt;WikiBar ' +
              config.macros.wikibar.major + '.' +
              config.macros.wikibar.minor + '.' +
              config.macros.wikibar.revision +
              (config.macros.wikibar.beta? ' beta '+config.macros.wikibar.beta : '') +
              '&lt;/center&gt;',
    HANDLER: function(){}
  };
  toolset.SEPERATOR = {};
  toolset.author = {
    CAPTION: '&lt;center&gt;Arphen Lin&lt;br&gt;arphenlin@gmail.com&lt;/center&gt;',
    TOOLTIP: 'send mail to the author',
    HANDLER: function(){ window.open('mailto:arphenlin@gmail.com'); }
  };
  toolset.website = {
    CAPTION: '&lt;center&gt;aiddlywiki.sourceforge.net&lt;/center&gt;',
    TOOLTIP: 'go to the web site of WikiBar',
    HANDLER: function(){ window.open('http:\/\/aiddlywiki.sourceforge.net/'); }
  };
  return toolset;
}
function wikibar_genWikibarOptions(title, editor){
  var toolset={};
  toolset.popOnMouseOver = {
    CAPTION:'popup menu on mouse over',
    SELECTED: config.options['chkWikibarPopmenuOnMouseOver'],
    HANDLER: function(param){
      config.options['chkWikibarPopmenuOnMouseOver'] = !config.options['chkWikibarPopmenuOnMouseOver'];
      saveOptionCookie('chkWikibarPopmenuOnMouseOver');
      var title = param.button.tiddlerTitle;
      var wikibar = document.getElementById('wikibar'+title);
      if(wikibar){ wikibar.parentNode.removeChild(wikibar); }
      wikibar_createWikibar(title);
    }
  };
  toolset.setEditorSize = {
    CAPTION:'set editor height: &lt;input id=\&quot;txtWikibarEditorRows\&quot; type=text size=1 MAXLENGTH=3 value=\&quot;' +
            (config.options['txtWikibarEditorRows']? config.options['txtWikibarEditorRows']:editor.rows) + '\&quot;&gt; ok',
    HANDLER: function(param){
      var input = document.getElementById('txtWikibarEditorRows');
      if(input){
        var rows = parseInt(input.value, 10);
        if(!isNaN(rows)){
          var editor = param.button.editor;
          editor.rows = rows;
        }else{
          rows=config.maxEditRows;
        }
        config.options['txtWikibarEditorRows'] = rows;
        saveOptionCookie('txtWikibarEditorRows');
        config.maxEditRows = rows;
      }
    }
  };
  toolset.setEditorSizeOnLoadingWikibar = {
    CAPTION:'set editor height on loading wikibar',
    SELECTED: config.options['chkWikibarSetEditorHeight'],
    HANDLER: function(param){
      config.options['chkWikibarSetEditorHeight'] = !config.options['chkWikibarSetEditorHeight'];
      saveOptionCookie('chkWikibarSetEditorHeight');
      if(config.options['chkWikibarSetEditorHeight']){
        var rows = config.options['txtWikibarEditorRows'];
        if(!isNaN(rows)){ rows = 15; }
        var editor = param.button.editor;
        editor.rows = rows;
        config.options['txtWikibarEditorRows'] = rows;
        saveOptionCookie('txtWikibarEditorRows');
      }
    }
  };
  toolset.SEPERATOR = {};
  toolset.update = {
    CAPTION: 'check for updates',
    DISABLED: true,
    HANDLER: function(){}
  };
  return toolset;
}
function wikibar_genPaletteSelector(){
  try{
  	var cpTiddlers = store.getTaggedTiddlers('ColorPalettes');
  	if(!cpTiddlers) { return; }
  	var palettes=[];
  	palettes.push(wikibarColorTool.defaultPaletteName);
  	for(var i=0; i&lt;cpTiddlers.length; i++){
  		palettes.push(cpTiddlers[i].title.trim());
  	}
    var toolset={};
    for(i=0; i&lt;palettes.length; i++){
      toolset[palettes[i]] = {
        TOOLTIP: palettes[i],
        SELECTED: (palettes[i]==wikibarColorTool.paletteName),
        HANDLER: wikibar_doSelectPalette
      };
    }
    return toolset;
  }catch(ex){ return null; }
}
function wikibar_onClickItem(e){
	if(!e){ e = window.event; }
	var theTarget = resolveTarget(e);
	if(theTarget.tagName=='INPUT'){
    e.cancelBubble = true;
    if (e.stopPropagation){ e.stopPropagation(); }
    return;
	}
	var theButton = wikibar_resolveTargetButton(theTarget);
	if(!theButton){ return(false);  }
  	var o = theButton.toolItem;
    if(!o) { return; }
    var param = {
      event: e,
      button: theButton
    };
    if(o.HANDLER){ o.HANDLER(param);  }
  if(o.DISABLED){
    e.cancelBubble = true;
    if (e.stopPropagation){ e.stopPropagation(); }
  }
	return(false);
}
function wikibar_onClickMenuItem(e){
	if(!e){ e = window.event; }
	var theButton = wikibar_resolveTargetButton(resolveTarget(e));
	if(!theButton){ return(false);  }
	e.cancelBubble = true;
	if (e.stopPropagation){ e.stopPropagation(); }
    var title = theButton.tiddlerTitle;
    var editor = theButton.editor;
    var tool = theButton.toolItem;
    if(!tool) { return; }
    var popup = wikibarPopup.create(this);
  	if(popup){
      wikibar_createMenu(popup,tool,title,editor);
      if(!popup.hasChildNodes()){
        wikibarPopup.remove();
      }else{
        wikibarPopup.show(popup, false);
      }
    }
	return(false);
}
var wikibarColorTool = {
  defaultPaletteName : 'default',
  defaultColumns : 16,
  defaultPalette : [
    '#FFF','#DDD','#CCC','#BBB','#AAA','#999','#666','#333','#111','#000','#FC0','#F90','#F60','#F30','#C30','#C03',
    '#9C0','#9D0','#9E0','#E90','#D90','#C90','#FC3','#FC6','#F96','#F63','#600','#900','#C00','#F00','#F36','#F03',
    '#CF0','#CF3','#330','#660','#990','#CC0','#FF0','#C93','#C63','#300','#933','#C33','#F33','#C36','#F69','#F06',
    '#9F0','#CF6','#9C3','#663','#993','#CC3','#FF3','#960','#930','#633','#C66','#F66','#903','#C39','#F6C','#F09',
    '#6F0','#9F6','#6C3','#690','#996','#CC6','#FF6','#963','#630','#966','#F99','#F39','#C06','#906','#F3C','#F0C',
    '#3F0','#6F3','#390','#6C0','#9F3','#CC9','#FF9','#C96','#C60','#C99','#F9C','#C69','#936','#603','#C09','#303',
    '#0C0','#3C0','#360','#693','#9C6','#CF9','#FFC','#FC9','#F93','#FCC','#C9C','#969','#939','#909','#636','#606',
    '#060','#3C3','#6C6','#0F0','#3F3','#6F6','#9F9','#CFC','#9CF','#FCF','#F9F','#F6F','#F3F','#F0F','#C6C','#C3C',
    '#030','#363','#090','#393','#696','#9C9','#CFF','#39F','#69C','#CCF','#C9F','#96C','#639','#306','#90C','#C0C',
    '#0F3','#0C3','#063','#396','#6C9','#9FC','#9CC','#06C','#369','#99F','#99C','#93F','#60C','#609','#C3F','#C0F',
    '#0F6','#3F6','#093','#0C6','#3F9','#9FF','#699','#036','#039','#66F','#66C','#669','#309','#93C','#C6F','#90F',
    '#0F9','#6F9','#3C6','#096','#6FF','#6CC','#366','#069','#36C','#33F','#33C','#339','#336','#63C','#96F','#60F',
    '#0FC','#6FC','#3C9','#3FF','#3CC','#399','#033','#39C','#69F','#00F','#00C','#009','#006','#003','#63F','#30F',
    '#0C9','#3FC','#0FF','#0CC','#099','#066','#3CF','#6CF','#09C','#36F','#0CF','#09F','#06F','#03F','#03C','#30C'
  ],
	colorPicker : null,
  pickColorHandler: null,
  userData: null
};
wikibarColorTool.paletteName = wikibarColorTool.defaultPaletteName;
wikibarColorTool.columns = wikibarColorTool.defaultColumns;
wikibarColorTool.palette = wikibarColorTool.defaultPalette;
wikibarColorTool.onPickColor = function(e){
	if (!e){ e = window.event; }
	var theCell = resolveTarget(e);
	if(!theCell){ return(false); }
    color = theCell.bgColor.toLowerCase();
    if(!color)  { return; }
    wikibarColorTool.displayColorPicker(false);
    if(wikibarColorTool.pickColorHandler){
      wikibarColorTool.pickColorHandler(color, wikibarColorTool.userData);
    }
	return(false);
};
wikibarColorTool.onMouseOver = function(e){
	if (!e){ e = window.event; }
	var theButton = resolveTarget(e);
	if(!theButton){ return(false);  }
  	if(!wikibarColorTool)  { return; }
    color = theButton.bgColor.toUpperCase();
    if(!color)  { return; }
    td=document.getElementById('colorPickerInfo');
  	if(!td) { return; }
  	td.bgColor = color;
  	td.innerHTML = '&lt;span style=\&quot;color:#000;\&quot;&gt;'+color+'&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;' +
  	               '&lt;span style=\&quot;color:#fff;\&quot;&gt;'+color+'&lt;/span&gt;';
	e.cancelBubble = true;
	if (e.stopPropagation){ e.stopPropagation(); }
	return(false);
};
wikibarColorTool.openColorPicker = function(theTarget, pickColorHandler, userData){
  wikibarColorTool.skipClickDocumentEvent = true;
  wikibarColorTool.pickColorHandler = pickColorHandler;
  wikibarColorTool.userData = userData;
  wikibarColorTool.moveColorPicker(theTarget);
};
wikibarColorTool.convert3to6HexColor = function(c){
  c=c.trim();
  var rx=/^\#(\d|[a-f])(\d|[a-f])(\d|[a-f])$/gi;
  return (rx.test(c)? c.replace(rx, '#$1$1$2$2$3$3') : c);
};
wikibarColorTool.numToHexColor = function (n){
  if(typeof(n)=='number' &amp;&amp; (n&gt;=0 &amp;&amp; n&lt;=255)) {
  		s = n.toString(16).toLowerCase();
  		return ((s.length==1)? '0'+s : s);
  }else{
	 return null;
	}
};
wikibarColorTool.renderColorPalette = function(){
	if(wikibarColorTool.paletteName==wikibarColorTool.defaultPaletteName){
		wikibarColorTool.palette=wikibarColorTool.defaultPalette;
		wikibarColorTool.columns=wikibarColorTool.defaultColumns;
		return;
	}
	tiddlerText = (store.getTiddlerText(wikibarColorTool.paletteName, '')).trim();
	if(tiddlerText.length&lt;=0) { return; }
	var cpContents = tiddlerText.split('\n');
	var colors=[];
	columns = wikibarColorTool.defaultColumns;
	var tmpArray=null;
	errCount=0;
	for(var i=0; i&lt;cpContents.length; i++){
		cpLine=cpContents[i].trim();
    if( (!cpLine) || (cpLine.length&lt;=0) || (cpLine.charAt(0) == '#') ){ continue; }
		if(cpLine.substring(0,8).toLowerCase()=='columns:'){
			tmpArray = cpLine.split(':');
			try{
				columns = parseInt(tmpArray[1],10);
			}catch(ex){
				columns = wikibarColorTool.defaultColumns;
			}
		}else{
			tmpArray = cpLine.replace('\t', ' ').split(/[ ]{1,}/);
			try{
				color='';
				for(var j=0; j&lt;3; j++){
          c=parseInt(tmpArray[j].trim(), 10);
          if(isNaN(c)){
						break;
          }else{
						c=wikibarColorTool.numToHexColor(c);
						if(!c) {break;}
            color+=c;
					}
				}
				if(color.length==6){
					colors.push('#'+color);
				}	else {
					throw 'error';
				}
			}catch(ex){
			}
		}
	}
	if(colors.length&gt;0){
		wikibarColorTool.palette = colors;
		wikibarColorTool.columns = columns;
	}else{
		throw 'renderColorPalette(): No color defined in the palette.';
	}
};
wikibarColorTool.displayColorPicker = function(visible){
  if(wikibarColorTool.colorPicker){
    wikibarColorTool.colorPicker.style.display = (visible? 'block' : 'none');
  }
};
wikibarColorTool.moveColorPicker = function(theTarget){
  if(!wikibarColorTool.colorPicker){
  	wikibarColorTool.createColorPicker();
  }
	var cp = wikibarColorTool.colorPicker;
	var rootLeft = findPosX(theTarget);
  var rootTop = findPosY(theTarget);
  var popupLeft = rootLeft;
  var popupTop = rootTop;
  var popupWidth = cp.offsetWidth;
  var winWidth = findWindowWidth();
  if(popupLeft + popupWidth &gt; winWidth){
	  popupLeft = winWidth - popupWidth;
	}
  cp.style.left = popupLeft + 'px';
  cp.style.top = popupTop + 'px';
  wikibarColorTool.displayColorPicker(true);
};
wikibarColorTool.createColorPicker = function(unused, palette){
  if(palette){	wikibarColorTool.paletteName=palette; }
	wikibarColorTool.renderColorPalette();
	wikibarColorTool.colorPicker = document.createElement('div');
	wikibarColorTool.colorPicker.id = 'colorPicker';
	document.body.appendChild(wikibarColorTool.colorPicker);
  var theTable = document.createElement('table');
  wikibarColorTool.colorPicker.appendChild(theTable);
  var theTR = document.createElement('tr');
	theTable.appendChild(theTR);
	var theTD = document.createElement('td');
	theTD.className = 'header';
	theTD.colSpan = wikibarColorTool.columns;
	theTD.innerHTML = wikibarColorTool.paletteName;
  theTR.appendChild(theTD);
  for(var i=0; i&lt;wikibarColorTool.palette.length; i++){
    if((i%wikibarColorTool.columns)===0){
      theTR = document.createElement('tr');
      theTable.appendChild(theTR);
    }
    theTD = document.createElement('td');
    theTD.className = 'cell';
    theTD.bgColor = wikibarColorTool.convert3to6HexColor(wikibarColorTool.palette[i]);
    theTD.onclick = wikibarColorTool.onPickColor;
    theTD.onmouseover = wikibarColorTool.onMouseOver;
    theTR.appendChild(theTD);
  }
  rest = wikibarColorTool.palette.length % wikibarColorTool.columns;
  if(rest&gt;0){
    theTD = document.createElement('td');
		theTD.colSpan = wikibarColorTool.columns-rest;
    theTD.bgColor = '#000000';
    theTR.appendChild(theTD);
  }
  theTR = document.createElement('tr');
	theTable.appendChild(theTR);
	theTD = document.createElement('td');
	theTD.colSpan = wikibarColorTool.columns;
	theTD.id = 'colorPickerInfo';
  theTR.appendChild(theTD);
};
wikibarColorTool.onDocumentClick = function(e){
	if (!e){ e = window.event; }
	if(wikibarColorTool.skipClickDocumentEvent) {
	  wikibarColorTool.skipClickDocumentEvent = false;
    return true;
	}
	if((!e.eventPhase) || e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET){
    wikibarColorTool.displayColorPicker(false);
  }
	return true;
};
function wikibar_doSelectPalette(param){
	clearMessage();
	var theButton = param.button;
	if(!theButton.toolItem.key)  { return; }
	var palette = theButton.toolItem.key;
	var oldPaletteName = wikibarColorTool.paletteName;
	if(oldPaletteName != palette){
		try{
			wikibarColorTool.createColorPicker(theButton, palette);
			displayMessage('Palette \&quot;'+palette+'\&quot; ('+ wikibarColorTool.palette.length +' colors) is selected');
		}catch(ex){
			errMsg = ex;
			if(errMsg.substring(0,18)=='renderColorPalette'){
				displayMessage('Invalid palette \&quot;' + palette + '\&quot;, please check it out!');
				wikibarColorTool.createColorPicker(theButton, oldPaletteName);
			}
		}
	}
}
var wikibarPopup = {
  skipClickDocumentEvent: false,
	stack: []
};
wikibarPopup.resolveRootPopup = function(o){
  if(o.isOnMainMenu){  return null; }
  if(o.className.substring(0,12)=='wikibarPopup'){  return o;}
  return wikibarPopup.resolveRootPopup(o.parentNode);
};
wikibarPopup.create = function(root){
  for(var i=0; i&lt;wikibarPopup.stack.length; i++){
    var p=wikibarPopup.stack[i];
    if(p.root==root){
      wikibarPopup.removeFrom(i+1);
      return null;
    }
  }
  var rootPopup = wikibarPopup.resolveRootPopup(root);
  if(!rootPopup){
    wikibarPopup.remove();
  }else{
    wikibarPopup.removeFromRootPopup(rootPopup);
  }
	var popup = createTiddlyElement(document.body,'div','wikibarPopup'+root.toolItem.key,'wikibarPopup');
	var pop = createTiddlyElement(popup,'table','','');
	wikibarPopup.stack.push({rootPopup: rootPopup, root: root, popup: popup});
	return pop;
};
wikibarPopup.show = function(unused,slowly){
	var curr = wikibarPopup.stack[wikibarPopup.stack.length-1];
	var overlayWidth = 1;
  var rootLeft, rootTop, rootWidth, rootHeight, popupLeft, popupTop, popupWidth;
  if(curr.rootPopup){
  	rootLeft = findPosX(curr.rootPopup);
  	rootTop = findPosY(curr.root);
  	rootWidth = curr.rootPopup.offsetWidth;
  	popupLeft = rootLeft + rootWidth - overlayWidth;
  	popupTop = rootTop;
  }else{
  	rootLeft = findPosX(curr.root);
  	rootTop = findPosY(curr.root);
  	rootHeight = curr.root.offsetHeight;
  	popupLeft = rootLeft;
  	popupTop = rootTop + rootHeight;
  }
	var winWidth = findWindowWidth();
	popupWidth = curr.popup.offsetWidth;
	if(popupLeft + popupWidth &gt; winWidth){
		popupLeft = rootLeft - popupWidth + overlayWidth;
	}
	curr.popup.style.left = popupLeft + 'px';
	curr.popup.style.top = popupTop + 'px';
	curr.popup.style.display = 'block';
	addClass(curr.root, 'highlight');
	if(config.options.chkAnimate){
		anim.startAnimating(new Scroller(curr.popup,slowly));
	}else{
		window.scrollTo(0,ensureVisible(curr.popup));
	}
};
wikibarPopup.remove = function(){
	if(wikibarPopup.stack.length &gt; 0){
		wikibarPopup.removeFrom(0);
  }
};
wikibarPopup.removeFrom = function(from){
	for(var t=wikibarPopup.stack.length-1; t&gt;=from; t--){
		var p = wikibarPopup.stack[t];
		removeClass(p.root,'highlight');
		p.popup.parentNode.removeChild(p.popup);
  }
	wikibarPopup.stack = wikibarPopup.stack.slice(0,from);
};
wikibarPopup.removeFromRootPopup = function(from){
  for(var t=0; t&lt;wikibarPopup.stack.length; t++){
    var p = wikibarPopup.stack[t];
    if(p.rootPopup==from){
      wikibarPopup.removeFrom(t);
      break;
    }
  }
};
wikibarPopup.onDocumentClick = function(e){
	if (!e){ e = window.event; }
	if(wikibarPopup.skipClickDocumentEvent){
	 wikibarPopup.skipClickDocumentEvent=false;
	 return true;
	}
	if((!e.eventPhase) || e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET){
		wikibarPopup.remove();
	}
	return true;
};
var wikibarStore = {
  TYPE: 'MAIN_MENU',
  help:{
    TYPE:'MENU',
    CAPTION: '&lt;font face=\&quot;verdana\&quot;&gt;?&lt;/font&gt;',
    TOOLTIP:     'about WikiBar',
    options:{
      TYPE:'MENU',
      DYNAITEM: wikibar_genWikibarOptions
    },
    about:{
      TYPE:'MENU',
      DYNAITEM: wikibar_genWikibarAbout
    }
  },
  preview:{
    TOOLTIP:     'preview this tiddler',
    CAPTION: '&lt;font face=\&quot;verdana\&quot;&gt;&amp;infin;&lt;/font&gt;',
    HANDLER: wikibar_doPreview
  },
	line:{
		TOOLTIP:    '&lt;hr&gt;',
		CAPTION: '&lt;font face=\&quot;verdana\&quot;&gt;&amp;mdash;&lt;/font&gt;',
		syntax: '\n----\n',
		HANDLER: wikibar_editFormatByCursor
	},
	crlf:{
		TOOLTIP:    'new line',
		CAPTION: '&lt;font face=\&quot;verdana\&quot;&gt;&amp;para;&lt;/font&gt;',
		syntax: '\n',
		HANDLER: wikibar_editFormatByCursor
	},
	selectAll:{
		TOOLTIP:    'select all',
		CAPTION: '&lt;font face=\&quot;verdana\&quot;&gt;&amp;sect;&lt;/font&gt;',
		HANDLER: wikibar_editSelectAll
	},
	deleteSelected:{
		TOOLTIP:    'delete selected',
		CAPTION: '&lt;font face=\&quot;verdana\&quot;&gt;&amp;times;&lt;/font&gt;',
		syntax: '',
		HANDLER: wikibar_editFormat
	},
  textFormat:{
    TYPE: 'MENU',
    CAPTION: 'text',
    TOOLTIP: 'text formatters',
    ignore:{
			TOOLTIP:     'ignore wiki word',
			CAPTION: 'ignore wikiWord',
			syntax:  '~user_text',
			hint:    'wiki_word',
			HANDLER:    wikibar_editFormatByWord
		},
		bolder:{
			TOOLTIP:     'Текст жирным',
			CAPTION: '&lt;strong&gt;жирно&lt;/strong&gt;',
			syntax:  &quot;++user_text++&quot;,
			hint:		 'bold_text',
			HANDLER:    wikibar_editFormatByWord
		},
		italic:{
			TOOLTIP:    'Текст курсивом',
			CAPTION: '&lt;em&gt;курсив&lt;/em&gt;',
			syntax: '\/\/user_text\/\/',
			hint:		'italic_text',
			HANDLER: wikibar_editFormatByWord
		},
		underline:{
			TOOLTIP:    'underline text',
			CAPTION: '&lt;u&gt;подчеркнуто&lt;/u&gt;',
			syntax: '__user_text__',
			hint:		'underline_text',
			HANDLER: wikibar_editFormatByWord
		},
		strikethrough:{
			TOOLTIP:    'strikethrough text',
			CAPTION: '&lt;strike&gt;зачеркнуто&lt;/strike&gt;',
			syntax: '==user_text==',
			hint:		'strikethrough_text',
			HANDLER: wikibar_editFormatByWord
		},
		superscript:{
			TOOLTIP:    'superscript text',
			CAPTION: 'X&lt;sup&gt;верхний индекс&lt;/sup&gt;',
			syntax: '^^user_text^^',
			hint:		'superscript_text',
			HANDLER: wikibar_editFormatByWord
		},
		subscript:{
			TOOLTIP:    'subscript text',
			CAPTION: 'X&lt;sub&gt;нижний индекс&lt;/sub&gt;',
			syntax: '~~user_text~~',
			hint:		'subscript_text',
			HANDLER: wikibar_editFormatByWord
		},
		comment:{
			TOOLTIP:    'comment text',
			CAPTION: 'комментарий',
			syntax: '/%user_text%/',
			hint:		'comment_text',
			HANDLER: wikibar_editFormatByWord
		},
		monospaced:{
			TOOLTIP:    'monospaced text',
			CAPTION: '&lt;code&gt;моноширинный&lt;/code&gt;',
			syntax: '{{{user_text}}}',
			hint:		'monospaced_text',
			HANDLER: wikibar_editFormatByWord
		}
  },
  paragraph:{
    TYPE: 'MENU',
    TOOLTIP: 'форматирование абзацев',
    list:{
      TYPE: 'MENU',
      TOOLTIP: 'list tools',
      bullet:{
  			TOOLTIP:    'bullet point',
  			syntax: '*user_text',
  			hint:		'bullet_text',
  			HANDLER: wikibar_editFormatByLine
  		},
  		numbered:{
  			TOOLTIP:    'numbered list',
  			syntax: '#user_text',
  			hint:		'numbered_text',
  			HANDLER: wikibar_editFormatByLine
  		}
    },
    heading:{
      TYPE: 'MENU',
      heading1:{
  		  CAPTION:'&lt;h1&gt;Heading 1&lt;/h1&gt;',
  			TOOLTIP:    'Heading 1',
  			syntax: '!user_text',
  			hint:		'heading_1',
  			HANDLER: wikibar_editFormatByLine
  		},
  		heading2:{
  		  CAPTION:'&lt;h2&gt;Heading 2&lt;h2&gt;',
  			TOOLTIP:    'Heading 2',
  			syntax: '!!user_text',
  			hint:		'heading_2',
  			HANDLER: wikibar_editFormatByLine
  		},
  		heading3:{
  		  CAPTION:'&lt;h3&gt;Heading 3&lt;/h3&gt;',
  			TOOLTIP:    'Heading 3',
  			syntax: '!!!user_text',
  			hint:		'heading_3',
  			HANDLER: wikibar_editFormatByLine
  		},
  		heading4:{
  		  CAPTION:'&lt;h4&gt;Heading 4&lt;/h4&gt;',
  			TOOLTIP:    'Heading 4',
  			syntax: '!!!!user_text',
  			hint:		'heading_4',
  			HANDLER: wikibar_editFormatByLine
  		},
  		heading5:{
  		  CAPTION:'&lt;h5&gt;Heading 5&lt;/h5&gt;',
  			TOOLTIP:    'Heading 5',
  			syntax: '!!!!!user_text',
  			hint:		'heading_5',
  			HANDLER: wikibar_editFormatByLine
  		}
    },
    comment:{
      TYPE: 'MENU',
      commentByLine:{
  			CAPTION:'comment by line',
  			TOOLTIP:    'line comment',
  			syntax: '/%user_text%/',
  			hint:		'comment_text',
  			HANDLER: wikibar_editFormatByLine
  		},
  		commentByBlock:{
  			CAPTION:'comment by block',
  			TOOLTIP:    'block comment',
  			syntax: '/%\nuser_text\n%/',
  			hint:		'comment_text',
  			byBlock: true,
  			HANDLER: wikibar_editFormatByLine
  		}
    },
    monospaced:{
      TYPE: 'MENU',
  		monosByLine:{
  			CAPTION: 	'monospaced by line',
  			TOOLTIP:    'line monospaced',
  			syntax: '{{{\nuser_text\n}}}',
  			hint:		'monospaced_text',
  			HANDLER: wikibar_editFormatByLine
  		},
  		monosByBlock:{
  			CAPTION: 	'monospaced by block',
  			TOOLTIP:    'block monospaced',
  			syntax: '{{{\nuser_text\n}}}',
  			hint:		'monospaced_text',
  			byBlock: true,
  			HANDLER: wikibar_editFormatByLine
  		}
    },
    quote:{
      TYPE: 'MENU',
  		quoteByLine:{
  			CAPTION: 	'quote by line',
  			TOOLTIP:    'line quote',
  			syntax: '&gt;user_text',
  			hint:		'quote_text',
  			HANDLER: wikibar_editFormatByLine
  		},
  		quoteByBlcok:{
  			CAPTION: 	'quote by block',
  			TOOLTIP:    'block quote',
  			syntax: '&lt;&lt;&lt;\nuser_text\n&lt;&lt;&lt;',
  			hint:		'quote_text',
  			byBlock: true,
  			HANDLER: wikibar_editFormatByLine
  		}
    },
    plugin:{
      TYPE: 'MENU',
      code:{
  			CAPTION: 	'code area',
  			TOOLTIP:    'block monospaced for plugin',
  			syntax: '\n\/\/{{{\nuser_text\n\/\/}}}\n',
  			hint:		'monospaced_plugin_code',
  			byBlock: true,
  			HANDLER: wikibar_editFormatByLine
  		},
  		commentByLine:{
  			CAPTION: 	'comment by line',
  			TOOLTIP:    'line comment',
  			syntax: '\/\/user_text',
  			hint:		'plugin_comment',
  			HANDLER: wikibar_editFormatByLine
  		},
  		commentByBlock:{
  			CAPTION: 	'comment by block',
  			TOOLTIP:    'block comment',
  			syntax: '\/\***\nuser_text\n***\/',
  			hint:		'plugin_comment',
  			byBlock: true,
  			HANDLER: wikibar_editFormatByLine
  		}
    },
    css:{
      TYPE: 'MENU',
      code:{
  			CAPTION: 	'code area',
  			TOOLTIP:    'block monospaced for css',
  			syntax: '\n\nuser_text\n\n',
  			hint:		'monospaced_css_code',
  			byBlock: true,
  			HANDLER: wikibar_editFormatByLine
  		},
  		commentByLine:{
  			CAPTION: 	'comment by line',
  			TOOLTIP:    'line comment',
  			syntax: '',
  			hint:		'css_comment',
  			HANDLER: wikibar_editFormatByLine
  		},
  		commentByBlock:{
  			CAPTION: 	'comment by block',
  			TOOLTIP:    'block comment',
  			syntax: '',
  			hint:		'css_comment',
  			byBlock: true,
  			HANDLER: wikibar_editFormatByLine
  		}
    }
  },
  color:{
    TYPE: 'MENU',
    TOOLTIP: 'color tools',
    highlight:{
		  CAPTION:'highlight text',
			TOOLTIP:    'highlight text',
			syntax: '@@user_text@@',
			hint:		'highlight_text',
			HANDLER: wikibar_editFormatByWord
		},
		color:{
		  CAPTION:'text color',
			TOOLTIP:    'text color',
			hint:		'your_text',
			syntax: '@@color(%1):user_text@@',
			HANDLER:   wikibar_getColorCode,
			doMore: wikibar_editFormatByWord
		},
		bgcolor:{
		  CAPTION:'background color',
			TOOLTIP:    'background color',
			hint:		'your_text',
			syntax: '@@bgcolor(%1):user_text@@',
			HANDLER: wikibar_getColorCode,
			doMore: wikibar_editFormatByWord
		},
		colorcode:{
      CAPTION:'color code',
      TOOLTIP:    'insert color code',
      syntax: '%1',
      HANDLER: wikibar_getColorCode,
      doMore: wikibar_editFormatByCursor
    },
    'color palette':{
      TYPE:'MENU',
      DYNAITEM: wikibar_genPaletteSelector,
  		SEPERATOR:{},
  		morePalette:{
  		  CAPTION:'more palettes',
  		  TOOLTIP:'get more palettes',
  		  HANDLER: wikibar_getMorePalette
  		}
    }
  },
  link:{
    TYPE: 'MENU',
    TOOLTIP: 'insert link',
    wiki:{
		  CAPTION:'wiki link',
			TOOLTIP:    'wiki link',
			syntax: '[[user_text]]',
			hint:		'wiki_word',
			HANDLER: wikibar_editFormatByWord
		},
		pretty:{
			CAPTION: 	'pretty link',
			TOOLTIP:    'pretty link',
			syntax: '[[user_text|%1]]',
			hint:		'pretty_word',
			param:	'PrettyLink Target',
			HANDLER:   wikibar_getLinkUrl,
			doMore: wikibar_editFormatByWord
		},
		url:{
			TOOLTIP:    'url link',
			syntax: '[[user_text|%1]]',
			hint:		'your_text',
			param:	'http:\/\/...',
			HANDLER:   wikibar_getLinkUrl,
			doMore: wikibar_editFormatByWord
		},
		image:{
			TOOLTIP:    'image link',
			syntax: '[img[user_text|%1]]',
			hint:		'alt_text',
			param:	'image/icon.jpg',
			HANDLER:   wikibar_getLinkUrl,
			doMore: wikibar_editFormatByWord
		}
  },
  macro:{},
  more:{
    TYPE: 'MENU',
    TOOLTIP: 'more tools',
    table:{
      TYPE: 'MENU',
      TOOLTIP: 'table',
      table:{
  		  CAPTION:'create table',
  			TOOLTIP:    'create a new table',
  			syntax: '\n%1\n',
  			HANDLER: wikibar_getTableRowCol,
  			doMore: wikibar_editFormatByWord
  		},
  		header:{
  			TOOLTIP:    'table header text',
  			syntax: '|user_text|c',
  			hint:		'table_header',
  			HANDLER: wikibar_editFormatByWord
  		},
  		cell:{
  			TOOLTIP:    'create a tabel cell',
  			syntax: '|user_text|',
  			hint:		'your_text',
  			HANDLER: wikibar_editFormatByWord
  		},
  		columnHeader:{
  		  CAPTION:'column header',
  			TOOLTIP:    'create a column header cell',
  			syntax: '|!user_text|',
  			hint:		'column_header',
  			HANDLER: wikibar_editFormatByWord
  		},
  	  cell:{
  	    TYPE: 'MENU',
        CAPTION: 'cell options',
    		bgcolor:{
    			CAPTION: 	'background color',
    			TOOLTIP:    'cell bgcolor',
    			syntax: '|bgcolor(%1):user_text|',
    			hint:		'your_text',
    			HANDLER: wikibar_getColorCode,
    			doMore: wikibar_editFormatByTableCell
    		},
    		alignLeft:{
    			CAPTION: 	'align left',
    			TOOLTIP:    'left align cell text',
    			syntax: '|user_text|',
    			hint:		'your_text',
    			HANDLER: wikibar_editFormatByTableCell
    		},
    		alignCenter:{
    			CAPTION: 	'align center',
    			TOOLTIP:    'center align cell text',
    			syntax: '| user_text |',
    			hint:		'your_text',
    			HANDLER: wikibar_editFormatByTableCell
    		},
    		alignRight:{
    			CAPTION: 	'align right',
    			TOOLTIP:    'right align cell text',
    			syntax: '| user_text|',
    			hint:		'your_text',
    			HANDLER: wikibar_editFormatByTableCell
    		}
    	}
    },
    html:{
      TYPE: 'MENU',
      html:{
  			CAPTION: 	'&amp;lt;html&amp;gt;',
  			TOOLTIP:    'html tag',
  			syntax: '&lt;html&gt;\nuser_text\n&lt;/html&gt;',
  			hint:		'html_content',
  			byBlock: true,
  			HANDLER: wikibar_editFormatByLine
  		}
    }
  },
  addon:{
    TYPE: 'MENU',
    TOOLTIP:'3rd party tools',
    'about addons':{
      TOOLTIP: 'list loaded addons',
      HANDLER: wikibar_doListAddons
    },
    SEPERATOR:{}
  }
};
addEvent(document, 'click', wikibarColorTool.onDocumentClick);
addEvent(document, 'click', wikibarPopup.onDocumentClick);
wikibar_install();
//}}}</pre>
</div>
<div title="diceRoller" creator="RainSkylark" modifier="RainSkylark" created="201302040523" modified="201202150219" tags="systemConfig excludeLists" changecount="10">
<pre>/***
|''Name:''|diceRoller|
|''Version:''|0.5.0|
|''Author:''|Daniel Baird (DanielBaird@gmail.com)|
|''Source:''|http://danielbaird.com/tiddlywinks/|
|''Type:''|Plugin|
!Description
{{{&lt;&lt;dice&gt;&gt;}}} for 3d6
{{{&lt;&lt;dice }}}//{{{specifier}}}//{{{ [}}}//{{{options}}}//{{{]&gt;&gt;}}} where specifier is something like 3d6, 1d4+1, 2d10-5
{{{&lt;&lt;dice fudge [}}}//{{{options}}}//{{{]&gt;&gt;}}} will roll 3 fudge dice (a fudge die gives -1, 0, or +1)
options can be zero or more of the following:
* show:eachface
** shows the face of each die rolled, then the total (not yet implemented)
* show:eachroll
** shows the number on each die rolled, then the total (default)
* show:result
** shows just the total result of the roll
* initialroll:yes
** do a roll when initially displayed
* initialroll:no
** don't roll until the user says so (default)
* rollby:click
** user clicks anywhere on the diceroller area to roll
* rollby:link
** user clicks an underlined link to roll (default)
* rollby:button
** user clicks a button to roll

!Examples

{{{&lt;&lt;dice&gt;&gt;}}}
&lt;&lt;dice&gt;&gt;
{{{&lt;&lt;dice 3d6+2 rollby:button&gt;&gt;}}}
&lt;&lt;dice 3d6+2 rollby:button&gt;&gt;
{{{&lt;&lt;dice fudge initialroll:yes rollby:click&gt;&gt;}}}
&lt;&lt;dice fudge initialroll:yes rollby:click&gt;&gt;

!Code
***/
//{{{
version.extensions.dice = {major: 0, minor: 5, revision: 0};

config.macros.dice = {};

config.macros.dice.handler = function(place,macroName,params) {

    var rolldesc = params[0];
    if (rolldesc == undefined) rolldesc = '3d6';

	var options = '';
    if (params.length &gt; 1) {
		params.shift();
    	options = params.join(' ');
	}

    var thisDiceRoller = new DiceRoller();
    createTiddlyElement(place, 'div', thisDiceRoller.id, null, 'If you see this, DiceRoller is broken.  Let Daniel know (DanielBaird at gmail dot com).');
    thisDiceRoller.newDice(rolldesc, options);
}
// =======================================================================
function DiceRoller() {
	this.idprefix =  'dice';
    this.version = '0.5 beta';
    this.id = this.idprefix + DiceRoller.prototype.nextid;
    DiceRoller.prototype.nextid++;
    return this;
}
// -----------------------------------------------------------------------
DiceRoller.prototype.nextid = 0;
// -----------------------------------------------------------------------
DiceRoller.prototype.newDice = function(rolldesc, options) {

	this.error = null;
	this.initialroll = false;
	this.display = 'eachroll';
	this.rolltag = 'roll';
	this.rollagaintag = 'roll again';
	this.rollby = 'link';
	this.parseDesc(rolldesc);
	this.parseOpts(options);
	if (this.initialroll) this.rollDice();
	this.drawRoller();
// ^^^^^^^^^^^^^ new stuff above.. ^^^^^^^^^^^^^
//    this.rolls = rolls;

//    this.resultDisplay = 'dice';
//    if (resultDisplay != null)	this.resultDisplay = resultDisplay;

//    this.resultSystem = 'sum';
//    if (resultSystem != null)	this.resultSystem = resultSystem;

//    this.sides = 6;
//    this.createDice();
//	this.roll();
}
// -----------------------------------------------------------------------
DiceRoller.prototype.parseDesc = function(desc) {
	this.rollstr = desc;
	desc = desc.toLowerCase();
	this.dicetype = 'standard';
	this.adjuster = null;
	if (desc == 'fudge') {
		// 'fudge' system: 3d3, where the d3 gives -1, 0 or +1
		this.dicetype = 'fudge';
		this.dicesides = 3;
		this.rollcount = 3;
	} else {
		// normal system: eg 3d6+2
		var reg = /(\d+)d(\d+)(\+(\d+)|-(\d+))?/;
		var info = desc.match(reg);
		this.rollcount = parseInt(info[1]);
		this.dicesides = parseInt(info[2]);
		this.adjuster = parseInt(info[3]);
		if ( isNaN(this.adjuster) ) this.adjuster = 0;
	}
}
// -----------------------------------------------------------------------
DiceRoller.prototype.parseOpts = function(options) {
	this.optstr = options;
	options = ' ' + options + ' ';
	if (options.indexOf(' show:eachface ') != -1) this.display = 'eachface';
	if (options.indexOf(' show:eachroll ') != -1) this.display = 'eachroll';
	if (options.indexOf(' show:result ') != -1) this.display = 'result';

	if (options.indexOf(' initialroll:yes ') != -1) this.initialroll = true;
	if (options.indexOf(' initialroll:no ') != -1) this.initialroll = false;

	if (options.indexOf(' rollby:click ') != -1) this.rollby = 'click';
	if (options.indexOf(' rollby:link ') != -1) this.rollby = 'link';
	if (options.indexOf(' rollby:button ') != -1) this.rollby = 'button';
}
// -----------------------------------------------------------------------
DiceRoller.prototype.createDice = function() {
    this.results = new Array(this.rolls);
    this.result = 0;
    this.showDice();
}
// -----------------------------------------------------------------------
DiceRoller.prototype.drawRoller = function() {
    var node = document.getElementById(this.id);
	if (this.display == 'eachface') node.innerHTML = this.drawRollerEachFace();
	if (this.display == 'eachroll') node.innerHTML = this.drawRollerEachRoll();
	if (this.display == 'result') node.innerHTML = this.drawRollerResult();

    // getClickHandler() is a function that returns a function.. JS is sweet huh
    if (this.rollby == 'click') {
		node.onclick = this.getClickHandler();
	} else {
		document.getElementById(this.id + '_roll').onclick = this.getClickHandler();
	}
	/*
    var html = '';

	if (this.display == 'eachface')

    html += '&lt;table class=&quot;diceroller&quot;&gt;';
    html += '&lt;tr&gt;';

	if (this.resultDisplay == 'text') {
		html.push('&lt;td&gt;You rolled ');
	}
	if (this.resultDisplay != 'textsummary') {
		var separator = '';
		for (var roll = 0; roll &lt; this.rolls; roll++) {
			html.push( separator + this.drawDie(roll) );
			if (this.resultDisplay == 'text')	separator = ', ';
		}
		html.push('&lt;td&gt;');
	}
    if (this.resultSystem == 'fudge') {
	var resprefix = '';
	if (this.result &gt; 0) resprefix = '+';
	html.push('Result is ' + resprefix + this.result + '.&lt;br /&gt;Click to roll again.&lt;/td&gt;');
    } else {
	html.push('&lt;td&gt;'+this.rolls+'d'+this.sides+': you rolled ' + this.result + '.&lt;br /&gt;Click to roll again.&lt;/td&gt;');
    }

    html += '&lt;/tr&gt;&lt;/table&gt;';
    node.innerHTML = html;
	*/
}
// -----------------------------------------------------------------------
DiceRoller.prototype.drawRollerResult = function() {
	var str = '';
	str += 'Rolling';
	str += ((this.dicetype == 'fudge')?(':'):(' ' + this.rollstr + ':'));
	if (this.result != undefined) {
		str += 'You rolled &lt;strong&gt;';
		str += ((this.dicetype == 'fudge')?(this.addSign(this.result)):(this.result));
		str += '&lt;/strong&gt;.';
	}
	str += this.makeRollTrigger();
	return str;
}
// -----------------------------------------------------------------------
DiceRoller.prototype.drawRollerEachRoll = function() {
	var str = '';
	str += 'Rolling';
	str += ((this.dicetype == 'fudge')?(':'):(' ' + this.rollstr + ':'));
	if (this.result != undefined) {
		str += ' You rolled ';
		var joiner = '';
		for (var r = 0; r &lt; this.rollcount; r++) {
			str += joiner + ((this.dicetype == 'fudge')?(this.addSign(this.results[r])):(this.results[r]));
			joiner = ', ';
		}
		str += ' totalling &lt;strong&gt;';
		str += ((this.dicetype == 'fudge')?(this.addSign(this.result)):(this.result));
		str += '&lt;/strong&gt;.';
	}
	str += this.makeRollTrigger();
	return str;
}
// -----------------------------------------------------------------------
DiceRoller.prototype.addSign = function(num) {
	return ( ((parseInt(num) &gt; 0)?('+'):('')) + (num) );
}
// -----------------------------------------------------------------------
DiceRoller.prototype.makeRollTrigger = function() {
	var tag = ((this.result == undefined)?(this.rolltag):(this.rollagaintag));
	if (this.rollby == 'click')  return ' Click to ' + tag + '.';
	if (this.rollby == 'link')   return ' &lt;a style=&quot;text-decoration: underline&quot; href=&quot;#&quot; id=&quot;' + this.id + '_roll&quot;&gt;' + tag + '&lt;/a&gt;';
	if (this.rollby == 'button') return ' &lt;button id=&quot;' + this.id + '_roll&quot;&gt;' + tag + '&lt;/button&gt;';
}
// -----------------------------------------------------------------------
DiceRoller.prototype.drawDie = function(roll) {
    var html = new Array();

	if (this.resultDisplay == 'text') {
		if (this.resultSystem == 'fudge' &amp;&amp; this.results[roll] &gt; 0) html.push('+');
		html.push(this.results[roll]);
	} else {
		html.push('&lt;td class=&quot;die&quot;&gt;');

		//there are seven possible dot positions
		var dots = Array();
		for (var dot = 0; dot &lt; 7; dot++) {
			dots.push('&amp;nbsp;');
		}
		if ( this.results[roll] ) {
			if (this.results[roll] &gt; 1) dots[0] = 'O';
			if (this.results[roll] &gt; 3) dots[1] = 'O';
			if (this.results[roll] == 6) dots[2] = 'O';
			if (this.results[roll]%2 == 1) dots[3] = 'O';
			if (this.results[roll] == 6) dots[4] = 'O';
			if (this.results[roll] &gt; 3) dots[5] = 'O';
			if (this.results[roll] &gt; 1) dots[6] = 'O';
		}
		var pipe = '|';
		var space = '&amp;nbsp;';
		if (this.resultDisplay == 'dice') {
			html.push(',-----.&lt;br /&gt;');
			html.push(pipe + space + dots[0] + space + dots[1] + space + pipe + '&lt;br /&gt;');
			html.push(pipe + space + dots[2] + dots[3] + dots[4] + space + pipe + '&lt;br /&gt;');
			html.push(pipe + space + dots[5] + space + dots[6] + space + pipe + '&lt;br /&gt;');
			html.push('`-----\'&lt;br /&gt;');
		} else if (this.resultDisplay == 'compact') {
			html.push(dots[0] + space + dots[1] + '&lt;br /&gt;');
			html.push(dots[2] + dots[3] + dots[4] + '&lt;br /&gt;');
			html.push(dots[5] + space + dots[6] + '&lt;br /&gt;');
		}
		html.push('&lt;/td&gt;');
	}
    return html.join('');
}
// -------------------------------------------------------------------
DiceRoller.prototype.rollDice = function() {
	this.result = this.adjuster;
	this.results = new Array(this.rollcount);
	for (var roll = 0; roll &lt; this.rollcount; roll++) {
		this.results[roll] = Math.floor((this.dicesides)*Math.random())+1;
		if (this.dicetype == 'fudge') {
			this.results[roll] -= 2;
		}
		this.result += this.results[roll];
	}
	this.drawRoller();
}
// -----------------------------------------------------------------------
DiceRoller.prototype.getClickHandler = function() {
	// trickey bit.. first make a local var that references the
	// current dice roller object, then return an anonymous function
	// that calls that object's roll() method.  woot for closures!
	var thisroller = this;
	return function(e) {
		thisroller.rollDice();
		return false;
	};
}
// =======================================================================
setStylesheet(
	&quot;.viewer table.diceroller, .viewer table.diceroller tr { &quot;+
		&quot;border: none;&quot; +
	&quot;} \n&quot;+

	&quot;.viewer table.diceroller tr td { &quot;+
		&quot;border: none; &quot; +
	&quot;} \n&quot;+

	&quot;.viewer table.diceroller td.die { &quot;+
		&quot;padding: 0.5em; &quot; +
		&quot;font-family: monospace; &quot; +
		&quot;line-height: 0.95em; &quot; +
	&quot;} \n&quot;+

	&quot;&quot;,
	&quot;DiceRoller&quot;);


//}}}</pre>
</div>
<div title="saveAndReloadPlugin" creator="RainSkylark" modifier="RainSkylark" created="201301280053" modified="201202150225" tags="systemConfig excludeLists" changecount="9">
<pre>/***
|''Name:''|saveAndReloadPlugin|
|''Version:''|1.0.1 (11-Oct-2005)|
|''Author:''|SimonBaird|
|''Type:''|Plugin|
|''Description''|Save and Reload - add macros {{{ &lt;&lt;saveAndReload&gt;&gt; }}} anywhere.|

!Code
***/
//{{{
config.macros.saveAndReload = {};
config.macros.saveAndReload.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
        var label = params[0]||&quot;Save &amp; Reload&quot;;
        var tooltip = params[1]||&quot;Save &amp; reload&quot;;
        createTiddlyButton(place,label,tooltip,this.onclick);
}
config.macros.saveAndReload.onclick = function()
{
       saveChanges();
       window.location.reload( false );
}

//}}}</pre>
</div>
<div title="Алкари" creator="OldYaga" modifier="OldYaga" created="201702211932" modified="201702222046" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\alkaris\alkaris_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Ареку" creator="OldYaga" modifier="OldYaga" created="201702212029" modified="201702241955" tags="Раса" changecount="10">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\areku\areku_img.jpg]]
----

''Краткое описание расы и место в мире''
Форма правления ареку — [[меритократия|https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D1%80%D0%B8%D1%82%D0%BE%D0%BA%D1%80%D0%B0%D1%82%D0%B8%D1%8F]]. Ареку создали гармоничное философское общество, уделяющее крайне мало внимания материальным ценностям отдельных субъектов. Главная причина - физиология, машины не нуждаются в еде или комфорте. Вопреки многим домыслам и суевериям, стать представителем этой расы можно только добровольно. Ареку презирают и искореняют рабство везде, где это возможно, поскольку персональная свобода самореализации является одной из их главных ценностей, наряду с профессионализмом, креативностью и сильной волей. Для этой расы характерно возведение любого занятия до уровня искусства, будь то математика, живопись, работа грузчика или кулинария. Ареку стремятся, чтобы все стороны совместных дел были в выигрыше. Для ареку это шахматная партия, в которой должны выиграть оба игрока.
Однако, у ареку есть и тёмная сторона, о которой не принято говорить открыто. В связи с табу на нарушение личной свободы самореализации, встречаются среди ареку и &quot;злые гении&quot;, опасность которую они представляют выше, чем у какой бы то ни было расы.
По отношению к другим живым существам ареку неагрессивны, любопытны и следуют следующему высказыванию: &quot;Любая жизнь - это вопрос заданный Космосу. Если прервать её - мы никогда не узнаем ответа.&quot; Однако, миролюбивые ареку могут быть смертельно опасны для любого, кто сочтёт их безобидными. Они обладают не самым большим, но крайне профессиональным и технологически оснащённым флотом. Ареку специализируются на &quot;невозможных&quot; проектах - шагнувших за грань передовых исследованиях и масштабных (уровень строительства искусственных миров) проектах. Все ареку — мультиспециалисты высочайшего уровня, к примеру, один ареку часто совмещает 3-4 специальности необходимых для проектов высочайшего уровня.

''Физиология''
Ареку - это не ВЛ (виртуальная личность), не набор сложных схем, а свободно существующие в пространстве названном инфосферой потрясающе сложные программные модули, представляющие собой &quot;перенесённых&quot; в цифровой вид разумных существ различных рас. Каждый ареку «записан» на особый тип носителя — специальный кристалл. Такие кристаллы используются при необходимости личного присутствия ареку где бы то ни было, к примеру, во время путешествий. Зачастую кристалл помещается внутри внешнего искусственного тела. При жизни в родных поселениях ареку перемещает свое сознание в кристаллы более высокого порядка, объединяющие сотни ареку.
Ареку не рождаются естественным образом (рождение внутри инфосферы), хотя нет свидетельств того, что это невозможно, однако, их численность неуклонно растёт благодаря притоку неофитов из числа всех рас известного космоса. Они принимают всех, но не все проходят через &quot;перенос&quot; - копирование на искусственный носитель. &quot;Перенос&quot; или &quot;транслирование&quot; - технология которой обладают только ареку.

''История''
По некоторым данным в появлении ареку приняли непосредственное участие тоссы. Существует две версии:
*тоссы снабдили представителей вымирающих из-за генетического вырождения существ системами поддержания жизни, впоследствии ставшие их телами. Однако, эти меры хоть и замедлили вымирание, но не прекратили его, поэтому ареку самостоятельно решились на экстремальный шаг - полный перенос сознания на искусственный носитель. До сих пор философы многих рас спорят о том, действительно ли это перенос &quot;души&quot; и обретение бессмертия через слияние с машиной или просто рождение ареку через смерть разумного живого существа
*тоссы создали машины, контролируемые с помощью прямого контакта разума оператора с инфопространством механизма. Неизвестно точно, как эти машины развили собственное сознание, поглотив разум оператора, сделав его ещё одним устройством своего &quot;тела, или в результате слияния копии информации, оставленной оператором в процессе взаимодействия, скорее всего составных компонентов личности, с программным кодом машины и последующим развитием  персональных личностных характеристик

''Шаблон расы в GURPS''</pre>
</div>
<div title="Броня" creator="OldYaga" modifier="OldYaga" created="201702251116" tags="Правила" changecount="1">
<pre>Type the text for 'Броня'</pre>
</div>
<div title="Булрати" creator="OldYaga" modifier="OldYaga" created="201702211937" modified="201702222046" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\bulrathi\bulrathi_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Воотлары" creator="OldYaga" modifier="OldYaga" created="201702242040" modified="201702242042" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\wootlars\wootlars_img.png]]
----

''Краткое описание расы и место в мире''
Воотлары (Wootlars) - они же юданианцы (Yudanians) высокие двуногие гуманоиды, густо покрытые шерстью, обитающие на планете Юда. Это довольно миролюбивая раса, крайне редко встречающаяся на просторах Вселенной. Простому обывателю мало что о них известно. Присутствуют факты, что особи этой расы встречались среди правительства, контрабандистов, а также в рядах ученых и исследователей. Занимаются торговлей, наукой, политикой, туризмом и транспортным производством. Много деятелей искусств.

''Физиология''
Средний рост: 1,9-2,4 метра.
Цвет шерсти/волос: черный, серый, коричневый, болотно-зеленый, белый, пестрый, соломенный (зависит от ареала обитания).
Цвет кожи: тот же, что и волос, но светлее.
Отличительные черты: высокие, на 3/4 покрыты шерстью, когти на лапах, глаза с тремя зрачками, долгожители.
Планета происхождения: Юда (Yuda).
Язык: воотруук (Wootruuk).

Естественная среда обитания для воотлар - плотные леса, прибрежные зоны и гористые местности. В зависимости от места обитания у особи меняется качество шерстного покрова, окрас, даже комплекция. Отличительные черты всех воотлар - рост, шерсть и когти. Взрослые особи достигают двух метров в высоту, но чаще всего они сутулы и даже сгорбленный. У них очень мощные дистальные части конечностей. Предплечья и голени объемные, имеют три кости в своем скелете. На ладонях и ступнях расположены мощные когти, позволяющие легко карабкаться по всевозможным поверхностям и охотится. Хотя строение когтей довольно необычно. Их когти острые, толстые и заменяют две фаланги в пальцах. Вопреки всеобщему мнению, воотлары прекрасно управляются когтями с любой работой, даже самой ювелирной. У них довольно крепкие челюсти, снабженные двумя рядами зубов (внешний острый ряд и внутренний жевательный). Воотлары, к тому же, очень гибкие и ловкие. Могут быстро передвигаться на 4 конечностях, хотя сейчас такое встречается только в самых глухих поселениях. Так как эти гуманоиды не имеют отпечатков пальцев, для идентификации можно использовать особый рисунок носовых зеркал. Шерсть в обычном климате плотная и шелковистая, средней длины. Не покрытыми ею остаются только внутренние части рук, ног, шея, лицо, иногда грудь и живот. В холодном климате воотлары полностью покрываются длинной и плотной шерстью (порой, та закрывает даже лицо), а в жарком наоборот, сильно линяют, и их покров становится тонким и гладким. На подошвенной поверхности у них очень длинная шерсть, которая играет роль своеобразной подошвы и работает по разному в зависимости от ситуации. Помимо всего, благодаря подошвенному меху они передвигаются невероятно тихо, а при желании и бесшумно.

Воотлары достаточно легко могут выучить новые языки, к тому же особое строение голосовых связок позволяет воспроизводить практически любые звуки. У них довольно большие и подвижные уши, а также невероятно острый слух. Еще одной отличительной способностью этой расы являются их огромные глаза и напряженный немигающий взгляд, который все описывают как &quot;совиный&quot;. Глаза почти полностью представлены радужкой самых разнообразных цветов и имеют три зрачка, которые расширяются всегда попарно. Воотлары - отличные пловцы и альпинисты. У них хорошее чувство пространства и равновесия.
Между собой воотлары предпочитают общаться или на родном языке – воотрууке, или сложной системой сигналов из феромонов, голосовых вибраций (вроде урчания, шипения и иных звуков) и движений ушами. Особое значение гуманоиды придают и языку тела. Воотруук может показаться сложным для изучения, так как содержит в себе звуки и сочетания букв, которые не каждая раса сможет воспроизвести. Но понимать его гораздо проще, чем разговаривать на нем. Письменность представлена иероглифами, состоящими из групп точек и линий. Сложность в восприятии письменности состоит в том, что отдельные иероглифы часто складываются в один символ, который может вмещать в себе до нескольких предложений. Читать подобные иероглифы следует в определенной последовательности, чтобы не потерять или не исказить смысл написанного.

Имеются небольшие видовые различия между воотларами.
Лесные народы полностью соответствуют стандартному описанию воотлара, разве что их шерсть не окрашена в светлые и очень темные тона.
Особи обитающие около воды и в подводных пещерах - самые высокие, худые, у них более скудный шерстный покров. Их уши немного меньше, чем у их лесных или горных собратьев и больше повернуты к черепу, менее подвижны. Оттенки их шерсти состоят из темных, черных или болотных оттенков. Также они довольно тихие и, наверное, самые мирные и даже пугливые из своей расы.
Горные виды самые низкие, мускулистые и покрытые плотной шубой меха. У них небольшие уши, которые часто не видно под прической, однако, у них самые крупные глаза и самые мощные лапы. Они в основном серых и белых оттенков. Они довольно вспыльчивы и даже грубы.

Мужские особи выше женских. У всех воотлар спортивное телосложение и хорошо развитая мускулатура. Из-за их особого обмена веществ, они поголовно худые, и невозможно встретить тучного представителя расы (если, он, конечно, не болен чем-то). И мужчины, и женщины очень кичатся своими волосами, укладывают их в невообразимые прически и всячески украшают. У мужчин хорошо растет борода, а у женщин бакенбарды. Кроме украшения растительности на лице, они любят всевозможный пирсинг, а в больших городах появилась мода на модельное выстригание шерсти на теле.
Средняя продолжительность жизни - 400 лет. Дети после рождения быстро растут и взрослеют, но их физиологическое развитие несколько замедляется при достижении подросткового возраста. Совершеннолетним считается воотлар, которому исполнилось 40 лет.

По характеру довольно сдержаны и добры. Эти существа обладают природной эмпатией и чувством опасности. Они за несколько дней могут предчувствовать катаклизмы и бедствия, а также привыкли &quot;прощупывать местность&quot;, прежде чем действовать. Внимательны, особенно к мелочам. Проницательны и невероятно осторожны. С ними достаточно трудно вести дела. При всем своем любопытстве и живом интересе ко всему, они часто сомневаются в чем-либо, порой доходя до паранойи. Вывести воотлара из себя практически невозможно. Чтобы привести их в ярость нужно совершить что-то из ряда вон выходящее, вроде покушения или угрозы семье, навредить их обществу или нарушить какие-либо строгие правила, и т.д. Мало кто видел воотлара в ярости, и еще меньше выжило после этого. Считаются крайне миролюбивой расой со своими заскоками на счет вечных опасностей и правил. Они и правда стараются избегать конфликтов, решая проблемы тем или иным способом. Однако, у воотлар суровая система безопасности, представленная полицией, охранными предприятиями и даже армией, о которых мало что известно. Стараются применять оружие лишь в крайней ситуации. И даже если кто-то совершил что-то из ряда вон выходящее на планете - его просто усыпят мощными транквилизаторами, упакуют в стазисную камеру и выпроводят с планеты куда подальше, скорее всего без шанса вернуться обратно.

''История''
Несмотря на дикую внешность и несколько нелепое поведение, воотлары обладают развитым интеллектом и даже могут легко путешествовать в космосе, но часто боятся. Имеют страсть к накоплению и обработке информации, поэтому на их планете существуют огромные библиотеки всевозможных знаний. Среди воотлар много ценителей искусств: архитектуры, скульптуры, музыки, моды, живописи и многого другого. Пусть им и хорошо даются изобретательство, инженерия, разные естественные, гуманитарные  и технические науки, но с межвидовым общением у них крайне тяжело. К другим расам вотлраы относятся с недоверием и даже страхом. При свободной прогулке по городам, можно наткнуться на множество мест, где чужакам не рады и откажутся даже обслуживать или разговаривать. Но это связано в основном с тем, что хозяева этих мест боятся связываться с инопланетянами, часто попросту не зная, как себя с ними вести. И дабы избежать всевозможных конфликтов или нервирующего недопонимания, они скорее всего откажутся от контакта совсем. Хотя в деловых и туристических зонах воотлары стараются мирно уживаться с пришельцами, общаясь на равных. Также в этих зонах сильная система безопасности. Так как въезд на планету регламентирован, каждый пришелец есть у них в базе, а в случае каких-то провинностей – все регистрируются. Если накопить достаточное количество проступков, то при следующем посещении планеты получить пропуск будет очень сложно, а оказавшись в черном списке, можно и не получить вовсе. В деревни и далекие поселения попасть для гостей планеты совершенно нереально, если только не быть в хороших отношениях с правительством и какой-нибудь семьей. Но даже в этом случае увидеть далекие уголки их планеты скорее всего не удастся.

Чтобы попасть на Юду, необходимо подать целую кучу документов и заявлений, пройти пару собеседований с представителями государственных структур, и только после этого жаждущему выдадут временную туристическую (гостевую) визу. Эта виза позволяет посещать города и пригороды, а также курсировать между ними по специальным маршрутам. Первое посещение Юды ограничится двумя неделями, но если вы не оставили после себя проблем - сможете посещать планету чаще и оставаться дольше. Есть разновидность туристической визы - курортная. Она позволяет въехать на планету для отдыха или лечения в курортных зонах и свободно там находиться, с правом выезда в ближайшие города на определенное время. Существует также рабочий вариант пропуска на планету, но он еще строже, чем туристический или курортный, хотя получить его легче. В отличие от туристического, все ваше передвижение по планете регламентировано и отслеживается (не считая определенного &quot;личного времени&quot;). Время пребывая на планете при этом варианте строго ограничено самим рабочим маршрутом. Но можно его продлить в случае вынужденного пребывания для ремонта, дозаправки, медицинской помощи или по дополнительным делам (но для последних нужно заранее подать нужные документы). Также всем, кто прибыл на планету, вешается определенное устройство, которое прочно присасывается к коже или иной поверхности организма. В нем хранится вся информация о носителе, его счета и прочая информация. С помощью него можно расплатиться в торговых точках и за транспорт, вам могут оказать помощь в городе, в больнице или ином учреждении и прочее. Но стоит учитывать, что через это же устройство и фиксируются все нарушения и, возможно, маршруты. При попытке самостоятельно снять устройство, что довольно болезненно, или при выходе за дозволенные территории, вас тут же найдет представитель охраны. По отношению к воотларам режим довольно мягок. При возвращении на родную планету они лишь проходят небольшое собеседование и не носят подобных устройств ограничения передвижения.
Воотлары не любят покидать родную планету, и делают это только в торговых, политических или иных важных целях. Путешественников или контрабандистов среди этих гуманоидов можно по пальцам пересчитать. Чаще всего их называют &quot;сумасшедшими&quot;.

Не смотря на жесткие условия пребывания на Юде, планета довольно популярна в туристическом плане, славится своей архитектурой, культурными заведениями и библиотеками. Также на особенном месте стоит природа Юды - воотлары умудряются сохранять ее в прекрасном состоянии, мастерски балансируя между экологическим состоянием планеты и техническим прогрессом. Множество туристов прилетают сюда, чтобы полюбоваться шикарными видами природы, насладиться чистейшим воздухом и водой, пообщаться с экзотической расой и для обучения. Благо, воотлары охотно делятся знаниями в своих &quot;домах знаний&quot;. Тут можно полакомится разнообразной экзотической едой, закупиться фирменными пищевыми смесями и скафандрами, или же одеждой. На планете находится крупный транспортный центр. Здешние врачи знамениты своими протезами и реабилитационным лечением. Темная сфера Юды может обрадовать страждущих специфическим алкоголем, наркотиками и медицинскими процедурами. Одни из самых известных достопримечательностей: Центральный &quot;Дом знаний&quot;, подводный океанариум, водопады Модзю, река Жэйжэ, Музей звуков, Этнический музей, туристический научный комплекс, центральная площадь в городе Ха, торговая улица в городе Нок.

Воотлары живут большими семьями, часто состоящими из нескольких поколений. Обитают такие семьи в больших домах или системах квартир, которые больше напоминают улей. Дети чаще всего продолжают заниматься делом своих родителей и родственников. Крайне редко можно встретить &quot;отделившегося&quot; от клана воотлара, который сделал данный шаг не для создания новой семьи, а просто чтобы жить отдельно и самостоятельно. Но даже в данном случае, особи продолжают поддерживать отношения с кланом. Насколько известно, воотлары носят свое имя, и приставляют к нему приставку с именем семьи и/или клана. Например: &quot;Тосса из семьи Гай клана Джа&quot; или &quot;Чобид из клана Рого&quot;, но при общении с пришельцами подобное сокращается до &quot;Тосса Гай Джа&quot; и &quot;Чобид Рого&quot;. Для воотларов неприемлемы межвидовые отношения в любом виде.  

Юда - планета в системе BFS-02, третья от звезды HSTitS-2054 (или просто Титс-2054). Приблизительно 61% поверхности планеты занимает мировой океан, остальную часть поверхности занята континентами и островами. На материках расположены реки, озера, подземные воды и льды. Внутренние области Юды достаточно активны и представлены мантией, окружающей твердое ядро. Форма - геоид. Подводная поверхность гористая, а поверхность, не покрытая водой, включает горы, равнины, плоскогорья, леса, степи и др. У Юды 5 спутников, двое из которых (G-2 и G-2b) состоят из газа, двое (G-1 и G-4) представлены скоплением минералов и последний (G-3) скоплением регенерирующей субстанции, похожей на лед. Все спутники являются источниками полезных ископаемых и активно используются воотларами. Так же рядом с планетой имеется крупный порт и транспортный центр, в котором располагается таможня. Вокруг планеты расположена сеть охранных и научных станций, к тому же поддерживающих сенсорный щит вокруг планеты от незваных гостей и нежелательных вторжений. Небо на Юде почти всегда окрашено скорее в фиолетовый оттенок, нежели в голубой. Днем видно две газовые луны, а ночью три других. Планета достаточно урбанизирована, хотя все еще в отдалении от городов встречаются относительно &quot;дикие&quot; поселения. Воотлары стараются минимизировать влияние технологий на внешнюю среду и содержать экологию в хорошем состоянии. Опасные и тяжелые производства они изолируют от мест массового проживания народа и важных природных точек. На планете невообразимое множество флоры и фауны и воотлары стараются всячески оберегать большинство видов, даже опасных.

Известные представители:
*Чобид Рого - путешественник, ксенолог, лингвист
*Драгон Мон Ки - действующий лидер воотлар, политик
*Дезерт Крок Дайру - политик, министр в сфере международных отношений
*Ольвия Сади Руж - эпидемиолог, министр в сфере здравоохранения
*Мирабель Боа Ацилия - ученый биолог, один из основателей природоохранной системы планеты Юда
*Удвард Бон Клай - ученый-математик и генетик, в честь него назван главный университет на планете
*Мория Пелл - глава преступного мира Юды, мафиози
*Кавендишь Эмпо Ри - известный модельер и исследователь моды
*Френк Ло Эйс - архитектор, скульптор
*Веста Тесоро - художница-экспериментатор;

''Шаблон расы в GURPS''</pre>
</div>
<div title="Дарлок" creator="OldYaga" modifier="OldYaga" created="201702211944" modified="201702222048" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\darloks\darloks_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Дбигу" creator="OldYaga" modifier="OldYaga" created="201702212018" modified="201702222047" tags="Раса" changecount="2">
<pre>//Латинское описание расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\dbigu\dbigu_img.jpg]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Деньги" creator="OldYaga" modifier="OldYaga" created="201702221929" modified="201702221941" changecount="3">
<pre>|&gt;|&gt;| Начальное богатство |
| TL | Примеры | Начальное богатство |
| TL0 | Каменный век (доисторический период и далее). | $250 |
| TL1 | Бронзовый век (3500 лет до н.э. и позже). | $500 |
| TL2 | Железный век (1200 лет до н.э. и позже). | $750 |
| TL3 | Средневековье (600 г. н.э. и позже). | $1.000 |
| TL4 | Эпоха парусов (1450 г. и позже). | $2.000 |
| TL5 | Промышленный переворот (1730 г. и позже). | $5.000 |
| TL6 | Эпоха механики (1880 г. и позже). | $10.000 |
| TL7 | Атомная эпоха (1940 г. и позже). | $15.000 |
| TL8 | Цифровая эпоха (1980 г. и позже). | $20.000 |
| TL9 | Эпоха микротехники (2025 г. и позже?). | $30.000 |
| TL10 | Эпоха роботизации (2070 г. и позже?) | $50.000 |
| TL11 | Эпоха экзотических материалов. | $75.000 |
| TL12+ | Все что пожелает Мастер | $100.000 |

| Статус| Примеры | Расходы |
| 8 | Император, божественный правитель, владыка | $600.000.000 |
| 7 | Король, Папа, президент | $60.000.000 |
| 6 | Королевская семья, губернатор | $6.000.000 |
| 5 | Крупный дворянин, глава корпорации | $600.000 |
| 4 | Мелкий дворянин, депутат, видный деятель | $60.000 |
| 3 | Поместный рыцарь, цеховой Мастер, мэр мегаполиса | $12.000 |
| 2 | Безземельный рыцарь, мэр, директор предприятия | $3.000 |
| 1 | Оруженосец, торговец, священник, врач, советник | $1.200 |
| 0 | Вольный человек, подМастерье, обычный гражданин | $600 |
| -1 | Крепостной, бедный гражданин | $300 |
| -2 | Раб, бездомный | $100 |</pre>
</div>
<div title="Игровой устав" creator="OldYaga" modifier="OldYaga" created="201702221229" modified="201702221233" changecount="9">
<pre>''Что-то общее''

''Мы работаем на сюжет''. Все, что мешает нам в конкретный момент времени, должно быть отброшено, будь то ненужные правила, ругань, споры и проч.

''Мастер''

1. ''В моем мире будут реальные опасности'', но у персонажей есть здравый смысл, и я буду предупреждать игроков: «Это маловероятно», «ты точно собираешься разбудить древнего вампира, хотя сам неофит?», и в случае упорства или провала на проверке я с чистой совестью буду выписывать персонажу 10 кубов урона.
2. ''Мы бросаем не всегда''. Я требую броска только тогда, когда есть что терять, — ресурсы, время, репутацию и т.д. Да, это означает, что у персонажей в игре будет много автоуспехов без броска, с другой стороны я не буду стесняться давать штрафы при бросках.
3. ''Я не говорю просто «нет»'', я всегда говорю «нет, но» или «нет и» и проч., например, если бы игрок попросил меня сыграть киберниндзю в детективе по Детройту 1950-ых годов, я бы предложил ему сыграть агента КГБ, тренированного на проникновения и использование гаджетов, а если бы персонаж хотел собрать электронный микроскоп в постапокалипсисе, я могу сказать сходу «нет», но расскажу, где поискать нужные запчасти, кого и где спросить, кто поможет. Возможно, эту информацию тоже нужно будет искать.
4. ''Игра — командная''. Я буду объединять усилия персонажей в выполнении задач, удовольствие от командной работы - цель.
5. ''Мои миры — зеркало''. Персонажи — их часть, персонажи влияют на мир, а игроки видят результаты влияния.
6. ''Я постараюсь не убить персонажа сразу''. Если получилось, что персонаж мертв (HT не прокинул :), и если есть хотя бы призрачный шанс выжить, я предложу его с большой ценой для персонажа, оторванной рукой, к примеру. Да, поиск новой кибернетической руки — отличная идея для приключения.

''Игрок''

1. ''Я всегда говорю мастеру конечную цель своих действий''. Я не позволю себе запутать мастера своими действиями без объявления цели. Мастеру будет проще подсказать шаги решения (см. п.3 мастера), встроить мои идеи в сюжет, предостеречь от опасности (см. п.2 мастера) и проч.
2. ''Я играю не набор цифр и чисел'', мастер и так помнит кто что умеет. Я не прикасаюсь к кубам, пока не скажет мастер, большая часть ситуаций вообще не требует броска. Я не произношу фразы «я применяю навык», я просто рассказываю что я хочу сделать и описываю свои действия.
3. ''Я не спорю с мастером на игре'', вообще. Может быть я и заведу черную книжечку, куда буду записывать вопросы для обсуждения вне игры. У меня будет целая неделя, чтобы всласть поспорить. Тем более с пруфами это бодрее.
4. ''Игра командная''. Я буду объединять усилия персонажей в выполнении задач, удовольствие от командной работы — цель.</pre>
</div>
<div title="Инструменты" creator="OldYaga" modifier="OldYaga" created="201702250001" modified="201702250110" tags="Правила" changecount="43">
<pre>|&gt;|&gt;|&gt;|&gt;| !TL5-8 Mini-Tool Kit |
|&gt;|&gt;|&gt;|&gt;| This is a belt-sized tool kit. At TL7-8, it may contain a few small batteries. |
| !Skill | !Модификатор | !$ | !Масса | !LC |
| Electrician, Machinist, Armoury, Mechanic | -2 | $200 | 4 lbs. | 4 |
| Electronics Repair | -2 | $400 | 2 lbs. | 4 |
|&gt;|&gt;|&gt;|&gt;| !TL5-8 Portable Tool Kit |
|&gt;|&gt;|&gt;|&gt;| This is the standard tool kit – the type found in a toolbox behind a truck seat or under the kitchen sink. At the GM’s option, such kits may have a handful of small batteries at TL7-8. |
| Electrician, Machinist, Armoury, Mechanic | 0 / -2* | $600 | 20 lbs. | 4 |
| Electronics Repair | 0 / -2* | $1,200 | 10 lbs. | 4 |
|&gt;|&gt;|&gt;|&gt;| *-2 для других скиллов |
|&gt;|&gt;|&gt;|&gt;| !TL5-8 Workshop |
|&gt;|&gt;|&gt;|&gt;| This is an elaborate set of tools that fills a room. It has everything necessary for repairs or fabrication (welder, mill, lathe, etc.), including a wide range of materials and spare parts that can be tooled to specific requirements. Require external power. |
| Electrician, Machinist, Armoury, Mechanic | от +2 / от -2 до -5 **  | $15,000 | 2,000 lbs. | 4 |
| Electronics Repair | от +2 / от -2 до -5 ** | $30,000 | 500 lbs. | 4 |
|&gt;|&gt;|&gt;|&gt;| **от -2 до -5 для других скиллов |

|&gt;|&gt;|&gt;|&gt;|&gt;| !TL9-12 Mini-Toolkit |
|&gt;|&gt;|&gt;|&gt;|&gt;| This is a belt-sized tool kit. |
| !Skill | !Модификатор | !$ | !Масса | !Питание | !LC |
| Electrician, Machinist, Armoury, Mechanic | -2 | $200 | 4 lbs. | 5B/10 hr.* | 4 |
| Electronics Repair, Armoury (Force Shields), Mechanic (Micromachines or Nanomachines) | -2 | $400 | 2 lbs. | 5A/10 hr.* | 4 |
|&gt;|&gt;|&gt;|&gt;|&gt;| *даже без питания можно использовать для определенных видов работ |
|&gt;|&gt;|&gt;|&gt;|&gt;| !TL9-12 Portable Tool Kit |
|&gt;|&gt;|&gt;|&gt;|&gt;| This is the standard tool kit. Most examples fit in a heavy tool box or backpack. |
| Electrician, Machinist, Armoury, Mechanic | 0 / -2** | $600 | 20 lbs. | 10B/10 hr.** | 4 |
| Electronics Repair, Armoury (Force Shields), Mechanic (Micromachines or Nanomachines) | 0 / -2** | $1,200 | 10 lbs. | 10A/10 hr.** | 4 |
|&gt;|&gt;|&gt;|&gt;|&gt;| **-2 для других скиллов, даже без питания можно использовать для определенных видов работ |
|&gt;|&gt;|&gt;|&gt;|&gt;| !TL9-12 Portable Workshop |
|&gt;|&gt;|&gt;|&gt;|&gt;| An elaborate version of the portable tool kit. It has everything necessary for emergency repairs, plus a wide range of spare parts that can be tooled to specific requirements. It is a modular system that can be set up in any large vehicle or building; it takes an hour to pack or unpack. |
| Electrician, Machinist, Armoury, Mechanic | +1 / +2 / -2*** | $15,000 | 200 lbs. | 10C/100 hr.*** | 4 |
| Electronics Repair, Armoury (Force Shields), Mechanic (Micromachines or Nanomachines) | +1 / +2 / -2*** | $30,000 | 100 lbs. | 10B/100 hr.*** | 4 |
|&gt;|&gt;|&gt;|&gt;|&gt;| ***+1 в неразвернутом состоянии, +2 в развернутом, -2 без энергии для определенных видов работ |
|&gt;|&gt;|&gt;|&gt;|&gt;| !TL9-12 Robotic Workshop |
|&gt;|&gt;|&gt;|&gt;|&gt;|This automated workshop can attempt to fix any piece of broken or damaged equipment. It uses its sensors and programmed repair manuals to diagnose the problem, then repairs it with its tool-equipped manipulator arms. It has skill 13 in whatever skill and specialty the workshop is designed for; add +1 per TL over TL10. However, it can only maintain and repair devices that are in its database (or closely related). If the workshop encounters a problem it can’t fix, it calls for help using a built-in tiny radio.&lt;&lt;br&gt;&gt;    If a human technician is directing a robotic workshop, it is as good as a portable workshop, with an additional +1 bonus due to its extensive technical database and usefulness as an automated assistant. It is double the cost and weight of an equivalent workshop, and requires twice as many power cells; it has the same LC.|

|&gt;|&gt;| !Модификаторы снаряжения |
| !Название | !Описание | !$ |
| Без оборудования | -10 для технологических умений, -5 для других. | - |
| Импровизированное | -5 для технологических умений, -2 для других | - |
| Базовое | - | см. описание |
| Хорошего качества | +1 | х5 |
| Отличного качества | +2 | х20 |
| Лучшее, доступное на вашем TL | +TL/2, округляется вниз (минимум +2) | - |
| Не хватает важного элемента | -1 за каждый | - |
| Поврежденное оборудование | от -1 до -3 | - |</pre>
</div>
<div title="Камино" creator="OldYaga" modifier="OldYaga" created="201702212024" modified="201702222047" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\kamino\kamino_img.jpg]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Клакси" creator="OldYaga" modifier="OldYaga" created="201702211909" modified="201702222044" tags="Раса" changecount="19">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\klaxxi\klaxxi_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Команда" creator="OldYaga" modifier="OldYaga" created="201702251140" modified="201702251222" tags="НПС" changecount="19">
<pre>Гори  - молодой булрати, технарь 12, лазерные турели 12, зарплата 2%, инженерный отсек, заселился без барахла, расходы на жизнь 600$
Джошуа 622 - сайлонец, штурмовик 12, урон 5d, DR 25, 15 HP, планетолог 12, зарплата 3%, трюм, заселился без барахла, расходы на жизнь 600$
Шаккри - человек, военная, имплантанты рук, глаза, модно одета, штурмовик 12, урон 7d, DR 15, 12 HP, сенсорщик 12, зарплата 3%, мостик - сенсоры, заселилась с барахлом, расходы на жизнь 1200$
Ньюми Ре - листья, заселилась со своей экосистемой, техничка 12, боевая химия 12, зарплата 2,5%, кают-компания, заселилась с барахлом, расходы на жизнь 1200$
Рьян - молодой мрршан, одевается в джинсу, медик 12, зарплата 1%, медотсек, заселился без барахла, расходы на жизнь 600$
Квирк - сектоид, бегает от корпоративных агентов, клочник 13, штурмовик 13, урон 7d, DR 15, 10 HP, зарплата 3%, пульт системы маскировки, заселился с барахлом, расходы на жизнь 1200$
4 оператора на мостике - силикиод, водоросли, человек, камино, навыки 12, могут заменять пилота, навигатора и проч., зарплата по 2%, всего 8%, двое заселились с барахлом, расходы на жизнь 600$ на каждого
----

Итого:

*4 комбатанта

*зарплата всей команды 22,5%

*расходы на жизнь команды в день (путешествие меньше месяца)
**Гори - 20$
**Джошуа - 20$
**Шаккри - 40$
**Ньюми Ре - 40$
**Рьян - 20$
**Квирк - 40$
**команда на мостике - 80$
*Итого расходы на команду в день (путешествие меньше месяца) - 220$

*расходы на жизнь команды в день (путешествие больше месяца)
**Гори - 120$
**Джошуа - 120$
**Шаккри - 40$
**Ньюми Ре - 40$
**Рьян - 120$
**Квирк - 40$
**команда на мостике - 320$
*Итого расходы на команду в день (путешествие больше месяца) - 800$
----
Пасажир

Бел - ареку, имеет искусственное тело, торговый магнат, космоблогер, писатель, торговый магнат 15, медиа 15 + еще пару скиллов, живет в кают-компании

*расходы на жизнь пассажира в день - 120000$ (Бел платит сам)</pre>
</div>
<div title="Компьютеры" creator="OldYaga" modifier="OldYaga" created="201702242106" modified="201702250001" tags="Правила" changecount="90">
<pre>++Компьютеры++
Программируемые цифровые компьютеры появились в ТУ7 и быстро стали улучшаться, уменьшаться и дешеветь на более поздних ТУ. В некоторых сеттингах компьютеры могут даже достичь таких вычислительных мощностей, что обретут сознание.
++Сложность++
Все компьютеры имеют такую характеристику, как уровень «Сложности». Это абстрактная мера вычислительной мощности. Каждый следующий уровень примерно в десять раз мощнее предыдущего. Уровень Сложности компьютера определяет какие программы можно на нём запустить. Каждая программа тоже также характеризуется уровнем Сложности, и может быть запущена только на компьютере своего уровня сложности или выше; т. е. программа с уровнем Сложности 2 требует компьютера Сложности 2 или выше.
Сложность также определяет сколько программ одновременно могут быть запущены на компьютере. На компьютере могут выполняться две программы его уровня, 20 программ Сложность которых на один уровень меньше, 200 программ со Сложностью на два уровня меньше и т. д. Например, на компьютере со Сложностью 2 можно запустить две программы Сложности 2 или 20 программ Сложности 1 – или одну программу Сложности 2 и 10 программ Сложности 1. Лучший домашний компьютер среднего ТУ8 (2004 год) имеет Сложность 4; более распространены ком пьютеры со Сложностью 2-3. 
++Иные возможности++
Для того, чтобы человек мог воспользоваться компьютером, компьютер должен иметь хотя бы один «терминал». Компьютер может быть встроен в этот терминал, или располагаться отдельно. На ТУ7-8 терминал представляет из себя минимум монитор и клавиатуру. На позднем ТУ8 и в дальнейшем такую грубую аппаратуру могут заменить распознаватели голоса, очки и перчатки виртуальной реальности, нейронные интерфейсы и т. д.
Один терминал можно подключить ко множеству компьютеров, что даст пользователю доступ к ним всем. Хотя без специальной аппаратуры пользователь одновременно может работать только с одним компьютером, тратя одну
секунду на переключение между компьютерами. Если (по решению Мастера) компьютеры совместимы, то их можно связать кабелем или комутатором. Персонаж, пытающийся установить связь, должен знать «адрес» другого компьютера (телефонный номер, IP адрес в сети и т. д.) и какой-нибудь подходящий пароль. После соединения два компьютера, с соответствующим ПО, могут делиться информацией, а менее мощный компьютер может быть терминалом для более мощного.
Наконец, на ТУ8+ любой компьютер, оборудованный микрофоном или камерой, может быть записывать изображение или звук, пока есть свободное место на диске.
++Программы++
Полезность программ зависит от обстановки. Общие замечания:
*Сложность: как указано выше, каждая программа имеет свой уровень Сложности.
*Возможности: некоторые программы просто развлекают (видеоигры) или выполняют определённые функции (электронная почта).
Другие помогают пользователю в выполнении определённой задачи. Например бухгалтерские программы могут дать +1 к Бухгалтерскому учёту при расчёте налогов. Считывайте это премией за хорошее оборудование (смотри Модификаторы за оборудование, с.345). Программы необходимы для некоторых задач – особенно для технических при ТУ8+. Без них умение пользователя будет на ТУ ниже. Например, для конструирования реактивного самолёта инженеру требуются программа система автоматического проектирования и производства Сложности 3; без неё его умение Инженерия/ТУ8 (Воздушные суда) может функционировать как Инженерия/ТУ7. Обычно эти программы имеют Сложность 2 на ТУ7, Сложность 4 на ТУ8, Сложность 6 на ТУ9, и т. д. Программы со Сложностью больше требующейся дают премию или сокращают время, требующееся на выполнение задания.
Программы, предназначенные для роботов могут давать преимущества, недостатки, умения или даже нести в себе сознание! Они могут быть цельными и модульными (См. Изменяемые способности, с.71).
*Цена: большинство программ имеют свою цену в $. Это цена одной легальной копии с документами. Каждая копия – для одного компьютера. Копировать программы возможно, но зачастую это незаконно. Но компьютер может одновременно запускать столько сеансов программы, сколько ему позволяет Сложность; это не требует отдельной копии.

++Собираем комп:++
покупаем компьютер, при желании покупаем кастомное железо, покупаем как минимум один терминал, покупаем софт

|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !Компьютеры TL6-8 |
| TL | Название | Описание | Complexity | Память | $ | Масса | Питание | LC |
| 8 | Tiny Computer | The smallest multi-purpose computer available (e.g., a PDA). It’s often built into another gadget, such as a cell phone. | 1 | 1 GB | $50 | 0.04 lb. | 2S/5 hrs. | 4 |
| 8 | Small Computer | A typical palmtop or notebook computer. | 2 | 10 GB | $100 | 0.4 lb. | M/5 hrs. | 4 |
| 8 | Medium Computer | A laptop or desktop PC, typical of those found in middle-class homes or small businesses. | 3 | 100 GB | $1,000 | 4 lbs. | M/2.5 hours.| 4 |
| 7 | Microframe Computer | A cabinet-sized machine, rack of servers, etc. | 4 | 1,000 GB (1 TB) | $10,000 | 40 lbs. | external power | 4 |
| 6 | Mainframe Computer | A computer capable of providing control and systems-monitoring functions for a major business, manufacturing complex, or laboratory.| 5 | 10,000 GB (10 TB) | $100,000 | 400 lbs. | external power | 4 |
| 6 | Macroframe Computer | A powerful mainframe, typically the property of a government agency, major corporation, or university. | 6 | 100,000 GB (100 TB) | $1,000,000 | 4,000 lbs. | external power | 4 |
| 6 | Megacomputer | A massive computer complex that fills a whole building or a series of subbasements. | 7 | 1,000,000 GB (1,000 TB) | $10,000,000 | 20 tons | external power | 4 |
|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !Компьютеры TL9 |
|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| At TL10, add +2 to each model’s Complexity. Each further TL adds +1 to Complexity (e.g., +2 at TL10, +3 at TL11, +4 at TL12). Each TL after TL9, multiply storage capacity by 1,000 (i.e., replace TB with petabytes at TL10, exabytes at TL11, zettabytes at TL12.) |
| 9 | Tiny Computer | The smallest multi-purpose computer in regular use. It’s used as a wearable computer or implant, or built into gadgets or robots. | 3 | 1 TB | $50 | 0.05 lbs. | 2A/20 hr. | 4 |
| 9 | Small Computer | This is used as a notebook or wearable computer, or the brain of a small robot. | 4 | 10 TB | $100 | 0.5 lbs. | 2B/20 hr. | 4 |
| 9 | Personal Computer | A workhorse system. Almost every middle-class household may have a system like this, serving as the “house brain.” Small businesses and departments of large businesses also use them, as do many vehicles and robots. | 5 | 100 TB | $1,000 | 5 lbs. | 2C/20 hr or external power | 4 |
| 9 | Microframe | A high-end cabinet-sized machine, common in labs, large vehicles, as a network server, or on an office floor (often with several terminals networked to it). Other applications include commercial spacecraft, mobile asteroidmining complexes, university learning centers, and so on. Merchant ships use a microframe as the ship’s main computer. Large warships frequently use microframes as the backup control systems of fighting, damage control, maneuvering and tactical-planning stations. | 6 | 1,000 TB | $10,000 | 40 lbs. | external power | 3 |
| 9 | Mainframe | These powerful computers are often used for control and systems-monitoring functions for a starship, major business, manufacturing complex, or laboratory. | 7 | 10,000 TB | $100,000 | 400 lbs. | external power | 3 |
| 9 | Macroframe | This size of computer is often found administering the traffic, sewage, power, maintenance, and bureaucracy functions for an entire city. They are also found as the main computer aboard large ships and used to run cutting-edge science projects. Macroframes are usually the property of government agencies or major corporations. | 8 | 100,000 TB | $1,000,000 | 4,000 lbs. | external power | 3 |
| 9 | Megacomputer | This is a computer the size of an entire building! Systems this large may be placed in charge of running entire countries, although they’re sometimes also installed in capital ships or giant cybertanks. They’re often upgraded for even more performance – with a genius option, a megacomputer can cost billions! | 9 | 1,000,000 TB | $10,000,000 | 40,000 lbs. | external power | 2 |

|&gt;|&gt;|&gt;|&gt;| !Кастомное железо TL7, 8 |
|&gt;|&gt;|&gt;|&gt;| Several options exist for customizing computers. These modify the Complexity, cost, etc., of the basic hardware. Multiply cost factors together, and do the same for weight factors; e.g., hardened (x2 cost) and fast (x20 cost) together give x40 cost. Complexity modifiers are additive. |
| TL | Название | Описание | Модификатор | Масса |
| 7 | Compact | The computer uses lighter, more expensive components. | x2 cost | x0.5 weight |
| 7 | Hardened | The computer is designed to resist electromagnetic pulse (EMP), microwaves, etc. Add +3 to HT against these effects. | x2 cost | x2 weight |
| 7 | High-Capacity | The computer can run 50% more programs simultaneously (e.g., three programs of its own Complexity). | x1.5 cost | - |
| 8 | Fast | The computer uses cutting-edge technology, giving it capabilities equivalent those of a system one size larger. May not be combined with slow. +1 to Complexity | x20 cost | - |
| 8 | Slow | The computer uses inexpensive processors, or is of an older design. May not be combined with fast. -1 to Complexity | x1/20 cost | - |
|&gt;|&gt;|&gt;|&gt;| !Кастомное железо TL9, 11 |
|&gt;|&gt;|&gt;|&gt;| Various options are available to customize computer hardware. Multiple options can be chosen, but each option can only be taken once. Modifiers to Complexity, cost, etc. apply to the hardware statistics. Cost and weight multipliers are multiplied together. For examples a computer that is Fast (which multiplies cost by 20) and Hardened (which doubles cost) is 40 times the normal cost. Complexity and LC modifiers are additive, but LC cannot go below LC0. |
| TL | Название |&gt;|&gt;| Описание |
| 9 | Compact |&gt;|&gt;| A lighter but more expensive computer. Double the cost, halve the weight. Halve the number of power cells and the operating duration. |
| 9 | Fast |&gt;|&gt;| A powerful computer, with capabilities equivalent to a system one size larger. This option may not be combined with Slow or Genius. +1 Complexity. Multiply the cost by 20. |
| 9 | Genius |&gt;|&gt;| The computer is on the cutting edge of processor design. This option may not be combined with Fast or Slow. Add +2 to Complexity. Multiply the cost by 500, and reduce LC by 1. |
| 9 | Hardened |&gt;|&gt;| The computer is designed to resist electromagnetic pulses, microwaves, and other attacks that target electrical gadgets. Add +3 to HT to resist these effects. Double the cost, double the weight. |
| 9 | High-Capacity |&gt;|&gt;| The computer can run 50% more programs simultaneously (three programs of its own Complexity, and so forth). Cost is 1.5 times normal. |
| 9 | Printed |&gt;|&gt;| The computer is printed on a flexible surface, such as fabric (so it can be rolled up) or even skin (a digital tattoo). It requires four square feet per pound of weight; an average person has about 20 square feet of skin across his body. It must use solar cells or flexible cells for power. Breaking the surface destroys the computer. This option is not compatible with quantum computers. -1 Complexity, and divide data storage by 1,000. |
| 9 | Quantum |&gt;|&gt;| A quantum computer drastically reduces the time required to perform certain processes; see Quantum Computers (below). Multiply the cost by 10, and double the weight. -1 LC. |
|&gt;|&gt;|&gt;|&gt;| Quantum computers perform calculations using atoms in “up” or “down”” spin states to represent bits of information. Due to quantum uncertainty effects, each atom does not simply represent one bit, as in a traditional computer. Instead, each “qubit” can be both up and down at once. This allows it to (in a sense) do all possible calculations at the same time until the act of measuring the qubits stops the calculating process. Quantum computers provide quick solutions to mathematical problems that would tie up a conventional computer for years or centuries. This makes them useful for a wide range of activities, including code decryption, traffic control, and massive database searches. In these situations, the GM may wish to drastically reduce the time of the task (e.g., to the square root of the normal time), or increase the quantum computer’s effective Complexity. See Encryption (pp. 46-47) for an example. The GM may rule that some problems require quantum computers. |
| 9 | Slow |&gt;|&gt;| The computer uses inexpensive processors and storage media, or it may be an older design. This option may not be combined with Fast or Genius. It is -1 Complexity and stores one-tenth the data. Divide cost by 20. |
| 11^ | FTL |&gt;|&gt;| The computer’s processors operate at faster-than-light speeds. +1 Complexity; the computer is likely to have the Quantum option. Multiply the cost by 100, and double weight. -1 LC.|
|&gt;|&gt;|&gt;|&gt;| Data Storage: Additional built-in data storage can be purchased for $1 and 0.001 lb. per additional TB (at TL9). Multiply storage by 1,000 per TL after TL9. |

|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !Терминал TL6-8 |
|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| A computer requires at least one terminal. At TL7 especially, it’s possible that users might have terminals only, and rent time on networked systems. |
| TL | Название | Описание | $ | Масса | Питание | LC |
| 6 | Primitive Terminal | This encompasses all varieties of paper-tape readers, typewriter-like card punches, automatic card sorters, and blinking display panels. A task performed on primitive terminal may take an hour or more simply to set up. Deciphering the results takes several minutes of sifting through the output. | $5,000 | 500 lbs. | external power | 4 |
| 7 | Workstation Terminal | A standard desktop or office workstation, with a keyboard and a monitor (monochrome at TL7, color at TL8). It may include other accessories: mouse, speakers, microphone, digital camera, etc. Home systems at TL8 are generally medium computers with workstation terminals. Halve terminal weight. | $500 | 25 lbs. | external power | 4 |
| 8 | Portable Terminal | A reduced-scale but fully functional keyboard and color video display. It includes accessories such as a wireless communicator for networking, a digital mini-camera, and a speaker/microphone. It’s adequate for most tasks, but the GM may rule that timeconsuming or graphics-intensive tasks require a workstation terminal (above) to avoid a -1 penalty. It doesn’t require a separate power source, instead tapping a small amount of power from the attached computer. Notebook and laptop computers at TL8 are typically small or medium computers with portable terminals. | $50 | 0.5 lb. | - | 4 |
| 8 | Datapad | A terminal for a PDA – including a tiny color video screen, a folding or laser-projection keyboard, and the accessories listed for a portable terminal (above). Complex tasks or those requiring use of the keyboard and screen for lengthy periods (GM’s option) are at -2 to skill. Powered by the computer to which it’s attached. | $10 | 0.05 lb. | - | 4 |
|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !Терминал TL9-10 |
|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| Terminals must be of at least the same TL as the computers and data storage systems they interface with. Higher TLs see steady improvements in video and sound quality, but terminals are often replaced by neural interfaces (pp. 48-49), neural input systems (p. 48), or just building an AI into the computer and telling it what to do. Terminals may also have the compact, hardened, and printed computer hardware options. |
| 9 | Datapad | A tiny color video screen and touch-pad resembling a cell phone. It can be built into the computer or worn separately (e.g., as a wristwatch). It includes a microcommunicator (p. 43), a cable jack (p. 42), a speaker/microphone, and a mini-camera (p. 51). Any tasks requiring use of the keyboard and screen for lengthy or complex periods are at -2 to skill. It has a datachip (p. 51) removable drive. | $10 | 0.05 lbs. | 2A/20 hr. | 4 |
| 9 | Head-Up Display (HUD) | This is a 3D video display integrated into glasses or a helmet visor, or designed to be projected onto a windscreen. A HUD can also be printed onto a flat surface. See Using a HUD (below). Many vehicles, suits, sensor goggles, and the like incorporate a HUD at no extra cost, and direct neural interfaces (pp. 48-49) make a HUD unnecessary. If bought separately: | $50 | neg. | uses external power | 4 |
|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| The Head-Up Display, or HUD (above), is a nearly ubiquitous technology. It displays visual information (text, sensor views, suit or vehicle instrument readouts, a computer screen, targeting crosshairs, a web browser window, a video show, etc.) by projecting it directly onto the wearer’s visor. Any piece of electronic equipment that uses a visual display screen may be connected to a HUD by a cable or a communicator.&lt;&lt;br&gt;&gt;A HUD also allows hands-free monitoring of devices. A HUD provides +1 to skill rolls when reacting quickly to information is important – maneuvering with a thruster pack, for example. Driving, Piloting, and Free-Fall skill rolls often benefit from a HUD.&lt;&lt;br&gt;&gt;Many wearable sensor devices and suits have a HUD built-in at no extra cost. |
| 9 | Sleeve Display | A square of touch-sensitive digital cloth woven into the fabric of clothing, uniforms, and body armor. It is equivalent to a datapad, except that at TL9, the user will need to rely on the computer’s built-in sound system for a voice interface. At TL10+, the cloth incorporates a speaker. | $50 | neg. | A/10 hr. (uses flexible cells) | 4 |
| 9 | Portable Terminal | A small but functional color video display and multi-system interface (keyboard, mouse, speakers, mike, video camera), typical of laptop computers. A portable terminal is also used as a remote control for many types of devices, such as sensors, communicators, and drones. It’s adequate for most tasks, although the GM may rule that time-consuming or graphics-intensive tasks require a desktop workstation (see below) to avoid a -1 penalty. It has both datachip (p. 51) and removable drives. | $50 | 0.5 lbs. | 2B/20 hr. | 4 |
| 9 | Workstation Terminal | A complete desktop, vehicular console, or office system with the same capabilities as a portable terminal, It has a larger keyboard, a full-size 3D monitor, a document scanner/printer, and whatever other peripherals might be standard at higher TLs (GM’s option). | $500 | 5 lbs. | C/10 hr. or external power | 4 |
| 9 | Computerized Crew Station | A high-end workstation with controls that can be reconfigured, multi-function programmable displays, and a padded, adjustable seat. This sort of system may be required to control complex systems such as vehicles or power stations. | $2,000 | 50 lbs. | uses external power | 4 |
| 9 | Holographic Crew Station | A computerized crew station (above) that uses holographic projection to immerse the user in 3D imagery. Vehicular versions may be designed to make the rest of the vehicle vanish, leaving the user “floating in air” except for his seat and controls. | $10,000 | 50 lbs. | uses external power | 4 |
| 10 | Multisensory Holographic Crew Station | As above, but the controls and displays can be configured for nonhuman senses – for example, ultrasonic, infrared, or even olfactory outputs. | $50,000 | 100 lbs. | uses external power | 4 |
| 10^ | Holoprojection | Users might use a holoprojector (pp. 52-53) instead of a screen; even a wrist-size unit can produce a floating 3D image the size of a full-size computer monitor, with larger models typical of display systems built into homes and vehicles. | $ | Масса | Питание | 4 |

|&gt;|&gt;|&gt;|&gt;| !Софт TL6-8 |
|&gt;|&gt;|&gt;|&gt;| A computer can be programmed to do almost anything, but good programming is expensive. Individual programs are rated for TL and LC – like other technology – and for their Complexity, which determines what systems they can run on (see p. B472). A program’s TL and Complexity, in turn, set its cost; see the Program Cost Table, below.&lt;&lt;br&gt;&gt;The prices on the table assume professional and specialized software, such as engineering programs and targeting systems. In reality, software may cost a lot to develop but little to distribute. Mass-market software – computer games, popular operating systems, etc. – are cheaper, as the development costs are spread over a huge user base. Such programs may cost as little as 10% of these prices, or even be available as freeware. The actual cost of other software can vary greatly as well, depending on its nature and provenance (shareware, pirated, demo, open-source, etc.). At the GM’s option, free versions (legal or otherwise) of almost any program may be available.&lt;&lt;br&gt;&gt;Descriptions of several programs appear in later chapters; e.g., Encryption (pp. 210-211). To write your own software, use Computer Programming (p. B184). Tech-Level Modifiers (p. B168) always apply to this skill! A master of punched-card programming from 1955 would boggle at today’s techniques; his skill would be about as relevant as flint-knapping. |
| Complexity | TL6-7 |&gt;|&gt;| TL8 |
| 0 | $300 |&gt;|&gt;| $30 |
| 1 | $1,000 |&gt;|&gt;| $100 |
| 2 | $3,000 |&gt;|&gt;| $300 |
| 3 | $10,000 |&gt;|&gt;| $1,000 |
| 4 | $30,000 |&gt;|&gt;| $3,000 |
| 5 | $100,000 |&gt;|&gt;| $10,000 |
| 6 | $300,000 |&gt;|&gt;| $30,000 |
| 7 | $1,000,000 |&gt;|&gt;| $100,000 |
| 8 | no |&gt;|&gt;| $300,000 |
|&gt;|&gt;|&gt;|&gt;| !Software Tools TL6 |
|&gt;|&gt;|&gt;|&gt;| IQ-based technological skills (p. B168) at TL7+ normally require software to function at full effectiveness when performing tasks involving research, analysis, or invention. Software tools exist for many other skills at TL7+, too, including Accounting, Artillery, Engineer, Market Analysis, Research, and Writing. Such tools come in the usual quality grades (see p. B345):&lt;&lt;br&gt;&gt;Basic programs are necessary to perform the skill at its TL, and give no bonus. They’re Complexity 2 for Easy skills, Complexity 3 for Average, Hard, or Very Hard skills.&lt;&lt;br&gt;&gt;Good-quality programs give +1 to skill. They’re Complexity 4 for Easy skills, Complexity 5 for Average, Hard, or Very Hard skills.&lt;&lt;br&gt;&gt;Fine-quality programs give +2 to skill. They’re Complexity 6 for Easy skills, Complexity 7 for Average, Hard, or Very Hard skills.&lt;&lt;br&gt;&gt;Software tools designed for highly specific applications of a skill – including but not limited to tasks that would be covered by techniques (p. B229) – may be one or more Complexity levels lower. This is very common at TL6-7! |
|&gt;|&gt;|&gt;|&gt;| !Databases TL6 |
|&gt;|&gt;|&gt;|&gt;| A database is a collection of information in computerreadable form, with built-in search and indexing programs. Estimate database size using the Data Storage Table (p. B472). For a database of a given size, the wider the subject covered, the sparser the details.&lt;&lt;br&gt;&gt;Database cost ranges from free for the information bundled with any system to millions of dollars for proprietary data, secrets, specialized information, or intelligence that cost lives or money to gather. Cost doesn’t correlate so much with size as with information quality, copyright, supply, and demand. An encyclopedia or a similar item might be free for download or cost from $1 to $100. |
|&gt;|&gt;|&gt;|&gt;| !Софт TL9-12 |
|&gt;|&gt;|&gt;|&gt;| A system can be programmed to do just about anything, but good programming is expensive at any TL. The GM should allow the creation of custom programs, but make them costly. Some programs are better than others, regardless of cost. A custom program is likely to have amusing or dangerous bugs when it is first used.&lt;&lt;br&gt;&gt;Programs are rated for their cost, their LC, and their Complexity, which determines what systems they can run on. Descriptions of programs are found in the relevant chapters. In particular, see Encryption (pp. 46-47), Sensies (pp. 57-58), Software Tools (p. 25), Tactical Programs (pp. 149-150), and Virtual Reality (pp. 53-55).&lt;&lt;br&gt;&gt;The software cost may vary depending on the nature of the program and its provenance (shareware, pirated, demo copy, open-source, etc.). Many programs have free versions, not all of which are legal. Free programs often lack novicefriendly interfaces and manuals, so a Computer Operation roll may be required to find, install, or use them.&lt;&lt;br&gt;&gt;Computer programs have a base cost that depends on their Complexity and TL and drops at higher TLs. A Complexity 6 program that costs $3,000 at TL9 is only $3 at TL12, for example – see below.&lt;&lt;br&gt;&gt;Software costs a lot to develop, but very little to distribute. Prices listed assume professional and specialized software such as engineering programs, targeting systems, or AI programs for robots. Mass-market software, such as computer games or popular operating systems, will be cheaper, as development cost is spread over a huge user base. Such programs may be as little as 10% of the cost, or even available as freeware. |
| Complexity | TL9 | TL10 | TL11 | TL12 |
| 1 | $10 | $1 | $0.10 | $0.01 |
| 2 | $30 | $3 | $0.30 | $0.03 |
| 3 | $100 | $10 | $1 | $0.10 |
| 4 | $300 | $30 | $3 | $0.30 |
| 5 | $1,000 | $100 | $10 | $1 |
| 6 | $3,000 | $300 | $30 | $3 |
| 7 | $10,000 | $1,000 | $100 | $10 |
| 8 | $30,000 | $3,000 | $300 | $30 |
| 9 | $100,000 | $10,000 | $1,000 | $100 |
| 10 | $300,000 | $30,000 | $3,000 | $300 |
| 11 | $1,000,000 | $100,000 | $10,000 | $1,000 |
| 12 | unavailable | $300,000 | $30,000 | $3,000 |
| 13 | unavailable | $1,000,000 | $100,000 | $10,000 |
| 14 | unavailable | unavailable | $300,000 | $30,000 |
| 15 | unavailable | unavailable | $1,000,000 | $100,000 |
|&gt;|&gt;|&gt;|&gt;| !Software Tools TL9-12 |
|&gt;|&gt;|&gt;|&gt;| IQ-based technological skills used at TL9 and up normally require software to function at full effectiveness when performing any task involving research, analysis, or invention. Software tools are also appropriate for a number of other skills at TL9+, such as Accounting, Artillery, Market Analysis, Strategy, Tactics, and Writing.&lt;&lt;br&gt;&gt;Basic programs are incorporated into dedicated systems integrated into the devices used to perform the skill, and provide no bonus.&lt;&lt;br&gt;&gt;Good-quality programs give a +1 bonus. These are Complexity 4 for Easy skills, Complexity 5 for Average, Hard, or Very Hard skills.&lt;&lt;br&gt;&gt;Fine-quality programs give a +2 bonus. These are Complexity 6 for Easy skills, Complexity 7 for Average, Hard, or Very Hard skills. |
|&gt;|&gt;|&gt;|&gt;| !Databases TL9-12 |
|&gt;|&gt;|&gt;|&gt;| A database is a collection of information in computerreadable form. Any database has its own built-in search and indexing programs. For any database of a given size, the wider the subject it covers, the fewer details it has. The cost of a database can range from free information bundled with any system to millions of dollars for proprietary data, secrets, specialized information, or information that costs lives or money to gather. An encyclopedia might be free for download, or cost from $1 to $100. Like programs, cost does not necessarily correlate with size, but with quality of the information, copyright, supply, and demand. |</pre>
</div>
<div title="Люди" creator="OldYaga" modifier="OldYaga" created="201702211543" modified="201702222048" tags="Раса" changecount="27">
<pre>//Homo cosmos//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\humans\human_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Мрршан" creator="OldYaga" modifier="OldYaga" created="201702211930" modified="201702222044" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\mrrshans\mrrshan_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Оборудование" creator="OldYaga" modifier="OldYaga" created="201702242100" modified="201702250000" changecount="2">
<pre>[[Компьютеры]]
[[Инструменты]]</pre>
</div>
<div title="Оружие" creator="OldYaga" modifier="OldYaga" created="201702250110" modified="201702251139" tags="Правила" changecount="40">
<pre>|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !GUNS (SMG) (DX-4, or most other Guns at -2) |
| !Изображение | !TL | !Weapon | !Damage | !Acc | !Range | !Weight | !RoF | !Shots | !ST | !Bulk | !Rcl | !Cost | !LC | !Цена магазина |
|[img[atlas\resources\weapon\smg\PDW5.7mmCL.jpg]]| 9 | Personal Defense Weapon, 5.7mmCL | {{{4d pi-}}} | 4 | 350/3,000 | 4.5/1 | 10 | 100+1(5) | 9† | -3 | 2 | $1,000 | 2 | 20$ |

|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !GUNS (RIFLE) (DX-4, or most other Guns at -2) |
| !Изображение | !TL | !Weapon | !Damage | !Acc | !Range | !Weight | !RoF | !Shots | !ST | !Bulk | !Rcl | !Cost | !LC | !Цена магазина |
|[img[atlas\resources\weapon\rifle\PR25mmCL.png]]| 9 | Payload Rifle, 25mmCL | {{{10d pi++}}} | 4 | 700/8,500 | 38/10 | 3 | 8+1(3) | 12B† | -6 | 4 | $8,000 | 2 | 200$ |
|[img[atlas\resources\weapon\rifle\SR10mmCLR.jpg]]| 9 | Storm Rifle, 10mmCLR | {{{9d pi++}}} | 4 | 1,300/5,800 | 10/1.2 | 3 | 12+1(3) | 10† | -4 | 3 | $2,700 | 3 | 16,6$ |

|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !GUNS (SHOTGUN) (DX-4, or most other Guns at -2) |
| !Изображение | !TL | !Weapon | !Damage | !Acc | !Range | !Weight | !RoF | !Shots | !ST | !Bulk | !Rcl | !Cost | !LC | !Цена магазина |
|[img[atlas\resources\weapon\shotgun\SP18.5mmPC.jpg]]| 9 | Shotgun Pistol, 18.5mmPC | {{{4d pi++}}} | 1 | 100/500 | 4/0.7 | 3 | 5+1(3) | 10 | -3 | 5 | $330 | 3 | 14$ |</pre>
</div>
<div title="Основная информация по игре" creator="OldYaga" modifier="OldYaga" created="201702211501" modified="201702221233" tags="excludeLists" changecount="5">
<pre>Основные вопросы

1. Жанр
Приключенческий боевик - конфликты между живыми

2. Перемещение
перемещение - лист свернутой бумаги
врата - соединяются с другими вратами, включаются по необходимости
станция отправки - отправляет куда угодно
персональный варп - на больших кораблях

3. Связь - квантовая запутанность

4. Социум
земляне - есть крупная организация
есть кучка мелких организаций
есть куча инопланетян - все проходят стерилизационный контроль
есть надрасовая организация - все советуются чтобы пилить бабло    
поселения - игра в основном на куче станций в космосе

5. Торговля
энергия дешевая для населения
дорогие - специализированные ресурсы (спайс)
    
6. Медицина
Твоя голова живет 20 минут - после этого персонажа нельзя восстановить
очень высокий уровень биотехнологий
людей переделывают под планету - трансхуманы

7.  Вооружение и броня
корабельные щиты - да
персональные - узнать

8. Сделать список для ребят
отстреливаемые модули
вообще куча оборудования для ребят

9. AI - присутсвует
сейчас стараются не делать эмоциональный интеллект, затачивать под задачи

10. Инопланетяне - присутствуют, смотри [[Расы]]</pre>
</div>
<div title="Партия" creator="OldYaga" modifier="OldYaga" created="201702222025" modified="201702251140" tags="Партия" changecount="11">
<pre>[[Вольтир]]
[[Квасил]]
[[Мохномут]]
[[Бу]]
[[Чобид]]

[[Команда]]

[[Таблица с деньгами партии|https://docs.google.com/spreadsheets/d/1Snz0Rv17Ytk0tKHvCAdTpbodk9VA2oHpJF274b1147o/edit#gid=0&quot;]]

&lt;html&gt;
 &lt;head&gt;
  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
  &lt;title&gt;Абсолютная ссылка&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;p&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1Snz0Rv17Ytk0tKHvCAdTpbodk9VA2oHpJF274b1147o/edit#gid=0&quot;&gt;Таблица с деньгами партии&lt;/a&gt;&lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div title="Пеленги" creator="OldYaga" modifier="OldYaga" created="201702212014" modified="201702222046" tags="Раса" changecount="2">
<pre>//Латинское описание расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\pelengs\pelengs_img.jpg]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Правила" creator="OldYaga" modifier="OldYaga" created="201702221942" modified="201702251131" tags="Правила" changecount="10">
<pre>[[Оборудование]]
[[Экономика]]
[[Оружие]]
[[Броня]]
[[Энергия]]
[[CR, CL]]</pre>
</div>
<div title="Протеане" creator="OldYaga" modifier="OldYaga" created="201702212027" modified="201702222048" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\protheans\protheans_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Раги" creator="OldYaga" modifier="OldYaga" created="201702211938" modified="201702222047" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\ragas\ragas_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Расы" creator="OldYaga" modifier="OldYaga" created="201702211505" modified="201702221835" changecount="50">
<pre>|&gt;|&gt;|&gt;| Расы Лиги |
| !№ | !Название | !Гуманоиды | !Бросок d100 |
| 1 | [[Люди]] | да | 1-9 |
| 2 | [[Клакси]] | по-разному | 10-18 |
| 3 | [[Сакра]] | да | 19-27 |
| 4 | [[Мрршан]] | да | 28-36 |
| 5 | [[Алкари]] | да | 37-45 |
| 6 | [[Сектоиды]] | да | 46-54 |
| 7 | [[Булрати]] | да | 55-63 |
| 8 | [[Пеленги]] | да | 64-72 |
| 9 | [[Силикоиды]] | нет | 73-81 |
| 10 | [[Раги]] | по-разному | 82-90 |
|&gt;|&gt;|&gt;| Расы вне Лиги |
| !№ | !Название | !Гуманоиды | !Бросок d100 |
| 11 | [[Тоссы]] | да | 1-2 |
| 12 | [[Сайлонцы]] | по-разному | 3-25 |
| 13 | [[Ареку]] | по-разному | 26-48 |
| 14 | [[Дбигу]] | нет | 49-55 |
| 15 | [[Камино]] | да | 56-62 |
| 16 | [[Водоросли]] | по-разному | 63-85 |
| 17 | [[Листья]] | по-разному | 86-90 |
|&gt;|&gt;|&gt;| Малые расы |
| !№ | !Название | !Гуманоиды | !Бросок d100 |
| 18 | [[Протеане]] | да | 1-30 |
| 19 | [[Воотлары]] | да | 31-60 |
|&gt;|&gt;|&gt;| Неигровые расы |
| !№ | !Название | !Гуманоиды | !Бросок d100 |
| 20 | [[Дарлок]] | по-разному | 61-90 |
| 21 | [[Саранча]] | по-разному | 91-100 |</pre>
</div>
<div title="Сайлонцы" creator="OldYaga" modifier="OldYaga" created="201702212028" modified="201702222047" tags="Раса" changecount="4">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\siilon\siilon_img.jpg]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Сакра" creator="OldYaga" modifier="OldYaga" created="201702211922" modified="201702222044" tags="Раса" changecount="3">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\sakkra\sakkra_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Саранча" creator="OldYaga" modifier="OldYaga" created="201702211940" modified="201702222048" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\locust\locust_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Сектоиды" creator="OldYaga" modifier="OldYaga" created="201702211941" modified="201702222046" tags="Раса" changecount="2">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\sectoids\sectoids_img.png]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Силикоиды" creator="OldYaga" modifier="OldYaga" created="201702212015" modified="201702222047" tags="Раса" changecount="2">
<pre>//Латинское описание расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\silicoids\silicoids_img.jpg]]
----

''Краткое описание расы и место в мире''

''Физиология''

''Характер''

''История''

''Шаблон расы в GURPS''</pre>
</div>
<div title="Справка и настройка" creator="RainSkylark" modifier="OldYaga" created="201302150152" modified="201702211505" tags="excludeLists" changecount="50">
<pre>* [[Настроить главное меню|MainMenu]]
!! Справка
* [[Справка: форматирование]]
* [[Справка: встроенные плагины]]
* [[Справка: FAQ]]
@@Minor change: @@ - если при сохранении записки зажать shift - это будет &quot;минорное&quot; изменение без корректировки даты.
!! Конфигурация
* [[Configuration]]
! Полезные внешние плагины (то, что musthave):
* [[SectionMacro]] - Allows you to create collapsable sections just like the slider macro but without needing to create new tiddlers for these sections. @@Creates text-link@@
* NestedSlidersPlugin - улучшенная версия SectionMacro, смотри NestedSlidersPluginInfo.
* FramedLinksPlugin - clicking an external link opens an IFRAME following the link instead of opening a new tab/window
* [[saveAndReloadPlugin]] - Save and Reload - add macros {{{ &lt;&lt;saveAndReload&gt;&gt; }}} anywhere.
* FullScreenPlugin - требует правки ToolbarCommands, позволяет развернуть на полный экран просмотр/редактирование.
* WikiBar - простенький редактор разметки.
* DeliciousTagging - Allows easy 'del.icio.us'-like tagging in the EditTemplate by showing all tags as a list of link-buttons.
* SinglePageModePlugin - одностраничный режим, к нему рекомендуется апгрейд: 
* TiddlersBarPlugin -  open several tiddlers to use the tabs bar.
* CloseUnsavedOnCancel - When you click new tiddler then click cancel I think the new tiddler should close automatically.
----
+++[Все плагины]&gt;
&lt;&lt;tagging systemConfig &quot;системные&quot;&gt;&gt;
===
----
+++[Ссылки и благодарности]&gt;
* [[TiddlyWiki|http://www.tiddlywiki.com]] was originally created by ~JeremyRuston and is now a thriving [[open source|OpenSourceLicense]] project with a busy [[Community]] of independent developers. Osmosoft, part of [[BT|http://btplc.com]], is the leading contributor to the project.
* Переведено и адаптировано с http://webpages.charter.net/one_each/
* This is a simple cheat sheet gleened from the [[TiddlyWiki Tutorial|http://www.blogjones.com/TiddlyWikiTutorial.html]].
* Визуальные апгрейды - http://visualtw.ouvaton.org/VisualTW.html
* Special thanks to http://tiddlywiki.org/
===

</pre>
</div>
<div title="Справка: FAQ" creator="RainSkylark" modifier="KarelWintersky" created="201311090447" modified="201312132106" tags="excludeLists systemHint" changecount="9">
<pre>+++[Как установить плагин?]&gt;
Находим нужный нам плагин (например, в сети).
Создаем тиддл (new tiddler) с соответствующим именем. 
Вставляем код плагина в записку. 
Присваиваем теги systemConfig и exludeLists (если хотим скрыть плагин из таймлайна)
Нажимаем ++'done'++, потом ++Save changes++, обновляем страницу и пользуемся. 
Смотри также плагин [[saveAndReloadPlugin]]
===
----
+++[Создание нового тиддлера на основе шаблона]&gt; 
If you create tiddlers with the same information over and over (contacts, quotations, recipes, etc), you are probably going to want a template tiddler to save time. Then you are going to want a macro that creates a new tiddler that includes the information from the template. Here's how:

#''Create the template tiddler.'' Put text and tables and formatting exactly the way you want your new tiddlers based on this template to appear.
#''Create a macro that will open a new tiddler based on your template.''&lt;br&gt;Where I have listed YYYY, insert the words you want to appear in the label for your macro. Where I have listed ZZZZ, insert the exact title of the template tiddler that each new tiddler will be based on. Where I have XXXX insert any tags that you want to be appended to each tiddler that the macro creates.
/*{{{*/
&lt;&lt;newTiddler label:&quot;YYYY&quot; tag:&quot;XXXX&quot; text:{{store.getTiddlerText('ZZZZ')}}&gt;&gt;
/*}}}*/

3. ''Decide where you are going to store your macro.'' You can add it to the SideBarOptions menu under 'new tiddler' and 'new journal.' Or you can add it to a tiddler that you can access from your MainMenu. 

===
----
+++[Исключающие теги]&gt; 
* excludeLists - исключает записку из списка тегов по дате (обычно он справа)
* excludeSearch - исключает из поиска ?

Важно:
Чтобы исключить определенные теги из доступного списка тегов (EditTemplate), нужно специально настраивать Delicous Tagging Plugin
===
----
+++[in work: Create forms with editable fields]&gt; 
I'm not going to show you how to do this. You will need to download the ~FormTiddlerPlugin and the ~DataTiddlerPlugin from Abego Extensions and consult the documentation for specific instructions. But if you would like to see a form in action, check out my ~NewBookTemplate in ~BibblyWiki, a ~TiddlyWiki I created to manage bibliographies, take book notes and organize personal libraries.

The template is [[here|http://www.giffmex.org/bibblywiki.html#NewBookTemplate]]:
A tiddler based on the template is [[here|http://www.giffmex.org/bibblywiki.html#%5B%5BWright%2C%20N.T.%2C%20Jesus%20and%20the%20Victory%20of%20God%5D%5D]]. 

I recommend you doubleclick them both to see what they look like in edit mode.

''To create a button'' which creates a new tiddler based on the template, here is the macro syntax:

{{{&lt;&lt;newTiddler label:&quot;XXXX&quot; text:{{&quot;&lt;&lt;formTiddler ZZZZ\&gt;\&gt;&quot;}} tag:&quot;OOOO&quot;&gt;&gt;}}}

Replace XXXX with the name for your macro label. (ex: &quot;Add a new book&quot;)
Replace ZZZZ with the name of the template tiddler. (ex: ~NewBookTemplate)
Replace OOOO with any tag you would like to have appended to every tiddler created by this macro (ex: &quot;booknote&quot;)

You can place your new macro in SideBarOptions or in a tiddler accessible from the ~MainMenu.

===
----
+++[Изображение в заголовке]&gt;
Открываем [[PageTemplate]] и заменяем {{{&lt;div class='header'...&gt; }}} на следущее:

{{{ &lt;div class='header' style='background: #A9CDEF url(path/image.extension) top left no-repeat'&gt; }}}

{{{ role='banner' }}} я думаю, можно оставить. Таким образом, для данного tw будет следущий вид:

{{{&lt;div class='header' role='banner' style='background: #A9CDEF url(path/image.extension) top left no-repeat'&gt; }}}
@@Важно:@@
background: color стоит подбирать в тон картинке. 
Может быть, можно использовать base64-encoded изображения.
===
----</pre>
</div>
<div title="Справка: встроенные плагины" creator="RainSkylark" modifier="KarelWintersky" created="201302150207" modified="201312132106" tags="systemHint excludeLists" changecount="19">
<pre>@@ВАЖНО:@@ Примеры работы плагинов будут недоступны, если сами плагины отключены.

+++[Plugin: slider - встроенный слайдер. Создает кнопку-ссылку, при нажатии на которую раскрывается содержимое другой записки.]&gt; 
Простой слайдер. Создает кнопку-ссылку, при нажатии на которую раскрывается содержимое ++другой++ записки.
!!!Слайдер: {{{&lt;&lt;slider chkTestSlider OptionsPanel Настройки &quot;То же, что и 'опции'&quot;&gt;&gt;}}}
Результат: &lt;&lt;slider chkTestSlider OptionsPanel Настройки &quot;То же, что и 'опции'&quot;&gt;&gt;
Параметры по порядку:
№ имя &quot;cookie&quot; для сохранения состояния слайдера
№ имя заметки, содержащей текст слайдера (это может быть любая заметка)
№ заголовок кнопки-ссылки
№ всплывающая подсказка
===
----
+++[br - принудительный перенос строки]&gt;
{{{ &lt;&lt;br&gt;&gt; }}}
Эффект: aaa &lt;&lt;br&gt;&gt; bb
===
----
+++[Plugin: DiceRoller]&gt;
[[DiceRollerPlugin]]
===
----
+++[Plugin: openAll]&gt;
!!! OpenAll @@Deprecated, возможно не реализован в новом ядре@@
Позволяет открывать записки, помеченные определенным тэгом. В отличие от встроенного {{{tag}}} может предварительно закрывать все открытые записи, позволяет задавать надпись для кнопки, устанавливать лимит отображения (не более N записок) и изменять порядок сортировки на обратный.

Формат {{{&lt;&lt;openAll &lt;тэг&gt; [параметры] &gt;&gt;}}}

Тэг обязателен, параметры опциональны и могут следовать в любом порядке.
|!Параметр|!Описание|
|close~AllFirst|Предварительно закрывает все открытые записки|
|title:Текст|Надпись на кнопке|
|limit:#| Замените # на число записок, которое вы хотите отобразить (по умолчанию 10000)|
|reversOrder|Сортировать по заголовкам в обратном порядке|

Пример: {{{&lt;&lt;openAll systemConfig closeAllFirst &quot;title:Системные настройки&quot;&gt;&gt;}}}
&lt;&lt;openAll systemConfig closeAllFirst &quot;title:Системные настройки&quot;&gt;&gt;
===
----
+++[Plugin: tagging (генератор списка записок по определенному тегу)]&gt;
Использовать просто: {{{ &lt;&lt;tagging &quot;имя тега&quot; &quot;название списка&quot;&gt;&gt;}}}
&quot;название списка&quot; опционально.
{{{
&lt;&lt;tagging systemConfig &quot;системные&quot;&gt;&gt;
}}}
Даст:
&lt;&lt;tagging systemConfig &quot;системные&quot;&gt;&gt;

Также:
&lt;&lt;tagging &quot;systemHint&quot; &quot;справка&quot;&gt;&gt;
===
----
+++[Plugin: ToolBar (internal)]&gt;
The ToolbarMacro is used in the TiddlerTemplateMechanism to define the toolbar that appears when the mouse is hovered over a tiddler. It looks like this:
{{{
&lt;&lt;toolbar closeTiddler -editTiddler +jump&gt;&gt;
}}}
You can precede a command name with a &quot;+&quot; to specify a default command that is automatically chosen when a tiddler is double-clicked, or the ctrl-Enter key combination pressed. Similarly, precede it with &quot;-&quot; to specify a command to be chosen when the Escape key is pressed.
----
Deletes the current tiddler. A confirmation dialogue is displayed unless disabled with the ConfirmBeforeDeleting checkbox in AdvancedOptions. It is used with the ToolbarMacro like this:
{{{
&lt;&lt;toolbar deleteTiddler&gt;&gt;
}}}
Switches the current tiddler to the current edit view. It is used with the ToolbarMacro like this:
{{{
&lt;&lt;toolbar editTiddler&gt;&gt;
}}}
Offers a popup menu to jump directly to any of the currently open tiddlers. It is used with the ToolbarMacro like this:
{{{
&lt;&lt;toolbar jump&gt;&gt;
}}}
Offers a popup menu displaying the tiddlers that link to the current one. It is used with the ToolbarMacro like this:
{{{
&lt;&lt;toolbar references&gt;&gt;
}}}
Saves any pending edits to the current tiddler, and switches it to the default view. It is used with the ToolbarMacro like this:
{{{
&lt;&lt;toolbar saveTiddler&gt;&gt;
}}}
Закрывает все открытые записки кроме текущей (редактируемой). Используется с макросом ToolbarMacro так:
{{{
&lt;&lt;toolbar closeOthers&gt;&gt;
}}}
Сбрасывает все изменения, внесенные в записку и возвращает ее к режиму просмотра.
Используется с макросом ToolbarMacro так:
{{{
&lt;&lt;toolbar cancelTiddler&gt;&gt;
}}}
Closes the current tiddler, regardless of whether it is being editted. It is used with the ToolbarMacro like this:
{{{
&lt;&lt;toolbar closeTiddler&gt;&gt;
}}}

{{{ &lt;&lt;toolBar&gt;&gt; }}}
&lt;&lt;toolBar&gt;&gt;
===
----
+++[Plugin: tagCloud]&gt;
&quot;Облако тэгов&quot; -- отображает все тэги, причем размер шрифта каждого тэга зависит от того, как много записок помечены этим тэгом.
Формат: {{{&lt;&lt;tagCloud&gt;&gt;}}}
Работает для тегов стандартного семейства (tags).
===
----
+++[Plugin: Timeline]&gt;
{{{&lt;&lt;timeline&gt;&gt;}}}
Выводит записи в хронологическом порядке.
===
----
+++[Plugin: Today]&gt;
Текущая дата: {{{&lt;&lt;today&gt;&gt;}}}
Результат: &lt;&lt;today&gt;&gt;
===
----
+++[Plugin: newJournal]&gt;
Новая дневниковая записка: {{{&lt;&lt;newJournal &quot;DD MMM YYYY, hh:mm&quot;&gt;&gt;}}}
Результат: &lt;&lt;newJournal &quot;DD MMM YYYY, hh:mm&quot;&gt;&gt;
*DDD - день недели
*DD - число, 0DD - добавлять лидирующий ноль
*MMM - название месяца
*MM - номер месяца, 0MM - добавлять лидирующий ноль
*YYYY - год (четыре цифры), YY - две цифры
*hh - часы
*mm - минуты
*ss - секунды
===
----
+++[Plugin: tiddler - Включение записки]&gt;
{{{&lt;&lt;tiddler MainMenu&gt;&gt;}}}
Вставляет текст другой записки в эту.
@@Внимание!@@ На данный момент нет защиты от бесконечных циклов в случае включений &quot;по замкнутому кругу&quot;.
===
----
+++[Plugin: Вкладки (tabs, русская версия)]&gt;
{{{
&lt;&lt;tabs txtFavourite
Меню &quot;Главное меню&quot; MainMenu
Опции &quot;Опции&quot; SideBarOptions
&gt;&gt;
}}}
Результат:
&lt;&lt;tabs txtFavourite
Меню &quot;Главное меню&quot; MainMenu
Опции &quot;Опции&quot; SideBarOptions
&gt;&gt;
===
----
+++[Plugin: tabs (английская версия, возможно более полная)]&gt;
!!!&lt;&lt;gradient horiz #fc3 #fff&gt;&gt;&amp;nbsp;[[tabs]]^^&lt;&lt;tiddler CloseThisOpen with: &quot;Macros Built-in&quot;  '« back'&gt;&gt;|&lt;&lt;toolbar editTiddler&gt;&gt;» ^^&gt;&gt;
Tabs are a way of displaying tiddlers in tabular form.  Each tab is a separate tiddler; here's how it's done.

Anatomy of a tab: __{{{&lt;&lt;}}}@@color:#00e;tabs@@ @@color:#c06;&quot;cookie&quot;@@ @@color:#080;{{{[[}}}tab name {{{]]}}}@@ @@color:red;&quot;tool tip&quot; @@ @@color:blue; {{{[[}}}tiddler to be displayed{{{]]}}}@@{{{&gt;&gt;}}}__

This is the code for two tabs:

{{{&lt;&lt;tabs txtMyTabs [[tabname ]] &quot;tool tip&quot; [[tiddler to be displayed]] [[Here is another tab ]] &quot;Another Tab&quot; [[hr]] &gt;&gt;
}}}

!!!&lt;&lt;gradient horiz #abf   #fff&gt;&gt;&amp;nbsp;Here are the tabs for the code above&gt;&gt;
&lt;&lt;tabs txtMyTabs [[tab name ]] &quot;tool tip&quot; [[tiddler to be displayed]][[ Here is another tab ]] &quot;Another Tab&quot; [[hr]] &gt;&gt;
!!!!&lt;&lt;gradient horiz #fcf  #fff&gt;&gt;&amp;nbsp;@@color:#000;Note about wrapping tabs to viewer width@@&gt;&gt;
|bgcolor:#fcf;Leave a space after the __tab name__ before the square brackets. e.g {{{[[tabname ]]}}}.  Wrapping requires white space for it to be accomplished properly.  Leaving a white space after the tab name should allow a large number of tabs to wrap properly even as the screen size is adjusted. As a further note keep in mind tab names with spaces may wrap unpredictably.|
You can force tabs to wrap where you want them by adjusting the titles to have or not have white space; however, it could be unpredictable.

!!!Another way
+++[Create Tabs with a Script]
&lt;&lt;tiddler CreateTabsScript&gt;&gt;
===


!!!!How reference specific tab in a tiddler
Source: [[How reference specific tab in a tiddler? - TiddlyWiki : Google Groups|http://groups.google.com/group/TiddlyWiki/browse_thread/thread/4f7b952f69b523a2]]
{{{
&lt;html&gt;&lt;a href='javascript:;' onclick='config.options.tabID=&quot;StayViewTabs&quot;;story.displayTiddler(story.findContainingTiddler(this),&quot;Styling&quot;);story.refreshTiddler(&quot;Styling&quot;,null,true);'&gt;Styling&lt;/a&gt;&lt;/html&gt;
}}}


!!!&lt;&lt;gradient horiz #abf  #fff&gt;&gt;&amp;nbsp;End of tabs&gt;&gt;
===
----
+++[Plugin: tag - Tag popup]&gt;
{{{ &lt;&lt;tag systemConfig&gt;&gt; }}}
&lt;&lt;tag systemConfig&gt;&gt;
===
----
+++[Plugin: ]&gt;
...
===
----
+++[Plugin: ]&gt;
...
===
----
+++[Plugin: ]&gt;
...
===
----
+++[Plugin: ]&gt;
...
===
----
+++[Plugin: ]&gt;
...
===
----
+++[Plugin: ]&gt;
...
===
----
+++[Plugin: ]&gt;
...
===
----
+++[Plugin: ]&gt;
...
===
----
</pre>
</div>
<div title="Справка: форматирование" creator="RainSkylark" modifier="KarelWintersky" created="201302150047" modified="201312132106" tags="excludeLists systemHint" changecount="62">
<pre>В целях уменьшения количества &quot;служебных&quot; записок я решил не использовать плагин slidebar и собрал всю справочную информацию в одну записку, применив плагин [[NestedSlidersPlugin]] - он генерирует более красивое представление, чем плагин SectionMacro.
Для упрощения форматирования можно воспользоваться установленным плагином [[WikiBar]].
----
+++[Ссылки]&gt;
|!Пример|!Реализация|!примечание|
|[[ссылка]]|{{{[[ссылка]]}}}|
|[[внешняя ссылка|куда-то]]|{{{[[внешняя ссылка|куда-то]]}}}|
===
----
+++[Форматирование текста]&gt;
|!Пример|!Реализация|!примечание|
|''жирный''|{{{''жирный''}}}|базовая английская версия, важно: это одинарные кавычки|
|++альтернатива++|{{{++альтернатива++}}}|требует [[RussianTextFormattingPlugin]]|
|==зачеркнутый==|{{{==зачеркнутый==}}}|требует [[RussianTextFormattingPlugin]]|
|__подчеркнутый__|{{{__подчеркнутый__}}}|базовый|
|//курсив//|{{{//курсив//}}}|базовый|
|Superscript: 2^^3^^=8|{{{2^^3^^=8}}}||
|Subscript: a~~ij~~ = -a~~ji~~|{{{a~~ij~~ = -a~~ji~~}}}||
|@@color(green):цветной@@|{{{@@color(green):цветной@@}}}||
|@@bgcolor(green):фон@@|{{{|@@bgcolor(green):фон@@}}}||
|@@выделение@@|{{{@@выделение@@}}}|на основе правила CSS .marked из [[StyleSheetColors]] |
|{{{моноширинный}}}|{{{ {{{моноширинный}}} }}}||
|~ОтменитьWikiWord|{{{~ОтменитьWikiWord}}}||
|[[ссылка]]|{{{[[ссылка]]}}}|
|[[внешняя ссылка|куда-то]]|{{{[[внешняя ссылка|куда-то]]}}}|
===
----
+++[Блок моноширинного текста]&gt;
&lt;html&gt;{{{ пример }}}&lt;/html&gt;
{{{
пример
}}}
===
----
+++[Горизонтальная линия (hr)]&gt;
{{{ в html реализуется тегом &lt;hr&gt; }}}
{{{ ---- }}}
===
----
+++[Список (ul)]&gt;
{{{
* 1st
** 1st-sub1
* 2nd
** 2nd-sub-1
** 2nd-sub-2
}}}
* 1st
** 1st-sub1
* 2nd
** 2nd-sub-1
** 2nd-sub-2
===
----
+++[Нумерованный список]&gt;
{{{
# 1st
## 1st-sub1
## 1st-sub2
}}}
Альтернатива
{{{
№ 1st
№№ 1st-sub1
№№ 1st-sub2
}}}
# 1st
## 1st-sub1
## 1st-sub2
===
----
+++[Изображение]&gt;
{{{
[img[замещающий текст|image URL]]
}}}
{{{
[img[title|filename]]
[img[filename]]
[img[title|filename][link]]
[img[filename][link]]
}}}
Images can be included by their filename or full URL. It's good practice to include a title to be shown as a tooltip, and when the image isn't available. An image can also link to another tiddler or or a URL
[img[Romanesque broccoli|fractalveg.jpg][http://www.flickr.com/photos/jermy/10134618/]]
{{{
[img[Fractal vegetable|fractalveg.jpg]]
[img[This is shown as a tooltip|http://example.com/image.jpg]]
[img[http://example.com/image.jpg]]
[img[http://example.com/image.jpg][ExampleDotCom]]
}}}
The tooltip is optional.
[&lt;img[Forest|forest.jpg][http://www.flickr.com/photos/jermy/8749660/]][&gt;img[Field|field.jpg][http://www.flickr.com/photos/jermy/8749285/]]You can also float images to the left or right: the forest is left aligned with {{{[&lt;img[}}}, and the field is right aligned with {{{[&gt;img[}}}.
@@clear(left):clear(right):display(block):You can use CSS to clear the floats@@
{{{
[&lt;img[A woody bit of Hampstead Heath|forest.jpg]]
[&gt;img[A field near Milton Keynes|field.jpg]]
}}}
===
----
+++[Изображение в заголовке]&gt;
Открываем [[PageTemplate]] и заменяем {{{&lt;div class='header'...&gt; }}} на следущее:

{{{ &lt;div class='header' style='background: #A9CDEF url(path/image.extension) top left no-repeat'&gt; }}}

{{{ role='banner' }}} я думаю, можно оставить. Таким образом, для данного tw будет следущий вид:

{{{&lt;div class='header' role='banner' style='background: #A9CDEF url(path/image.extension) top left no-repeat'&gt; }}}
@@Важно:@@
background: color стоит подбирать в тон картинке. 
Может быть, можно использовать base64-encoded изображения.
===
----
+++[Таблицы]&gt;
Строка таблицы начинается с вертикальной черты (|).
{{{
|Закончите строку латинской с, чтобы создать название таблицы|c
|!Для заголовка &quot;!&quot; сразу после вертикальной черты.|!Заголовок2|!Заголовок3|
|строка1 столбец1|строка1 столбец2|строка1 столбец3|
|&gt;|&gt;|Объединение столбцов - знак &quot;больше&quot; ( &gt;)|
|Объединение строк - знак &quot; ~&quot;|&gt;| Пробел выравнивает вправо|
|~|&gt;| Пробелы с обеих сторон центруют |
|&gt;|&gt;|bgcolor(green):Цвет фона bgcolor(цвет):|
}}}
|Закончите строку латинской с, чтобы создать название таблицы|c
|!Для заголовка &quot;!&quot; сразу после вертикальной черты.|!Заголовок2|!Заголовок3|
|строка1 столбец1|строка1 столбец2|строка1 столбец3|
|&gt;|&gt;|Объединение столбцов - знак &quot;больше&quot; ( &gt;)|
|Объединение строк - знак &quot; ~&quot;|&gt;| Пробел выравнивает вправо|
|~|&gt;| Пробелы с обеих сторон центруют |
|&gt;|&gt;|bgcolor(green):Цвет фона bgcolor(цвет):|

===
----
+++[Цитаты (blockquotes)]&gt;
{{{
&lt;&lt;&lt;
&quot;Beware the Jabberwock, my son!
The jaws that bite, the claws that catch!
Beware the Jubjub bird, and shun
The frumious Bandersnatch!&quot;
&lt;&lt;&lt;
}}}
&lt;&lt;&lt;
&quot;Beware the Jabberwock, my son!
The jaws that bite, the claws that catch!
Beware the Jubjub bird, and shun
The frumious Bandersnatch!&quot;
&lt;&lt;&lt;
{{{
&gt;У попа была собака
&gt;...
&gt;На могиле написал:
&gt;&gt;У попа была собака
&gt;&gt;...
&gt;&gt;На могиле написал:
}}}
&gt;У попа была собака
&gt;...
&gt;На могиле написал:
&gt;&gt;У попа была собака
&gt;&gt;...
&gt;&gt;На могиле написал:
===
----
+++[Заголовки (headers, H*)]&gt;
{{{
!Заголовок
!!Подзаголовок
!!!Подзаголовок 2
!!!!Подзаголовок 3
!!!!!Подзаголовок 4
}}}
!Заголовок
!!Подзаголовок
!!!Подзаголовок 2
!!!!Подзаголовок 3
!!!!!Подзаголовок 4
(и так далее до 6 уровня)
===
----
+++[inline HTML]&gt;
{{{
&lt;html&gt;
С недавних пор в &lt;a href=&quot;http://www.tiddlywiki.com/&quot;&gt;TiddlyWiki&lt;/a&gt; появилась возможность использовать &lt;b&gt;внедренный HTML&lt;/b&gt;
&lt;/html&gt;
}}}
&lt;html&gt;
С недавних пор в &lt;a href=&quot;http://www.tiddlywiki.com/&quot;&gt;TiddlyWiki&lt;/a&gt; появилась возможность использовать &lt;b&gt;внедренный HTML&lt;/b&gt;
&lt;/html&gt;
===
----
+++[Спецсимволы HTML]&gt;
Entities in HTML documents allow characters to be entered that can't easily be typed on an ordinary keyboard. They take the form of an ampersand (&amp;), an identifying string, and a terminating semi-colon (;). There's a complete reference [[here|http://www.htmlhelp.com/reference/html40/entities/]]; some of the more common and useful ones are shown below. 
|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !HTML Entities |
| &amp;amp;nbsp; | &amp;nbsp; | no-break space | &amp;nbsp;&amp;nbsp; | &amp;amp;apos; | &amp;apos; | single quote, apostrophe |
| &amp;amp;ndash; | &amp;ndash; | en dash |~| &amp;amp;quot; | &quot; | quotation mark |
| &amp;amp;mdash; | &amp;mdash; | em dash |~| &amp;amp;prime; | &amp;prime; | prime; minutes; feet |
| &amp;amp;hellip; | &amp;hellip; | horizontal ellipsis |~| &amp;amp;Prime; | &amp;Prime; | double prime; seconds; inches |
| &amp;amp;copy; | &amp;copy; | Copyright symbol |~| &amp;amp;lsquo; | &amp;lsquo; | left single quote |
| &amp;amp;reg; | &amp;reg; | Registered symbol |~| &amp;amp;rsquo; | &amp;rsquo; | right single quote |
| &amp;amp;trade; | &amp;trade; | Trademark symbol |~| &amp;amp;ldquo; | &amp;ldquo; | left double quote |
| &amp;amp;dagger; | &amp;dagger; | dagger |~| &amp;amp;rdquo; | &amp;rdquo; | right double quote |
| &amp;amp;Dagger; | &amp;Dagger; | double dagger |~| &amp;amp;laquo; | &amp;laquo; | left angle quote |
| &amp;amp;para; | &amp;para; | paragraph sign |~| &amp;amp;raquo; | &amp;raquo; | right angle quote |
| &amp;amp;sect; | &amp;sect; | section sign |~| &amp;amp;times; | &amp;times; | multiplication symbol |
| &amp;amp;uarr; | &amp;uarr; | up arrow |~| &amp;amp;darr; | &amp;darr; | down arrow |
| &amp;amp;larr; | &amp;larr; | left arrow |~| &amp;amp;rarr; | &amp;rarr; | right arrow |
| &amp;amp;lArr; | &amp;lArr; | double left arrow |~| &amp;amp;rArr; | &amp;rArr; | double right arrow |
| &amp;amp;harr; | &amp;harr; | left right arrow |~| &amp;amp;hArr; | &amp;hArr; | double left right arrow |
The table below shows how accented characters can be built up by subsituting a base character into the various accent entities in place of the underscore ('_'):
|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;|&gt;| !Accented Characters |
| grave accent | &amp;amp;_grave; | &amp;Agrave; | &amp;agrave; | &amp;Egrave; | &amp;egrave; | &amp;Igrave; | &amp;igrave; | &amp;Ograve; | &amp;ograve; | &amp;Ugrave; | &amp;ugrave; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; |
| acute accent | &amp;amp;_acute; | &amp;Aacute; | &amp;aacute; | &amp;Eacute; | &amp;eacute; | &amp;Iacute; | &amp;iacute; | &amp;Oacute; | &amp;oacute; | &amp;Uacute; | &amp;uacute; | &amp;nbsp; | &amp;nbsp; | &amp;Yacute; | &amp;yacute; | &amp;nbsp; | &amp;nbsp; |
| circumflex accent | &amp;amp;_circ; | &amp;Acirc; | &amp;acirc; | &amp;Ecirc; | &amp;ecirc; | &amp;Icirc; | &amp;icirc; | &amp;Ocirc; | &amp;ocirc; | &amp;Ucirc; | &amp;ucirc; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; |
| umlaut mark | &amp;amp;_uml; | &amp;Auml; | &amp;auml; | &amp;Euml; | &amp;euml; | &amp;Iuml; | &amp;iuml; | &amp;Ouml; | &amp;ouml; | &amp;Uuml; | &amp;uuml; | &amp;nbsp; | &amp;nbsp; | &amp;Yuml; | &amp;yuml; | &amp;nbsp; | &amp;nbsp; |
| tilde | &amp;amp;_tilde; | &amp;Atilde; | &amp;atilde; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;Otilde; | &amp;otilde; | &amp;nbsp; | &amp;nbsp; | &amp;Ntilde; | &amp;ntilde; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; |
| ring | &amp;amp;_ring; | &amp;Aring; | &amp;aring; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; |
| slash | &amp;amp;_slash; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;Oslash; | &amp;oslash; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; |
| cedilla | &amp;amp;_cedil; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;nbsp; | &amp;Ccedil; | &amp;ccedil; |
===
----
+++[Особые стили CSS]&gt;
!!Inline-стили
{{{
@@color:green;green coloured@@
@@background-color:#ff0000;color:#ffffff;red coloured@@
@@text-shadow:black 3px 3px 8px;font-size:18pt;display:block;margin:1em 1em 1em 1em;border:1px solid black;Access any CSS style@@
@@color:#4bbbbb;Some random text@@
}}}
@@color:green;green coloured@@
@@background-color:#ff0000;color:#ffffff;red coloured@@
@@text-shadow:black 3px 3px 8px;font-size:18pt;display:block;margin:1em 1em 1em 1em;border:1px solid black;Access any CSS style@@
@@color:#4bbbbb;Some random text@@
!!CSS классы
CSS-классы можно применить к строкам или текстовым блокам. Так создается {{{span}}}-элемент:
{{{
{{customClassName{Some random text}}}
}}}
Отображается как:
{{customClassName{Some random text}}}

Так создается {{{&lt;div&gt;}}}-элемент:
{{{
 {{customClassName{
 Some random text
 }}}
}}}
Отображается как:
{{customClassName{
Some random text
}}}
===
----
+++[Комментарии]&gt;
To hide text within a tiddler so that it is not displayed you can wrap it in {{{/%}}} and {{{%/}}}. It can be a useful trick for hiding drafts or annotating complex markup. 
===
----
+++[PluginFormatting]&gt;
To make plugins, stylesheets and templates easier to read, you can use special alternative formatting for monospaced blocks.

In [[JavaScript|http://en.wikipedia.org/wiki/JavaScript]] code:
{{{
//{{{
var id = document.getElementById(&quot;mainMenu&quot;);
//}}}
}}}
In HTML templates:
{{{
&lt;!--{{{--&gt;
&lt;div id=&quot;MainMenu&quot;&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;
}}}
In CSS stylesheets
{{{
/*{{{*/
div {color: #ff0000;}
/*}}}*/
}}}
It will be displayed as:
//{{{
var id = document.getElementById(&quot;mainMenu&quot;);
//}}}

&lt;!--{{{--&gt;
&lt;div id=&quot;MainMenu&quot;&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;

/*{{{*/
div {color: #ff0000;}
/*}}}*/
===
&lt;&lt;br&gt;&gt;
Принудительный перенос текста: {{{&lt;&lt;br&gt;&gt;}}}
{{{ а это - ́ - знак уда́рения: aaaábbb }}}</pre>
</div>
<div title="Тоссы" creator="OldYaga" modifier="OldYaga" created="201702211943" modified="201702241907" tags="Раса" changecount="6">
<pre>//Латинское название расы//

[img[Тут должна быть картинка расы. У вас отключены картинки?|atlas\resources\races\toss\toss_img.jpg]]
----

''Краткое описание расы и место в мире''
Традиционное общество тоссов делится на три касты: судьи, темплары и кхалаи. Судьи (также допустимо называть их «Арбитры») — управляющая каста, из неё происходят чиновники, а также учёные и исследователи. Старейшие судьи составляют верховный орган власти — Конклав. Темплары — каста воинов, чей долг — защищать расу и родной мир от внешних и внутренних врагов, а также поддерживать спокойствие внутри общества. Кхалаи — рабочие, технологи, инженеры. Тёмные темплары жили в полной изоляции от всех остальных и считались падшими. Даже общение с ними расценивалось Конклавом как опасная ересь.
Тоссы, не принявшие Кхалу (тёмные темплары), построили на своей новой родине своё общество, возглавляемое матриархом. Заместителем матриарха был прелат. Хотя тёмные темплары ненавидели и презирали Конклав, они остались верны Айуру.
Тоссы практически не поддерживают контакты с другими расами, преследуемые цели неизвестны, случайно встретить тосса практически невозможно.

''Физиология''
Рост взрослого тосса колеблется между 2 и 3 метрами. Кожа гладкая — с возрастом трескается и становится более грубой. По другой версии, тоссы имеют чешуйчатый покров, более или менее выделенный. Цвет кожи — оттенки серого, синего, иногда бежевый и зеленоватый — зависит от племени. Тоссы - гуманоиды, обладают широкой грудной клеткой и плечами, узкой талией. Голень короткая, ступня длинная и узкая, пятки всегда высоко над землей (как у гепардов или страусов), что способствует более быстрому бегу. На конце стопы расположены короткие рудиментарные пальцы. Строение рук близко к человеческому, но кисть состоит из четырёх хорошо развитых пальцев, причем оба крайних — большие (противопоставленные). Вытянутые головы имеют на макушке костяной щиток, из-под которого вырастает длинный пучок толстых нервных отростков — это своеобразная антенна тосса, позволяющая ему связываться с сородичами через Кхалу и держать с ними контакт на больших расстояниях. На подбородке виден костяной нарост, видимо, для тосса это является гордостью, потому что часто наблюдается, что тоссы украшают его некими драгоценными предметами. Глаза светятся одним из следующих цветов — голубым, жёлтым, сиреневым, красным или оранжевым, зелёным (два предпоследних цвета чаще встречаются у тёмных темпларов). Этот цвет может меняться, вероятно, при проявлении сильных эмоций. Тоссы не имеют внешне выраженных ушей, рта и носа, так как не питаются органической пищей. Вместо неё тоссы питаются солнечным или звёздным светом. Тоссы могут телепатически контактировать с живыми существами. Средняя продолжительность жизни — пара тысяч лет.

''История''
__Племена Тоссов (принявшие Кхалу).__
Несмотря на реформы Кхаса, наряду с кастовым, было сохранено и более древнее, племенное деление общества. Обычно каждое племя специализируется на определённых задачах. Большинство представителей племени относятся к одной касте.
Шелак — племенной цвет белый. Судьи. Учёные, исследователи, архивариусы. Хранители знаний.
Ара — племенной цвет красный. Судьи. Чиновники. Члены Конклава. Племя, первым принявшее Кхалу и распространявшее её среди тоссов.
Акилэ — племенной цвет зелёный. Темплары. Главная военная сила тоссов. Одно из сильнейших племен.
Саргас — племенной цвет синий. Темплары. Атакующая сила и наемные убийцы Конклава. Наиболее агрессивное племя, долго не желавшее принимать Кхалу. Больше всего Тёмных темпларов уходили именно из саргасов. Предположительно, это племя названо в честь звезды Саргас которая в созвездии Скорпиона является «жалом».
Аурига — племенной цвет оранжевый. Темплары. В прошлом бывшие прекрасными мореплавателями, они первыми осваивали космическое пространство, и сейчас составляют основу Золотого Флота тоссов.
Фуринакс — племенной цвет сиреневый. Кхалаи. Основа рабочей касты — оружейники, строители, корабелы, изобретатели.
Велари — племенной цвет жёлтый. Темплары. Велари в основном пилоты истребителей, разведчики.
Венатир — племенной цвет бурый. Судьи.

__Племена Неразимов (Тёмные темплары)__
Алисаар — это племя отделилось от основной массы Неразимов и находилось на скрытой луне Эльна, где они охраняли летописи тёмных темпларов, сохранённые в кристаллах Кхайдарина.
Борос — это племя носит плоские шлемы и тяжёлую броню.
Ленасса — вооружены «клинками искривления» и носят повязки, скрывающие большую часть лица.
Зер’Атай — тёмные темплары, вооружённые «косами искривления» и носят украшения из костей убитых врагов.

__Другие организации тоссов__
Тал’Дарим — цвет бирюзовый. Они охраняют найденные артефакты газ терразин, который называют «Дыхание жизни». Презирают тёмных темпларов, но как и они, отсекли свои пси-рецепторы. Поклоняются Амуну — падшему Зел’Нага. Отщепенцы от группы выживших на Аиуре тоссов. Название в переводе с Кхалани означает «Выкованные».
Шел’На Криас — ещё одна часть тоссов, оставшихся на Аиуре. Они спасали сородичей на родной планете, пока не пали все до единого. На языке Кхалани их название означает «Те, Кто Всё Выдержат».

''Шаблон расы в GURPS''</pre>
</div>
<div title="Экономика" creator="OldYaga" modifier="OldYaga" created="201702221932" modified="201702251208" tags="Правила" changecount="39">
<pre>|&gt;|&gt;| !Начальное богатство |
| TL | Примеры | Начальное богатство* |
| TL0 | Каменный век (доисторический период и далее). | $250 |
| TL1 | Бронзовый век (3500 лет до н.э. и позже). | $500 |
| TL2 | Железный век (1200 лет до н.э. и позже). | $750 |
| TL3 | Средневековье (600 г. н.э. и позже). | $1.000 |
| TL4 | Эпоха парусов (1450 г. и позже). | $2.000 |
| TL5 | Промышленный переворот (1730 г. и позже). | $5.000 |
| TL6 | Эпоха механики (1880 г. и позже). | $10.000 |
| TL7 | Атомная эпоха (1940 г. и позже). | $15.000 |
| TL8 | Цифровая эпоха (1980 г. и позже). | $20.000 |
| TL9 | Эпоха микротехники (2025 г. и позже?). | $30.000 |
| TL10 | Эпоха роботизации (2070 г. и позже?) | $50.000 |
| TL11 | Эпоха экзотических материалов. | $75.000 |
| TL12+ | Все что пожелает Мастер | $100.000 |
 *умножается на уровень богатства
 *80% - дом, одежда и проч.

|&gt;|&gt;| !Расходы на жизнь |
| Статус*| Примеры | Расходы |
| 8 | Император, божественный правитель, владыка | $600.000.000 |
| 7 | Король, Папа, президент | $60.000.000 |
| 6 | Королевская семья, губернатор | $6.000.000 |
| 5 | Крупный дворянин, глава корпорации | $600.000 |
| 4 | Мелкий дворянин, депутат, видный деятель | $60.000 |
| 3 | Поместный рыцарь, цеховой Мастер, мэр мегаполиса | $12.000 |
| 2 | Безземельный рыцарь, мэр, директор предприятия | $3.000 |
| 1 | Оруженосец, торговец, священник, врач, советник | $1.200 |
| 0 | Вольный человек, подмастерье, обычный гражданин | $600 |
| -1 | Крепостной, бедный гражданин | $300 |
| -2 | Раб, бездомный | $100 |
 *можно изображать из себя кого-то статусом выше - деньги и бросок Хороших манер (Светское общество)
1. Отпуск, путешествие дольше месяца - расходы в 6 раз выше
2. День по кабакам и гостиницам - 20% месячного расхода (неорганизованное путешествие)</pre>
</div>
<div title="Энергия" creator="OldYaga" modifier="OldYaga" created="201702251131" tags="Правила" changecount="1">
<pre>[[POWER CELLS]]</pre>
</div>
</div>
<!--POST-STOREAREA-->
</body>
</html>
